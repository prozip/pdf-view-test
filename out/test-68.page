<div id="pf44" class="pf w0 h0" data-page-no="44"><div class="pc pc44 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg44.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">44</div><div class="t m0 x8e h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xf2 h2c y1d0 ffb fs19 fcb sc0 ls12b ws0">HAPTER</div><div class="t m0 xc9 h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 3</div><div class="t m0 x47 h2d y80 ffa fs7 fcb sc0 ls6 ws0">Abstraction and encapsulation</div><div class="t m0 x44 h15 y40 ff4 fsb fc3 sc0 ls42 ws1f2">Small, focused behaviors that get used agai<span class="ls44 wsd1">n and again sit in the lower layers and need</span></div><div class="t m0 x44 h15 y639 ff4 fsb fc3 sc0 ls30 ws13f">to change infrequently. The big conce<span class="_ _e"></span>pts, <span class="ls34 ws2f2">business logic, and complex moving parts</span></div><div class="t m0 x44 h15 y63a ff4 fsb fc3 sc0 ls47 ws450">show up as you go fur<span class="_ _e"></span>ther out; they change more f<span class="_ _e"></span>requently because of changing</div><div class="t m0 x44 h15 y63b ff4 fsb fc3 sc0 ls66 ws69">requirements,<span class="_ _0"></span> but they still make us<span class="_ _0"></span>e of the smaller behaviors.</div><div class="t m0 x32 h15 y63c ff4 fsb fc3 sc0 ls120 ws0"> Whe<span class="_ _e"></span>n you’r<span class="_ _e"></span>e star<span class="_ _e"></span>ting ou<span class="_ _e"></span>t, it’<span class="_ _e"></span>s comm<span class="_ _e"></span>on <span class="ls44 wseb">to write one long, procedural program that</span></div><div class="t m0 x44 h15 y63d ff4 fsb fc3 sc0 ls34 ws13b">gets a job done. This works fine when prototyping, but it reveals its poor maintainabil-</div><div class="t m0 x44 h15 y63e ff4 fsb fc3 sc0 ls2f ws26a">ity when someone needs to read all 100 lines <span class="ls20 ws17">of code to figure out where they need to</span></div><div class="t m0 x44 h15 y63f ff4 fsb fc3 sc0 ls20 ws451">make a change or fix a bug.<span class="ls4e ws452"> Introducing abstractio<span class="_ _e"></span>n with features of the language</span></div><div class="t m0 x44 h15 y640 ff4 fsb fc3 sc0 ls31 ws453">makes it easier to pinpoint the relevant <span class="ls30 ws454">code. In Python, features like functions,</span></div><div class="t m0 x44 h15 y641 ff4 fsb fc3 sc0 ls38 ws424">classes, and modules help abstract behavi<span class="ls1c ws3e2">or. Let’s see how using functions in Python</span></div><div class="t m0 x44 h15 y642 ff4 fsb fc3 sc0 ls6c ws6f">helps with the first<span class="_ _0"></span> two steps of the senti<span class="_ _0"></span>ment-analysis workflo<span class="_ _0"></span>w.</div><div class="t m0 x32 h15 y643 ff4 fsb fc3 sc0 ls25 ws123"> When working through the code in listing <span class="ls5e ws2db">3.1, you might notice that it do<span class="_ _e"></span>es some</span></div><div class="t m0 x44 h15 y644 ff4 fsb fc3 sc0 ls2e ws455">similar work twice—the wor<span class="_ _0"></span>k of splitting a <span class="ls25 ws456">string up by sentenc<span class="_ _0"></span>e and by individual</span></div><div class="t m0 x44 h15 y645 ff4 fsb fc3 sc0 ls1e ws258">words in each sentence is quite similar. <span class="ls1c ws94">Each step performs the same operation, with</span></div><div class="t m0 x44 h15 y646 ff4 fsb fc3 sc0 ls42 ws457">different inputs. This is usually an oppo<span class="ls3b ws458">rtunity to factor a behavio<span class="_ _e"></span>r into its</span></div><div class="t m0 x44 h15 y647 ff4 fsb fc3 sc0 ls5e ws0">own<span class="_"> </span>function.</div><div class="t m0 x44 h3b y648 ffd fs18 fc3 sc0 lsb2 ws0">import<span class="_"> </span>re</div><div class="t m0 x44 h3b y649 ffd fs18 fc3 sc0 lsb2 ws0">product_review<span class="_"> </span>=<span class="_"> </span>&apos;&apos;&apos;This<span class="_"> </span>is<span class="_"> </span>a<span class="_"> </span>fine<span class="_"> </span>milk,<span class="_"> </span>but<span class="_"> </span>the<span class="_"> </span>product</div><div class="t m0 x44 h3b y64a ffd fs18 fc3 sc0 lsb2 ws0">line<span class="_"> </span>appears<span class="_"> </span>to<span class="_"> </span>be<span class="_"> </span>limited<span class="_"> </span>in<span class="_"> </span>available<span class="_"> </span>colors.<span class="_"> </span>I</div><div class="t m0 x44 h3b y64b ffd fs18 fc3 sc0 lsb2 ws0">could<span class="_"> </span>only<span class="_"> </span>find<span class="_"> </span>white.&apos;&apos;&apos;</div><div class="t m0 x44 h3b y64c ffd fs18 fc3 sc0 lsb2 ws0">sentence_pattern<span class="_"> </span>=<span class="_"> </span>re.compile(r&apos;(.*?\.)(\s|$)&apos;,<span class="_"> </span>re.DOTALL)</div><div class="t m0 x44 h3b y64d ffd fs18 fc3 sc0 lsb2 ws0">matches<span class="_"> </span>=<span class="_"> </span>sentence_pattern.findall(product_review)</div><div class="t m0 x44 h3b y64e ffd fs18 fc3 sc0 lsb2 ws0">sentences<span class="_"> </span>=<span class="_"> </span>[match[0]<span class="_"> </span>for<span class="_"> </span>match<span class="_"> </span>in<span class="_"> </span>matches]</div><div class="t m0 x44 h3b y64f ffd fs18 fc3 sc0 lsb2 ws0">word_pattern<span class="_"> </span>=<span class="_"> </span>re.compile(r&quot;([\w\-&apos;]+)([\s,.])?&quot;)</div><div class="t m0 x44 h3b y650 ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>sentence<span class="_"> </span>in<span class="_"> </span>sentences:</div><div class="t m0 xae h3b y651 ffd fs18 fc3 sc0 lsb2 ws0">matches<span class="_"> </span>=<span class="_"> </span>word_pattern.findall(sentence)</div><div class="t m0 xae h3b y652 ffd fs18 fc3 sc0 lsb2 ws0">words<span class="_"> </span>=<span class="_"> </span>[match[0]<span class="_"> </span>for<span class="_"> </span>match<span class="_"> </span>in<span class="_"> </span>matches]</div><div class="t m0 xae h3b y653 ffd fs18 fc1 sc0 lsb2 ws0">print(words)</div><div class="t m0 x32 h20 y654 ffb fs7 fc4 sc0 ls6 ws0">Listing<span class="_"> </span>3.1<span class="_ _55"> </span>A procedure for splitting a paragraph into sen<span class="_ _0"></span>tences and tokens</div><div class="c x43 y655 w10 h6c"><div class="t m0 xfb h14 y656 ff12 fs7 fcb sc0 ls113 ws459">The p<span class="ff13 ls6 ws0">r<span class="ff12 ls125">oduct </span>r</span><span class="lse4 ws45a">eview as a <span class="_ _0"></span>st<span class="ff13 ls6 ws0">r<span class="ff12">i</span>n<span class="ff12">g</span></span></span></div></div><div class="c xeb y657 w21 h6d"><div class="t m0 xb5 h14 y658 ff12 fs7 fcb sc0 ls6 ws317">Matches full </div><div class="t m0 xb5 h14 y659 ff12 fs7 fcb sc0 ls10e ws0">se<span class="ff13 ls6">n</span><span class="lsd2">te<span class="ff13 ls6">n</span><span class="ls13c ws45b">ces e</span><span class="ff13 ls6">n</span><span class="lsec">di<span class="ff13 ls6">n</span><span class="lsdd">g </span></span></span></div><div class="t m0 xb5 h14 y65a ff12 fs7 fcb sc0 lsee ws2cf">with a pe<span class="ff13 ls6 ws0">r<span class="ff12 ls123">iod</span></span></div></div><div class="c x9c y65b w22 h6e"><div class="t m0 x43 h14 y65c ff12 fs7 fcb sc0 ls122 ws0">Fi<span class="ff13 ls6">n</span><span class="lsef ws45c">ds all se</span><span class="ff13 ls6">n</span><span class="lsd2">te<span class="ff13 ls6">n</span><span class="lsd6">ces </span></span></div><div class="t m0 x43 h14 y65d ff12 fs7 fcb sc0 ls6 ws0">i<span class="ff13">n</span><span class="lsd5 ws2a6"> the </span><span class="ff13">r</span><span class="lse0">eview</span></div></div><div class="c x50 y65e w23 h6f"><div class="t m0 x43 h14 y65f ff12 fs7 fcb sc0 ls103 ws0">fi<span class="ff13 ls6">n</span><span class="ls102">dall <span class="ff13 ls6">r</span><span class="ls105">etu<span class="ff13 ls123">rn</span><span class="ls106 ws45d">s list of </span></span></span></div><div class="t m0 x43 h14 y660 ff12 fs7 fcb sc0 ls13d ws0">(se<span class="ff13 ls6">n</span><span class="lsd2">te<span class="ff13 ls6">n</span><span class="lsd5 ws2d2">ce, white space) pai<span class="_ _0"></span><span class="ff13 ls6 ws0">r<span class="ff12">s</span></span></span></span></div></div><div class="c x43 y661 w10 h70"><div class="t m0 xfb h14 y662 ff12 fs7 fcb sc0 lsec ws45e">Matches si<span class="ff13 ls6 ws0">n</span><span class="ls88 ws314">gle wo<span class="ff13 ls6 ws0">r</span></span><span class="ws0">ds</span></div></div><div class="c x65 y663 w24 h43"><div class="t m0 x43 h14 y2f5 ff12 fs7 fcb sc0 ls122 ws0">Fo<span class="ff13 ls6">r</span><span class="lsfd ws310"> each se</span><span class="ff13 ls6">n</span><span class="lsd2">te<span class="ff13 ls6">n</span><span class="lsd4">ce, </span></span></div><div class="t m0 x43 h14 y2f7 ff12 fs7 fcb sc0 lsd2 ws38c">gets all the wo<span class="ff13 ls6 ws0">r<span class="ff12 ls13e">ds</span></span></div></div><div class="t m0 x44 h15 y664 ff4 fsb fcd sc0 ls6 ws0">You can see th<span class="_ _e"></span>at the work to find the</div><div class="t m3 x0 h22 y664 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 xe h24 y664 ffd fsc fcd sc0 ls6 ws0">senten<span class="_ _0"></span>ces</div><div class="t m3 x0 h25 y664 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 x74 h15 y664 ff4 fsb fcd sc0 ls6 ws0">and</div><div class="t m3 x0 h22 y664 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 xe8 h24 y664 ffd fsc fcd sc0 ls6 ws0">words</div><div class="t m3 x0 h25 y664 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 x9c h15 y664 ff4 fsb fcd sc0 ls6 ws0">is similar, with <span class="_ _e"></span>the pattern</div><div class="t m3 x0 h22 y664 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x44 h15 y665 ff4 fsb fcd sc0 ls6 ws0">to match against being the distinguishing feature.<span class="_ _e"></span> <span class="_ _0"></span>Some logistics also have to be taken</div><div class="t m3 x0 h22 y665 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x44 h15 y666 ff4 fsb fcd sc0 ls6 ws0">care <span class="_ _e"></span>o<span class="_ _e"></span>f, <span class="_ _e"></span>like <span class="_ _e"></span>deali<span class="_ _e"></span>ng <span class="_ _e"></span>with <span class="_ _e"></span>the<span class="_ _e"></span> <span class="_ _e"></span>output <span class="_ _e"></span>of</div><div class="t m3 x0 h22 y666 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x31 h24 y667 ffd fsc fcd sc0 ls6 ws0">finda<span class="_ _0"></span>ll</div><div class="t m0 x6d h15 y667 ff4 fsb fcd sc0 ls6 ws0">, <span class="_ _e"></span>tha<span class="_ _e"></span>t <span class="_ _e"></span>clutter <span class="_ _e"></span>up <span class="_ _f"></span>the <span class="_ _e"></span>code. <span class="_ _f"></span>At <span class="_ _e"></span>a <span class="_ _f"></span>quick</div><div class="t m3 x0 h22 y667 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x44 h15 y668 ff4 fsb fcd sc0 ls6 ws0">glance, the intent of<span class="_ _e"></span> this code might not be obvious.</div><div class="t m0 x32 h49 y669 ffb fs17 fce sc0 ls6 ws0">NOTE</div><div class="t m3 x0 h34 y669 ff8 fs17 fce sc0 ls6 ws0"> </div><div class="t m0 xef h15 y669 ff4 fsb fcd sc0 ls6 ws0">In </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x21 h15 y669 ff4 fsb fcd sc0 ls6 ws0">real </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x28 h15 y669 ff4 fsb fcd sc0 ls6 ws0">natural-languag<span class="_ _e"></span>e </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xc h15 y669 ff4 fsb fcd sc0 ls6 ws0">processing, </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x50 h15 y669 ff4 fsb fcd sc0 ls6 ws0">splitting </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x60 h15 y669 ff4 fsb fcd sc0 ls6 ws0">sentences </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x77 h15 y669 ff4 fsb fcd sc0 ls6 ws0">and </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xde h15 y669 ff4 fsb fcd sc0 ls6 ws0">words </div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xfc h15 y669 ff4 fsb fcd sc0 ls6 ws0">is</div><div class="t m3 x0 h22 y669 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x32 h15 y66a ff4 fsb fcd sc0 ls6 ws0">difficult, </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x15 h15 y66a ff4 fsb fcd sc0 ls6 ws0">so </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xe6 h15 y66a ff4 fsb fcd sc0 ls6 ws0">difficult, </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x3 h15 y66a ff4 fsb fcd sc0 ls6 ws0">in </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xb6 h15 y66a ff4 fsb fcd sc0 ls6 ws0">fact, </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x1f h15 y66a ff4 fsb fcd sc0 ls6 ws0">that</div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xe h15 y66a ff4 fsb fcd sc0 ls6 ws0">the </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xa1 h15 y66a ff4 fsb fcd sc0 ls6 ws0">software </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x52 h15 y66a ff4 fsb fcd sc0 ls6 ws0">to </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xf8 h15 y66a ff4 fsb fcd sc0 ls6 ws0">parse </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x9c h15 y66a ff4 fsb fcd sc0 ls6 ws0">them </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x33 h15 y66a ff4 fsb fcd sc0 ls6 ws0">generally </div><div class="t m3 x0 h22 y66a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xce h15 y66a ff4 fsb fcd sc0 ls6 ws0">uses</div><div class="t m0 x32 h1b y66b ff3 fsb fcd sc0 ls6 ws0">probabilistic </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x37 h1b y66b ff3 fsb fcd sc0 ls6 ws0">modeling</div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x16 h15 y66b ff4 fsb fcd sc0 ls6 ws0">to </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x45 h15 y66b ff4 fsb fcd sc0 ls6 ws0">determine </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xa5 h15 y66b ff4 fsb fcd sc0 ls6 ws0">the </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x10 h15 y66b ff4 fsb fcd sc0 ls6 ws0">result. </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x4c h15 y66b ff4 fsb fcd sc0 ls6 ws0">Probabilistic </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x4d h15 y66b ff4 fsb fcd sc0 ls6 ws0">modeling </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xdc h15 y66b ff4 fsb fcd sc0 ls6 ws0">uses </div><div class="t m3 x0 h22 y66b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xa4 h15 y66b ff4 fsb fcd sc0 ls6 ws0">a</div><div class="t m0 x32 h15 y66c ff4 fsb fcd sc0 ls6 ws0">large body <span class="_ _0"></span>of input testing data <span class="_ _0"></span>to determine the <span class="_ _0"></span>likely correctness of a <span class="_ _0"></span>partic-</div><div class="t m0 x32 h15 y66d ff4 fsb fcd sc0 ls6 ws0">ular <span class="_ _f"></span>result. <span class="_ _f"></span>T<span class="_ _e"></span>he <span class="_ _f"></span>result </div><div class="t m3 x0 h22 y66d ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xa8 h15 y66d ff4 fsb fcd sc0 ls6 ws0">might <span class="_ _f"></span>not <span class="_ _f"></span>alwa<span class="_ _e"></span>ys <span class="_ _f"></span>be <span class="_ _f"></span>the <span class="_ _f"></span>same! </div><div class="t m3 x0 h22 y66d ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x41 h15 y66d ff4 fsb fcd sc0 ls6 ws0">Natural <span class="_ _f"></span>languages<span class="_ _e"></span> <span class="_ _f"></span>are</div><div class="t m0 x32 h15 y66e ff4 fsb fcd sc0 ls6 ws0">complex, and it<span class="_ _e"></span> shows when we try to make comput<span class="_ _e"></span>ers understand them.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
