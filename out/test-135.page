<div id="pf87" class="pf w0 h0" data-page-no="87"><div class="pc pc87 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg87.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">111<span class="_ _aa"></span><span class="ffa">An initial code structure, by concern</span></div><div class="t m0 x8b h29 y33a ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x48 h15 y40 ff3 fsb fc3 sc0 ls2e ws0">URL<span class="_ _f"></span><span class="ff4 ls2d ws31">—The URL is required, so it gets </span></div><div class="t m5 x6c h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">NOT NULL</div><div class="t m0 xa2 h15 y40 ff4 fsb fc3 sc0 ls34 ws9f"> as well.</div><div class="t m0 x8b h29 ydd4 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x48 h15 y6e4 ff3 fsb fc3 sc0 ls2f ws0">Notes<span class="ff4 ls48 ws716">—Notes for a bookmark are optional, <span class="_ _e"></span>so only the </span></div><div class="t m5 xed h24 y6e3 ffd fsc fc3 sc0 lsa0 ws0">TEXT</div><div class="t m0 x5c h15 y6e4 ff4 fsb fc3 sc0 ls2d ws717"> specifier is necessary.</div><div class="t m0 x8b h29 ydd5 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x48 h15 ydd6 ff3 fsb fc3 sc0 ls1e ws0">Date<span class="_ _f"></span><span class="ff4 ls3a ws28">—The date the bookmark was added is required, so it <span class="_ _e"></span>gets </span></div><div class="t m5 x7d h24 ydd7 ffd fsc fc3 sc0 lsa0 ws0">NOT NULL</div><div class="t m0 x9 h15 ydd6 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x35 h15 y3ee ff4 fsb fc3 sc0 ls3b ws718">A table creation statement in SQL<span class="_ _e"></span>ite uses the </div><div class="t m5 x50 h24 y3ef ffd fsc fc3 sc0 lsa0 ws36d">CREATE TABLE</div><div class="t m0 xed h15 y3ee ff4 fsb fc3 sc0 ls1e ws6d"> keywords, followed by the</div><div class="t m0 x35 h15 y6cb ff4 fsb fc3 sc0 ls1b7 ws719">table n<span class="_ _0"></span>ame, the l<span class="_ _0"></span>ist of colu<span class="_ _0"></span>mns, and<span class="_ _0"></span> thei<span class="ls3a ws481">r data type information in parentheses.</span></div><div class="t m0 x35 h15 y340 ff4 fsb fc3 sc0 ls48 ws4a5">Because you’ll want Bark <span class="_ _e"></span>to create the table <span class="ws36b">on startup if it does<span class="ls2f ws1c8">n’t already exist, you</span></span></div><div class="t m0 x35 h15 ya3b ff4 fsb fc3 sc0 ls48 ws2be">can use </div><div class="t m5 xd8 h24 ybe7 ffd fsc fc3 sc0 lsa0 ws413">CREATE TABLE IF NOT EXISTS</div><div class="t m0 x4e h15 ya3b ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x83 h15 yb74 ff4 fsb fc3 sc0 ls2c ws47a"> Based on the previous descriptions of <span class="ls30 ws1ef">the bookmark columns, what would the SQL</span></div><div class="t m0 x35 h15 ydd8 ff4 fsb fc3 sc0 ls71 wsdf">statement look like for creating a bookmark<span class="ls20 wsb0">s table? See if you can write it out, then</span></div><div class="t m0 x35 h15 y39d ff4 fsb fc3 sc0 ls2f ws26a">come back to check your work agai<span class="_ _0"></span>nst the following listing.</div><div class="t m0 x35 h3b ydd9 ffd fs18 fc3 sc0 lsb2 ws0">CREATE<span class="_"> </span>TABLE<span class="_"> </span>IF<span class="_"> </span>NOT<span class="_"> </span>EXISTS<span class="_"> </span>bookmarks</div><div class="t m0 x35 h3b ydda ffd fs18 fc3 sc0 ls6 ws0">(</div><div class="t m0 x87 h3b yddb ffd fs18 fc3 sc0 lsb2 ws0">id<span class="_"> </span>INTEGER<span class="_"> </span>PRIMARY<span class="_"> </span>KEY<span class="_"> </span>AUTOINCREMENT,</div><div class="t m0 x87 h3b yddc ffd fs18 fc3 sc0 lsb2 ws0">title<span class="_"> </span>TEXT<span class="_"> </span>NOT<span class="_"> </span>NULL,</div><div class="t m0 x87 h3b yddd ffd fs18 fc3 sc0 lsb2 ws0">url<span class="_"> </span>TEXT<span class="_"> </span>NOT<span class="_"> </span>NULL,</div><div class="t m0 x87 h3b ydde ffd fs18 fc3 sc0 lsb2 ws0">notes<span class="_"> </span>TEXT,</div><div class="t m0 x87 h3b yddf ffd fs18 fc3 sc0 lsb2 ws0">date_added<span class="_"> </span>TEXT<span class="_"> </span>NOT<span class="_"> </span>NULL</div><div class="t m0 x35 h3b yde0 ffd fs18 fc1 sc0 lsb2 ws0">);</div><div class="t m0 x35 h15 yde1 ff4 fsb fc3 sc0 ls4b ws576">You can now writ<span class="_ _e"></span>e your method for creating <span class="ls31 ws261">ta<span class="_ _e"></span>bles. Each column is identified by a</span></div><div class="t m0 x35 h15 y5e1 ff4 fsb fc3 sc0 ls1f ws29a">name, like </div><div class="t m5 xc3 h24 yde2 ffd fsc fc3 sc0 lsa0 ws0">title</div><div class="t m0 x3a h15 y5e1 ff4 fsb fc3 sc0 ls1e ws299">, that maps to a data type and constraints, like </div><div class="t m5 x5c h24 yde2 ffd fsc fc3 sc0 lsa0 ws71a">TEXT NOT NULL</div><div class="t m0 xd5 h15 y5e1 ff4 fsb fc3 sc0 ls4e ws71b">, so a</div><div class="t m0 x35 h15 yde3 ff4 fsb fc3 sc0 ls2f wsdc">dictionary seems like an appropriate Pyth<span class="ls3a ws71c">on type for representing columns. The</span></div><div class="t m0 x35 h15 yde4 ff4 fsb fc3 sc0 ls1e ws16">method needs to</div><div class="t m0 x8a h3d yde5 ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x48 h15 yde6 ff4 fsb fc3 sc0 ls44 ws51f">Accept two argu<span class="ls30 ws394">ments: the name of the table to create,<span class="_ _e"></span> and a dictionary of col-</span></div><div class="t m0 x48 h15 yde7 ff4 fsb fc3 sc0 ls38 ws26">umn names mapped to their data types and constraints</div><div class="t m0 x8a h3d yde8 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x48 h15 yde9 ff4 fsb fc3 sc0 ls34 ws22">Construct a </div><div class="t m5 x67 h24 ydea ffd fsc fc3 sc0 lsa0 ws0">CREATE TABL<span class="_ _e"></span>E</div><div class="t m0 xca h15 yde9 ff4 fsb fc3 sc0 ls6c ws6f"> SQL statement like th<span class="_ _0"></span>e one shown earlier</div><div class="t m0 x8a h15 ydeb ffb fs1e fca sc0 ls6 ws0">3<span class="_ _50"> </span><span class="ff4 fsb fc3 ls42 ws32">Execute the statement using </span></div><div class="t m5 xe h24 ydec ffd fsc fc3 sc0 lsa0 ws0">DatabaseMana<span class="_ _e"></span>ger._execute</div><div class="t m0 x35 h15 y30e ff4 fsb fc3 sc0 ls1c ws38d">Try writing the </div><div class="t m5 xa7 h24 yded ffd fsc fc3 sc0 lsa0 ws0">create_table</div><div class="t m0 x59 h15 y30e ff4 fsb fc3 sc0 ls51 ws11b"> method now, and then check back to see how it com-</div><div class="t m0 x35 h15 y30f ff4 fsb fc3 sc0 ls42 ws26e">pares to the following listing.</div><div class="t m0 x35 h3b ydee ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>create_table(self,<span class="_"> </span>table_name,<span class="_"> </span>columns):</div><div class="t m0 x36 h3b ydef ffd fs18 fc3 sc0 lsb2 ws0">columns_with_types<span class="_"> </span>=<span class="_"> </span>[</div><div class="t m0 xe6 h3b ydf0 ffd fs18 fc3 sc0 lsb2 ws0">f&apos;{column_name}<span class="_"> </span>{data_type}&apos;</div><div class="t m0 xe6 h3b ydf1 ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>column_name,<span class="_"> </span>data_type<span class="_"> </span>in<span class="_"> </span>columns.items()</div><div class="t m0 x36 h3b ydf2 ffd fs18 fc3 sc0 ls6 ws0">]</div><div class="t m0 x36 h3b ydf3 ffd fs18 fc3 sc0 lsb2 ws0">self._execute(</div><div class="t m0 xe6 h3b ydf4 ffd fs18 fc3 sc0 lsb2 ws0">f&apos;&apos;&apos;</div><div class="t m0 xe6 h3b ydf5 ffd fs18 fc3 sc0 lsb2 ws0">CREATE<span class="_"> </span>TABLE<span class="_"> </span>IF<span class="_"> </span>NOT<span class="_"> </span>EXISTS<span class="_"> </span>{table_name}</div><div class="t m0 xe6 h3b ydf6 ffd fs18 fc3 sc0 lsb2 ws0">({&apos;,<span class="_"> </span>&apos;.join(columns_with_types)});</div><div class="t m0 xe6 h3b ydf7 ffd fs18 fc3 sc0 lsb2 ws0">&apos;&apos;&apos;</div><div class="t m0 x36 h3b ydf8 ffd fs18 fc1 sc0 ls6 ws0">)</div><div class="t m0 x15 h14 ydf9 ff12 fs7 fcb sc0 ls6 ws0"> </div><div class="t m0 x17 h20 ydfa ffb fs7 fc4 sc0 ls6 ws0">The creation statement for a bookmarks table<span class="_ _ab"></span>Listing<span class="_"> </span>6.1</div><div class="t m0 x17 h20 ydfb ffb fs7 fc4 sc0 ls6 ws0">Creating a SQLite table<span class="_ _ac"></span>Listing<span class="_"> </span>6.2</div><div class="c x27 ydfc wa h79"><div class="t m0 x12e h14 y392 ff12 fs7 fcb sc0 ls113 ws0">The <span class="ff13 ls6">m</span><span class="lse3">ai<span class="ff13 ls6">n</span><span class="lsd6 ws2a7"> ID of each </span><span class="ff13 ls6">r<span class="ff12">eco</span>r</span><span class="ls150">d, </span></span></div><div class="t m0 x12e h14 y393 ff12 fs7 fcb sc0 lsef ws71d">which i<span class="ff13 ls6 ws0">n<span class="ff12">c</span>r<span class="ff12">e</span>m<span class="ff12">e</span>n</span><span class="lsde ws71e">ts auto<span class="ff13 ls6 ws0">m<span class="ff12 lsda">atically </span></span></span></div><div class="t m0 x12e h14 y394 ff12 fs7 fcb sc0 ls122 ws0">as <span class="ff13 ls6">r<span class="ff12">eco</span>r</span><span class="ls124 ws3cb">ds a</span><span class="ff13 ls6">r</span><span class="ls105 ws325">e added</span></div></div><div class="c x13 ydfd w60 h61"><div class="t m0 x128 h14 y38f ff12 fs7 fcb sc0 lse4 ws318">NOT NULL <span class="ff13 ls6 ws0">r<span class="ff12 ls198">equi</span>r</span><span class="ls88 ws2d0">es a colu<span class="ff13 ls119 ws0">mn<span class="ff12 ls6"> </span></span></span></div><div class="t m0 x128 h14 y390 ff12 fs7 fcb sc0 lsdc ws2ac">to be populated with a value.</div></div><div class="c x7b ydfe w61 h56"><div class="t m0 x12e h14 yb49 ff12 fs7 fcb sc0 lsd2 ws0">Co<span class="ff13 ls6">n</span><span class="ls10e">st<span class="ff13 ls6">r</span><span class="lsd5 ws2a6">ucts the colu</span><span class="ff13">mn</span><span class="ls102 ws319"> defi</span><span class="ff13 ls6">n</span><span class="ls100">itio<span class="ff13 ls6">n</span></span>s, </span></div><div class="t m0 x12e h14 yb4a ff12 fs7 fcb sc0 ls105 ws325">with thei<span class="ff13 ls6 ws0">r</span><span class="lsd3 ws3e0"> data types a<span class="_ _0"></span><span class="ff13 ls6 ws0">n<span class="ff12 lsde ws3cf">d co</span>n<span class="ff12 ls119">st</span>r<span class="ff12 lse3">ai</span>n<span class="ff12 lsd2">ts</span></span></span></div></div><div class="c x43 ydff w62 h6e"><div class="t m0 x124 h14 ye00 ff12 fs7 fcb sc0 lsd2 ws0">Co<span class="ff13 ls6">n</span><span class="ls119">st<span class="ff13 ls6">r</span><span class="lsec">ucts</span></span></div><div class="t m0 x128 h14 ye01 ff12 fs7 fcb sc0 lsd2 ws38c"> the full</div><div class="t m0 xb7 h14 ye02 ff12 fs7 fcb sc0 lse1 ws0"> c<span class="ff13 ls6">r</span><span class="lsda ws2aa">eate table</span></div><div class="t m0 xc7 h14 ye03 ff12 fs7 fcb sc0 lsec ws0">state<span class="ff13 ls6">m<span class="ff12">e</span>n</span><span class="lsd2 ws35c">t a</span><span class="ff13 ls6">n<span class="ff12">d</span></span></div><div class="t m0 xf9 h14 ye04 ff12 fs7 fcb sc0 lsff ws38b"> executes it</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
