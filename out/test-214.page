<div id="pfd6" class="pf w0 h0" data-page-no="d6"><div class="pc pcd6 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgd6.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">190</div><div class="t m0 x92 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xd3 h2c y1d0 ffb fs19 fcb sc0 ls158 ws0">HAPTER</div><div class="t m0 xe4 h2b y1cf ffb fs18 fcb sc0 ls1bb ws730"> 10</div><div class="t m0 x2a h2d y80 ffa fs7 fcb sc0 ls6 ws0">Achieving loose coupling</div><div class="t m0 x44 h3b y395 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>ListBookmarksCommand(Command):</div><div class="t m0 xae h3b y396 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>order_by=&apos;date_added&apos;):</div><div class="t m0 x97 h3b y397 ffd fs18 fc3 sc0 lsb2 ws0">self.order_by<span class="_"> </span>=<span class="_"> </span>order_by</div><div class="t m0 xae h3b y483 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>execute(self,<span class="_"> </span>data=None):</div><div class="t m0 x97 h3b y484 ffd fs18 fc3 sc0 ls20c ws0">return<span class="_"> </span>True,<span class="_"> </span>db<span class="_ _e"></span>.select(&apos;bookmarks&apos;,<span class="_"> </span>ord<span class="_ _e"></span>er_by=self.order_by).fetcha<span class="_ _e"></span>ll()</div><div class="t m0 x44 h3b y12f6 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>format_bookmark(bookmark):</div><div class="t m0 xae h3b y12f7 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>&apos;\t&apos;.join(</div><div class="t m0 x97 h3b y173d ffd fs18 fc3 sc0 lsb2 ws0">str(field)<span class="_"> </span>if<span class="_"> </span>field<span class="_"> </span>else<span class="_"> </span>&apos;&apos;</div><div class="t m0 x97 h3b y173e ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>field<span class="_"> </span>in<span class="_"> </span>bookmark</div><div class="t m0 xae h3b y173f ffd fs18 fc3 sc0 ls6 ws0">)</div><div class="t m0 x44 h3b y1740 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Option:</div><div class="t m0 xae h3b y1741 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>name,<span class="_"> </span>command,<span class="_"> </span>prep_call=None,</div><div class="t m0 x44 h51 y1742 ff9 fs15 fc9 sc0 ls6 ws0">âž¥</div><div class="t m0 xc4 h51 y1743 ff9 fs15 fc9 sc0 ls6 ws0"> </div><div class="t m0 x32 h3b y1744 ffd fs18 fc3 sc0 lsb2 ws0">success_message=&apos;{result}&apos;):</div><div class="t m0 x97 h3b y1745 ffd fs18 fc3 sc0 lsb2 ws0">self.name<span class="_"> </span>=<span class="_"> </span>name</div><div class="t m0 x97 h3b y1746 ffd fs18 fc3 sc0 lsb2 ws0">self.command<span class="_"> </span>=<span class="_"> </span>command</div><div class="t m0 x97 h3b y1747 ffd fs18 fc3 sc0 lsb2 ws0">self.prep_call<span class="_"> </span>=<span class="_"> </span>prep_call</div><div class="t m0 x97 h3b y1748 ffd fs18 fc3 sc0 lsb2 ws0">self.success_message<span class="_"> </span>=<span class="_"> </span>success_message</div><div class="t m0 xae h3b y1749 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>choose(self):</div><div class="t m0 x97 h3b y174a ffd fs18 fc3 sc0 lsb2 ws0">data<span class="_"> </span>=<span class="_"> </span>self.prep_call()<span class="_"> </span>if<span class="_"> </span>self.prep_call<span class="_"> </span>else<span class="_"> </span>None</div><div class="t m0 x97 h3b y174b ffd fs18 fc3 sc0 lsb2 ws0">success,<span class="_"> </span>result<span class="_"> </span>=<span class="_"> </span>self.command.execute(data)</div><div class="t m0 x97 h3b y174c ffd fs18 fc3 sc0 lsb2 ws0">formatted_result<span class="_"> </span>=<span class="_"> </span>&apos;&apos;</div><div class="t m0 x97 h3b y174d ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>isinstance(result,<span class="_"> </span>list):</div><div class="t m0 xc3 h3b y174e ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>bookmark<span class="_"> </span>in<span class="_"> </span>result:</div><div class="t m0 x28 h3b y174f ffd fs18 fc3 sc0 lsb2 ws0">formatted_result<span class="_"> </span>+=<span class="_"> </span>&apos;\n&apos;<span class="_"> </span>+<span class="_"> </span>format_bookmark(bookmark)</div><div class="t m0 x97 h3b y1750 ffd fs18 fc3 sc0 lsb2 ws0">else:</div><div class="t m0 xc3 h3b y1751 ffd fs18 fc3 sc0 lsb2 ws0">formatted_result<span class="_"> </span>=<span class="_"> </span>result</div><div class="t m0 x97 h3b y1752 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>success:</div><div class="t m0 xc3 h3b y1753 ffd fs18 fc3 sc0 lsb2 ws0">print(self.success_message.format(result=formatted_result))</div><div class="t m0 xae h3b y6f7 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__str__(self):</div><div class="t m0 x97 h3b y6f8 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>self.name</div><div class="t m0 x44 h3b y6fa ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>loop():</div><div class="t m0 xae h3b y6fb ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 xae h3b y1754 ffd fs18 fc3 sc0 lsb2 ws0">options<span class="_"> </span>=<span class="_"> </span>OrderedDict({</div><div class="t m0 x97 h3b y1755 ffd fs18 fc3 sc0 lsb2 ws0">&apos;A&apos;:<span class="_"> </span>Option(</div><div class="t m0 xc3 h3b y1756 ffd fs18 fc3 sc0 lsb2 ws0">&apos;Add<span class="_"> </span>a<span class="_"> </span>bookmark&apos;,</div><div class="t m0 xc3 h3b y1757 ffd fs18 fc3 sc0 lsb2 ws0">commands.AddBookmarkCommand(),</div><div class="t m0 xc3 h3b y1758 ffd fs18 fc3 sc0 lsb2 ws0">prep_call=get_new_bookmark_data,</div><div class="t m0 xc3 h3b y1759 ffd fs18 fc3 sc0 lsb2 ws0">success_message=&apos;Bookmark<span class="_"> </span>added!&apos;,</div><div class="t m0 x18 h20 y175a ffb fs7 fc4 sc0 ls6 ws0">Using statuses and results in the presentatio<span class="_ _0"></span>n layer<span class="_ _c6"></span>List<span class="_ _0"></span>ing<span class="_"> </span>10.9</div><div class="c xa1 y175b wd6 hfc"><div class="t m0 x12e h14 y175c ff12 fs7 fcb sc0 ls114 ws8d6">The ListBook<span class="ff13 ls6 ws0">m<span class="ff12">a<span class="_ _e"></span></span>r<span class="ff12">ksCo<span class="_ _0"></span><span class="ff13 ls10e">mm<span class="ff12 ls6">a<span class="ff13">n</span><span class="lsec">d </span></span></span></span></span></div><div class="t m0 x12e h14 y175d ff12 fs7 fcb sc0 ls88 ws2d0">succeeds a<span class="ff13 ls6 ws0">n<span class="ff12 lsec">d </span>r<span class="ff12 ls105">etu</span><span class="ls123">rn</span><span class="ff12 ws317">s a list of </span></span></div><div class="t m0 x12e h14 y175e ff12 fs7 fcb sc0 lsd6 ws0">book<span class="ff13 ls6">m<span class="ff12">a</span>r</span><span class="lsda">ks.</span></div></div><div class="c x14f y175f wd7 h156"><div class="t m0 x12a h14 yb46 ff12 fs7 fcb sc0 ls100 ws0">The <span class="_ _0"></span><span class="ff13 ls6">r<span class="ff12 ls105">etu</span><span class="ls103">rn<span class="ff12 lsd6 ws953"> value is a T</span></span>r<span class="ff12 lsdf ws954">ue status</span></span></div><div class="t m0 x127 h14 y1760 ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">n</span><span class="lsd2 ws35c">d the book</span><span class="ff13">m</span>a<span class="ff13">r</span><span class="ls12f ws64e">k list.</span></div></div><div class="c x5e y1761 wd8 h61"><div class="t m0 x12e h14 y111f ff12 fs7 fcb sc0 ls12f ws4b2">The default <span class="ff13 ls6 ws0">m</span><span class="lse4 ws318">essage fo<span class="ff13 ls6 ws0">r<span class="ff12"> </span></span></span></div><div class="t m0 x12e h14 y393 ff12 fs7 fcb sc0 ls6 ws0">co<span class="ff13 ls10e">mm</span>a<span class="ff13">n</span><span class="lsff ws315">ds that </span><span class="ff13">r</span><span class="ls105">etu<span class="ff13 ls123">rn</span><span class="ls122 ws644"> a </span></span></div><div class="t m0 x12e h14 y112a ff13 fs7 fcb sc0 ls6 ws0">r<span class="ff12 lsee ws30e">esult is the </span>r<span class="ff12 lsff ws38b">esult itself.</span></div></div><div class="c x98 y103e wd9 h61"><div class="t m0 x12e h14 y9c3 ff12 fs7 fcb sc0 ls105 ws0">Sto<span class="ff13 ls6">r</span><span class="ws327">es the co</span><span class="ff13 ls6">n</span><span class="ls115">figu<span class="_ _0"></span><span class="ff13 ls6">r<span class="ff12 lsde">ed </span></span></span></div><div class="t m0 x12e h14 y1554 ff12 fs7 fcb sc0 ls12f ws0">success <span class="ff13 ls6">m</span><span class="lsd6 ws3da">essage fo</span><span class="ff13 ls6">r</span><span class="lsff ws38b"> this </span></div><div class="t m0 x12e h14 y12da ff12 fs7 fcb sc0 ls125 ws0">optio<span class="ff13 ls6">n</span><span class="ls103 ws31b"> fo</span><span class="ff13 ls6">r</span><span class="ls105 ws325"> late</span><span class="ff13 ls6">r</span><span class="lsec ws4f0"> use</span></div></div><div class="c x2d y1762 wd9 hfe"><div class="t m0 x12e h14 yd7b ff12 fs7 fcb sc0 lsde ws2ad">Receives the </div><div class="t m0 x12e h14 y1763 ff12 fs7 fcb sc0 ls18d ws691">status a<span class="ff13 ls6 ws0">n<span class="ff12 lsec">d </span>r<span class="ff12 lsfd">esult </span></span></div><div class="t m0 x12e h14 yd7d ff12 fs7 fcb sc0 ls6 ws0">f<span class="ff13">r</span>o<span class="ff13">m</span><span class="lsd2 ws35c"> the executed </span></div><div class="t m0 x12e h14 yd7e ff12 fs7 fcb sc0 ls6 ws0">co<span class="ff13 ls10e">mm</span>a<span class="ff13">n</span>d</div></div><div class="c x42 y1764 wd2 h157"><div class="t m0 xf4 h14 y1765 ff12 fs7 fcb sc0 lse3 ws0">Fo<span class="ff13 ls103">rm</span><span class="ls122">ats</span></div><div class="t m0 x118 h14 y1766 ff12 fs7 fcb sc0 ls105 ws0">the <span class="ff13 ls6">r</span><span class="lsee">esult</span></div><div class="t m0 xc7 h14 y15ce ff12 fs7 fcb sc0 ls103 ws0">fo<span class="ff13 ls6">r</span><span class="lsee ws30e"> display</span></div><div class="t m0 xf3 h14 yc90 ff12 fs7 fcb sc0 ls123 ws0">if <span class="ff13 ls6">n</span><span class="lsff">eeded</span></div></div><div class="c x74 y1767 wda h158"><div class="t m0 xe0 h14 y1768 ff12 fs7 fcb sc0 ls6 ws0">P<span class="ff13">r</span>i<span class="ff13">n</span><span class="ls105 ws325">ts the success </span><span class="ff13">m</span><span class="lsd5 ws2a6">essage, i</span><span class="ff13">n</span><span class="ls119">se</span><span class="ff13">r</span><span class="lsd2">ti</span><span class="ff13">n</span>g</div><div class="t m0 x12f h14 y1769 ff12 fs7 fcb sc0 lsd4 ws4ee">the fo<span class="ff13 ls123 ws0">rm<span class="ff12 lsd6">atted </span><span class="ls6">r</span></span><span class="ls102 ws319">esult if <span class="ff13 ls6 ws0">n<span class="ff12 ls117">eeded</span></span></span></div></div><div class="c x98 y176a wd9 h61"><div class="t m0 x12e h14 y112b ff12 fs7 fcb sc0 ls125 ws0">Optio<span class="ff13 ls6">n</span><span class="ls13c ws46f">s without a </span><span class="ff13 ls6">r</span><span class="ls10a">esult </span></div><div class="t m0 x12e h14 y176b ff12 fs7 fcb sc0 ls6 ws0">ca<span class="ff13">n</span><span class="lse4 ws45a"> specify a static </span></div><div class="t m0 x12e h14 y176c ff12 fs7 fcb sc0 ls12f ws0">success <span class="ff13 ls6">m</span><span class="ls88">essage.</span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
