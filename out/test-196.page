<div id="pfc4" class="pf w0 h0" data-page-no="c4"><div class="pc pcc4 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgc4.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">172</div><div class="t m0 xb9 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xd3 h2c y1d0 ffb fs19 fcb sc0 lsf6 ws0">HAPTER</div><div class="t m0 xd9 h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 9</div><div class="t m0 x1f h2d y80 ffa fs7 fcb sc0 ls6 ws0">Keeping things lightweight</div><div class="t m0 x86 h29 y33a ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x87 h15 y40 ff4 fsb fc3 sc0 ls71 ws243">It’s good practice to set <span class="ls44 ws8e5">all necessary attributes to some initial value directly</span></div><div class="t m0 x87 h15 y41 ff4 fsb fc3 sc0 ls4b ws0">inside </div><div class="t m5 x1c h24 y532 ffd fsc fc3 sc0 lsa0 ws0">__init__</div><div class="t m0 xf2 h15 y41 ff4 fsb fc3 sc0 ls8d ws1f9">, but </div><div class="t m5 x116 h24 y532 ffd fsc fc3 sc0 lsa0 ws0">display_title</div><div class="t m0 xf h15 y41 ff4 fsb fc3 sc0 lsc5 ws3ab"> is set in a differen<span class="_ _0"></span>t method.</div><div class="t m0 x44 h15 y6c7 ff4 fsb fc3 sc0 ls3d ws710">You could fix the latter b<span class="_ _e"></span>y setting </div><div class="t m5 x12d h24 y1556 ffd fsc fc3 sc0 lsa0 ws0">display_title</div><div class="t m0 x75 h15 y6c7 ff4 fsb fc3 sc0 ls70 ws8e6"> to </div><div class="t m5 x3e h24 y1556 ffd fsc fc3 sc0 lsa0 ws0">&apos;Untitled&apos;</div><div class="t m0 x70 h15 y6c7 ff4 fsb fc3 sc0 ls1f ws543"> by default, but this</div><div class="t m0 x44 h15 yb6f ff4 fsb fc3 sc0 ls2d ws7be">can be misleading. A reader might conclude<span class="ls30 ws8e7"> the display title is typically (or even</span></div><div class="t m0 x44 h15 yae0 ff3 fsb fc3 sc0 ls30 ws0">always<span class="ff4 ls15f">) </span></div><div class="t m5 x4 h24 yae1 ffd fsc fc3 sc0 lsa0 ws0">&apos;Untitled&apos;</div><div class="t m0 x143 h15 yae0 ff4 fsb fc3 sc0 ls2f ws23">, if they don’t read carefully.</div><div class="t m0 x32 h15 y3f2 ff4 fsb fc3 sc0 ls20 ws548"> There is one approach that can give yo<span class="ls42 ws1f7">u the readability bene<span class="_ _e"></span><span class="ls5e ws8e8">fit of extracting a</span></span></div><div class="t m0 x44 h15 y117a ff4 fsb fc3 sc0 ls38 ws9e">method, without suffering these drawbacks. It <span class="ls3d ws1ac">involves creating a function that returns</span></div><div class="t m0 x44 h15 y39a ff4 fsb fc3 sc0 ls42 ws26e">the value for </div><div class="t m5 x1c h24 y1557 ffd fsc fc3 sc0 lsa0 ws0">display_titl<span class="_ _e"></span>e</div><div class="t m0 x24 h15 y39a ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x32 h15 yb2f ff4 fsb fc3 sc0 ls7d ws12a"> But wait! If you think <span class="_ _e"></span>about how you use </div><div class="t m5 x2b h24 yb30 ffd fsc fc3 sc0 lsa0 ws0">Book</div><div class="t m0 xeb h15 yb2f ff4 fsb fc3 sc0 ls3b ws70">, it might be something <span class="_ _e"></span>like this:</div><div class="t m0 x44 h3b y514 ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x44 h3b y1558 ffd fs18 fc3 sc0 lsb2 ws0">book<span class="_"> </span>=<span class="_"> </span>Book(data)</div><div class="t m0 x44 h3b y1559 ffd fs18 fc1 sc0 lsb2 ws0">return<span class="_"> </span>book.display_title</div><div class="t m0 x44 h15 y48b ff4 fsb fc3 sc0 ls3a ws254">How can you make the </div><div class="t m5 x16 h24 y48c ffd fsc fc3 sc0 lsa0 ws0">display_tit<span class="_ _e"></span>le</div><div class="t m0 x22 h15 y48b ff4 fsb fc3 sc0 ls71 ws263"> logic a function without having to update the</div><div class="t m0 x44 h15 y48d ff4 fsb fc3 sc0 ls34 wsbb">second line to return </div><div class="t m5 xd6 h24 y155a ffd fsc fc3 sc0 lsa0 ws0">book.display_t<span class="_ _e"></span>itle()</div><div class="t m0 x89 h15 y48d ff4 fsb fc3 sc0 ls42 ws2f3"> instead? Fortunately, Python provides a</div><div class="t m0 x44 h15 y48e ff4 fsb fc3 sc0 lsc5 ws2fd">tool for thi<span class="_ _0"></span>s occasion. The </div><div class="t m5 xe7 h24 y155b ffd fsc fc3 sc0 lsa0 ws0">@property</div><div class="t m0 x85 h15 y48e ff4 fsb fc3 sc0 ls42 ws1ba"> decorator can be used to signify that a method</div><div class="t m0 x44 h15 y48f ff4 fsb fc3 sc0 ls42 ws28">on a class should be a<span class="ls2f ws23">ccessible as an attribute.</span></div><div class="t m0 x32 h15 y490 ff4 fsb fc3 sc0 ls4e ws563"> Create a </div><div class="t m5 x15 h24 y155c ffd fsc fc3 sc0 lsa0 ws0">display_title</div><div class="t m0 xb6 h15 y490 ff4 fsb fc3 sc0 ls6 ws0"> <span class="ff3 ls36">method</span><span class="ls8d ws714"> now, decorated with </span></div><div class="t m5 x6e h24 y155c ffd fsc fc3 sc0 lsa0 ws0">@property</div><div class="t m0 x14e h15 y490 ff4 fsb fc3 sc0 ls20 ws134">, that uses the exist-</div><div class="t m0 x44 h15 y491 ff4 fsb fc3 sc0 ls71 ws263">ing logic to return the proper display titl<span class="ls30 ws167">e. Compare your changes with the following</span></div><div class="t m0 x44 h15 yc6 ff4 fsb fc3 sc0 ls1f ws14">listing when you’re done.</div><div class="t m0 x32 h49 y25d ffb fs17 fc2 sc0 lsf7 ws0">NOTE</div><div class="t m0 xef h15 y25e ff4 fsb fc3 sc0 ls34 ws2c6">Methods can be used as properties only if </div><div class="t m5 x55 h24 y10f5 ffd fsc fc3 sc0 lsa0 ws0">self</div><div class="t m0 x60 h15 y25e ff4 fsb fc3 sc0 ls3e ws6bd"> is their only argument,</div><div class="t m0 x32 h15 y13b ff4 fsb fc3 sc0 ls3a ws28">because when you access the attribute,<span class="ls2f ws23"> you can’t pass any arguments to it.</span></div><div class="t m0 x44 h3b y155d ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Book:</div><div class="t m0 xae h3b y155e ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>data):</div><div class="t m0 x97 h3b y155f ffd fs18 fc3 sc0 lsb2 ws0">self.title<span class="_"> </span>=<span class="_"> </span>data[&apos;title&apos;]</div><div class="t m0 x97 h3b y1560 ffd fs18 fc3 sc0 lsb2 ws0">self.subtitle<span class="_"> </span>=<span class="_"> </span>data[&apos;subtitle&apos;]</div><div class="t m0 xae h3b y1561 ffd fs18 fc3 sc0 lsb2 ws0">@property</div><div class="t m0 xae h3b y1562 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>display_title(self):</div><div class="t m0 x97 h3b y1563 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>self.title<span class="_"> </span>and<span class="_"> </span>self.subtitle:</div><div class="t m0 xc3 h3b y1564 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>f&apos;{self.title}:<span class="_"> </span>{self.subtitle}&apos;</div><div class="t m0 x97 h3b y1565 ffd fs18 fc3 sc0 lsb2 ws0">elif<span class="_"> </span>self.title:</div><div class="t m0 xc3 h3b y1566 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>self.title</div><div class="t m0 x97 h3b y91f ffd fs18 fc3 sc0 lsb2 ws0">else:</div><div class="t m0 xc3 h3b y1567 ffd fs18 fc1 sc0 lsb2 ws0">return<span class="_"> </span>&apos;Untitled&apos;</div><div class="t m0 x44 h15 y1568 ff4 fsb fc3 sc0 ls5f ws0">Using </div><div class="t m5 x87 h24 y1569 ffd fsc fc3 sc0 lsa0 ws0">@property</div><div class="t m0 xad h15 y1568 ff4 fsb fc3 sc0 ls38 ws24a">, you can still reference </div><div class="t m5 xa1 h24 y1569 ffd fsc fc3 sc0 lsa0 ws0">book.display_<span class="_ _e"></span>title</div><div class="t m0 x58 h15 y1568 ff4 fsb fc3 sc0 ls3a ws1c6"> as an attribute, but all</div><div class="t m0 x44 h15 y156a ff4 fsb fc3 sc0 ls2f wse2">its complexity is abstracted <span class="lsc5 ws8e9">into its own fu<span class="_ _0"></span>nction. This re<span class="_ _0"></span>duces the co<span class="_ _0"></span>mplexity of t<span class="_ _0"></span>he</span></div><div class="t m5 x44 h24 y156b ffd fsc fc3 sc0 lsa0 ws0">__init__</div><div class="t m0 xef h15 y156c ff4 fsb fc3 sc0 ls34 wsbb"> method, making it more readable at <span class="ls2d wsbc">the same time. I make frequent use of</span></div><div class="t m5 x44 h24 y156d ffd fsc fc3 sc0 lsa0 ws0">@property</div><div class="t m0 x132 h15 y156e ff4 fsb fc3 sc0 ls4b ws204"> in my own cod<span class="_ _e"></span>e.</div><div class="t m0 x37 h20 y156f ffb fs7 fc4 sc0 ls6 ws0">Using<span class="_ _4e"></span>Listing<span class="_"> </span>9.8</div><div class="t m0 x67 h62 y1570 ff16 fs21 fc4 sc0 ls128 ws0">@property</div><div class="t m0 x59 h20 y156f ffb fs7 fc4 sc0 ls6 ws0"> to simplify class construction</div><div class="c x5d y1571 w28 h56"><div class="t m0 x12e h14 y68d ff12 fs7 fcb sc0 lsd2 ws38c">A p<span class="ff13 ls6 ws0">r<span class="ff12 ls127">ope</span>r</span><span class="ls198 ws4f7">ty is a fu<span class="ff13 ls6 ws0">n<span class="ff12 ls118">ctio</span>n</span><span class="ls102 ws3cd"> that ca<span class="ff13 ls6 ws0">n<span class="ff12"> </span></span></span></span></div><div class="t m0 x12e h14 y68e ff12 fs7 fcb sc0 lsde ws0">be <span class="ff13 ls6">r</span><span class="lsf2">efe<span class="ff13 ls6">r<span class="ff12">e</span>n</span><span class="ls105 ws327">ced as a</span><span class="ff13 ls6">n</span><span class="ls122 ws644"> at<span class="_ _0"></span>t<span class="ff13 ls6 ws0">r<span class="ff12 lsd9">ibute.</span></span></span></span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
