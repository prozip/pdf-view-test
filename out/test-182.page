<div id="pfb6" class="pf w0 h0" data-page-no="b6"><div class="pc pcb6 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgb6.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">158</div><div class="t m0 x17 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xa7 h2c y1d0 ffb fs19 fcb sc0 lsf6 ws0">HAPTER</div><div class="t m0 xba h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 8</div><div class="t m0 xe7 h2d y80 ffa fs7 fcb sc0 ls6 ws0">The rules (and exceptions) of inheritance</div><div class="t m0 x44 h15 y40 ff4 fsb fc3 sc0 ls38 ws26">You can call this base class </div><div class="t m5 xe7 h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">Command</div><div class="t m0 x12d h15 y40 ff4 fsb fc3 sc0 ls51 ws47">, and it should define the </div><div class="t m5 xa6 h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x146 h15 y40 ff4 fsb fc3 sc0 ls2f ws26a"> method as an</div><div class="t m5 x44 h24 y532 ffd fsc fc3 sc0 lsa0 ws0">abstractmetho<span class="_ _e"></span>d</div><div class="t m0 x17 h15 y41 ff4 fsb fc3 sc0 ls3d ws7a5"> that raises </div><div class="t m5 x68 h24 y532 ffd fsc fc3 sc0 lsa0 ws0">NotImplemente<span class="_ _e"></span>dError</div><div class="t m0 x55 h15 y41 ff4 fsb fc3 sc0 ls7d ws889"> by default. Each of the existing</div><div class="t m0 x44 h15 y533 ff4 fsb fc3 sc0 ls71 wsd4">command classes should<span class="ls48 ws39"> then inherit from </span></div><div class="t m5 x80 h24 y66f ffd fsc fc3 sc0 lsa0 ws0">Command</div><div class="t m0 x55 h15 y533 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x32 h15 y43 ff4 fsb fc3 sc0 ls1c ws88a"> Note that the existing co<span class="ls38 ws88b">mmand classes all implement </span></div><div class="t m5 x147 h24 y71c ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x115 h15 y43 ff4 fsb fc3 sc0 ls51 ws88c"> already, so they’re</div><div class="t m0 x44 h15 y44 ff4 fsb fc3 sc0 ls5e ws88d">covered on that front. But there are a few different signatures fo<span class="_ _e"></span>r the </div><div class="t m5 x9e h24 y9b8 ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x44 h15 y45 ff4 fsb fc3 sc0 ls2d ws4ff">method, which you learned isn’t good for subs<span class="ls71 ws88e">titutability or when dealing with abstract</span></div><div class="t m0 x44 h15 y46 ff4 fsb fc3 sc0 ls38 ws88f">base classes. Some are called with a </div><div class="t m5 x12d h24 y9ba ffd fsc fc3 sc0 lsa0 ws0">data</div><div class="t m0 x6b h15 y46 ff4 fsb fc3 sc0 ls71 ws88e"> argument, whereas othe<span class="ls1b ws890">rs take no argu<span class="_ _e"></span>ments.</span></div><div class="t m0 x44 h15 ye3 ff4 fsb fc3 sc0 ls25 ws605">Think about how you could normalize the me<span class="ls2d ws344">thods so they have the same signature.</span></div><div class="t m0 x44 h15 y48 ff4 fsb fc3 sc0 ls72 ws29c">Which o<span class="_ _e"></span>f the following w<span class="_ _e"></span>ould work?</div><div class="t m0 xbc h3d y13a3 ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x87 h15 yb6 ff4 fsb fc3 sc0 ls44 ws34">Remove the </div><div class="t m5 x7e h24 y13a4 ffd fsc fc3 sc0 lsa0 ws0">data</div><div class="t m0 xba h15 yb6 ff4 fsb fc3 sc0 lsac ws439"> argument from the<span class="_ _0"></span> </div><div class="t m5 x7b h24 y13a4 ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x53 h15 yb6 ff4 fsb fc3 sc0 ls38 ws26"> methods that accept it.</div><div class="t m0 xbc h3d y13a5 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x87 h15 yeb5 ff4 fsb fc3 sc0 ls25 ws0">Add </div><div class="t m5 xaf h24 yeb4 ffd fsc fc3 sc0 lsa0 ws0">data</div><div class="t m0 x1d h15 yeb5 ff4 fsb fc3 sc0 ls2d ws4d2"> as an optional keyword argument to the </div><div class="t m5 x4a h24 yeb4 ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x6 h15 yeb5 ff4 fsb fc3 sc0 ls34 ws1c5"> methods that</div><div class="t m0 x87 h15 yeb6 ff4 fsb fc3 sc0 ls42 ws32">don’t already accept it.</div><div class="t m0 xbc h3d y13a6 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x87 h15 y5c0 ff4 fsb fc3 sc0 ls3a ws23f">Make all </div><div class="t m5 x38 h24 y13a7 ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 xa8 h15 y5c0 ff4 fsb fc3 sc0 ls71 ws98"> methods accept a va<span class="ls3e ws891">riable number of po<span class="ls34 ws9f">sitional arguments</span></span></div><div class="t m0 x87 h15 y5c1 ff4 fsb fc3 sc0 ls6 ws0">(</div><div class="t m5 x140 h24 y13a8 ffd fsc fc3 sc0 lsa0 ws0">*args</div><div class="t m0 xc3 h15 y5c1 ff4 fsb fc3 sc0 ls79 ws0">).</div><div class="t m0 x44 h15 y698 ff4 fsb fc3 sc0 ls35 ws892">Removing the </div><div class="t m5 x37 h24 y13a9 ffd fsc fc3 sc0 lsa0 ws0">data</div><div class="t m0 x3a h15 y698 ff4 fsb fc3 sc0 ls71 ws1cc"> argument (option 1) would stop yo<span class="ls62 ws390">u from being able <span class="_ _e"></span>to act on the</span></div><div class="t m0 x44 h15 y34a ff4 fsb fc3 sc0 ls80 ws893">data inside the comm<span class="_ _e"></span>ands, which would remo<span class="ls42 ws3af">ve <span class="_ _e"></span>a fair amount of functionality from</span></div><div class="t m0 x44 h15 y34b ff4 fsb fc3 sc0 ls42 ws8c">Bark. Although option 3 would work, it’s ofte<span class="ls30 ws37d">n best to be explicit ab<span class="_ _e"></span>out the arguments</span></div><div class="t m0 x44 h15 y276 ff4 fsb fc3 sc0 ls2f ws5db">you accept until you need flexibility to ha<span class="ls2d">ndle widely differing </span>numbers of arguments.</div><div class="t m0 x44 h15 y3fd ff4 fsb fc3 sc0 ls2f ws3e9">Right now, </div><div class="t m5 xaf h24 y3fc ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 xf2 h15 y3fd ff4 fsb fc3 sc0 ls3a ws19f"> always needs one or zero argume<span class="ls31 ws3f9">nts, so I’d choose to go the</span></div><div class="t m0 x44 h15 y3ff ff4 fsb fc3 sc0 ls80 wsff">route of adding </div><div class="t m5 x1d h24 y400 ffd fsc fc3 sc0 lsa0 ws0">data</div><div class="t m0 x8e h15 y3ff ff4 fsb fc3 sc0 ls3a ws1e0"> as an argument to each of them (option 2).</div><div class="t m0 x32 h15 y699 ff4 fsb fc3 sc0 ls3d ws377"> Try creating the </div><div class="t m5 x67 h24 y13aa ffd fsc fc3 sc0 lsa0 ws0">Command</div><div class="t m0 x13d h15 y699 ff4 fsb fc3 sc0 ls34 ws323"> abstract base class and inheriting from it for your com-</div><div class="t m0 x44 h15 y69a ff4 fsb fc3 sc0 ls2d ws3f2">mands. As you go along, try renaming </div><div class="t m5 x13 h24 y740 ffd fsc fc3 sc0 lsa0 ws0">execute()</div><div class="t m0 x113 h15 y69a ff4 fsb fc3 sc0 ls2f ws303"> methods temporar<span class="lsae ws894">ily or changing</span></div><div class="t m0 x44 h15 y1fd ff4 fsb fc3 sc0 ls34 ws203">their signatures to see how your IDE (or Ba<span class="ls1c ws21d">rk) reacts to the broken interface. Come</span></div><div class="t m0 x44 h15 y41d ff4 fsb fc3 sc0 ls3a ws1e0">back to the following listing to see how you did.</div><div class="t m0 x44 h3b yec4 ffd fs18 fc3 sc0 lsb2 ws0">from<span class="_"> </span>abc<span class="_"> </span>import<span class="_"> </span>ABC,<span class="_"> </span>abstractmethod</div><div class="t m0 x44 h3b y13ab ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Command(ABC):</div><div class="t m0 xae h3b y13ac ffd fs18 fc3 sc0 lsb2 ws0">@abstractmethod</div><div class="t m0 xae h3b y13ad ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>execute(self,<span class="_"> </span>data):</div><div class="t m0 x44 h3b y13ae ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>CreateBookmarksTableCommand(Command):</div><div class="t m0 xae h3b y13af ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>execute(self,<span class="_"> </span>data=None):</div><div class="t m0 x97 h3b y6fc ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x44 h3b y13b0 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>AddBookmarkCommand(Command):</div><div class="t m0 xae h3b y13b1 ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x32 h20 y13b2 ffb fs7 fc4 sc0 ls6 ws0">Listing<span class="_"> </span>8.5<span class="_ _55"> </span>An abstract base class for the command patte<span class="_ _0"></span>rn</div><div class="c x3f y13b3 w9f hf1"><div class="t m0 x134 h14 y13b4 ff12 fs7 fcb sc0 ls6 ws0">I<span class="ff13">m</span><span class="lsec">po</span><span class="ff13">r</span><span class="lse0 ws389">ts the tools </span><span class="ff13">n</span><span class="lsd6 ws3da">eeded f</span><span class="ff13">r</span>o<span class="ff13">m</span><span class="ls17f ws645"> abc</span></div></div><div class="c x7e y13b5 w63 h56"><div class="t m0 x12e h14 y65c ff12 fs7 fcb sc0 ls145 ws0">Defi<span class="ff13 ls6">n</span><span class="lsd2 ws38c">es the Co</span><span class="ff13 ls10e">mm</span><span class="ls6">a<span class="ff13">n</span><span class="lsec">d </span></span></div><div class="t m0 x12e h14 y65d ff12 fs7 fcb sc0 lsd9 ws2ce">base class</div></div><div class="c x116 y13b6 wa8 h56"><div class="t m0 x42 h14 y31a ff12 fs7 fcb sc0 lsef ws0">Defi<span class="ff13 ls6">n</span><span class="lsd6 ws2a7">es execute as a</span><span class="ff13 ls6">n</span><span class="ls17f ws645"> abst</span><span class="ff13 ls6">r</span><span class="ls88">act </span></div><div class="t m0 x42 h14 yc28 ff13 fs7 fcb sc0 ls6 ws0">m<span class="ff12 lsdc ws2ac">ethod that accepts a data a</span>r<span class="ff12 lsdd">gu</span>m<span class="ff12">e</span>n<span class="ff12">t</span></div></div><div class="c x144 y13b7 w9f hf1"><div class="t m0 x134 h14 y13b8 ff12 fs7 fcb sc0 ls88 ws314">Each co<span class="ff13 ls10e ws0">mm<span class="ff12 ls6">a<span class="ff13">n</span><span class="lsec ws4f0">d i</span><span class="ff13">n</span><span class="ls16d">he</span><span class="ff13">r</span><span class="ls124 ws5a5">its f</span><span class="ff13">r</span>o<span class="ff13">m</span><span class="ls146 ws4b3"> Co</span></span>mm<span class="ff12 ls6">a<span class="_ _e"></span><span class="ff13">n</span><span class="lsec">d.</span></span></span></div></div><div class="c x59 y13b9 wa9 h11d"><div class="t m0 x42 h14 y13ba ff12 fs7 fcb sc0 lsdc ws3df">Adds the data a<span class="ff13 ls6 ws0">r<span class="ff12 lse1">gu</span>m<span class="ff12">e</span>n</span><span class="lsed ws5bd">t (No<span class="ff13 ls6 ws0">n<span class="ff12 ws317">e by </span></span></span></div><div class="t m0 x42 h14 y13bb ff12 fs7 fcb sc0 ls6 ws317">default, so calle<span class="ff13 ws0">r</span><span class="lsd9 ws2ce">s ca</span><span class="ff13 ws0">n<span class="ff12 lsdd"> o</span>m</span><span class="ls100 ws316">it it)</span></div></div><div class="c x47 y13bc waa h56"><div class="t m0 x42 h14 y31a ff12 fs7 fcb sc0 lsd2 ws0">Co<span class="ff13 ls119">mm</span><span class="ls6">a<span class="ff13">n</span><span class="ls181 ws5be">ds that al</span><span class="ff13">r</span><span class="ws317">eady accept a data </span></span></div><div class="t m0 x42 h14 y13bd ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">r</span><span class="lse1">gu</span><span class="ff13">m</span>e<span class="ff13">n</span><span class="lsd2">t </span><span class="ff13">n</span><span class="ls125 ws70c">eed o</span><span class="ff13">n</span><span class="lsdf ws4c9">ly i</span><span class="ff13">n</span><span class="lsd3">he<span class="_ _0"></span><span class="ff13 ls6">r<span class="ff12 ls170 ws749">it f</span>r<span class="ff12">o</span>m<span class="ff12 ls146 ws4b3"> Co</span><span class="ls10e">mm</span><span class="ff12">a</span>n<span class="ff12 lsec">d.</span></span></span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
