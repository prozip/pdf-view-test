<div id="pfc7" class="pf w0 h0" data-page-no="c7"><div class="pc pcc7 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgc7.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">175<span class="_ _f5"></span><span class="ffa">Decomposing classes</span></div><div class="t m0 x35 h15 y40 ff4 fsb fc3 sc0 ls2f ws109">methods in a class share a common prefix or<span class="ls3d ws97"> suffix, especially one that doesn’t match</span></div><div class="t m0 x35 h15 y41 ff4 fsb fc3 sc0 ls3d ws7a5">the name of the class, t<span class="_ _e"></span>here might be a <span class="ls6c ws8f0">new class waiti<span class="_ _0"></span>ng to be extracted. He<span class="_ _0"></span>re,</span></div><div class="t m5 x35 h24 y66f ffd fsc fc3 sc0 lsa0 ws0">author_</div><div class="t m0 xd8 h15 y533 ff4 fsb fc3 sc0 ls20 ws1e6"> is a sign that an </div><div class="t m5 x116 h24 y66f ffd fsc fc3 sc0 lsa0 ws0">Author</div><div class="t m0 xca h15 y533 ff4 fsb fc3 sc0 ls71 ws2b4"> class might make sense. It’s time to try your hand at</div><div class="t m0 x35 h15 y43 ff4 fsb fc3 sc0 ls38 ws26">extracting a class.</div><div class="t m0 x83 h15 y44 ff4 fsb fc3 sc0 ls1c ws1c4"> Create an </div><div class="t m5 x1d h24 y9b8 ffd fsc fc3 sc0 lsa0 ws0">Author</div><div class="t m0 x92 h15 y44 ff4 fsb fc3 sc0 ls1c ws1c4"> class (either in the same modu<span class="ls78 ws8f1">le<span class="_ _e"></span> or imported from a n<span class="_ _e"></span>ew mod-</span></div><div class="t m0 x35 h15 y45 ff4 fsb fc3 sc0 ls30 ws10b">ule). This </div><div class="t m5 x1c h24 y9b9 ffd fsc fc3 sc0 lsa0 ws0">Author</div><div class="t m0 x114 h15 y45 ff4 fsb fc3 sc0 ls42 ws105"> class should contain all the same<span class="ls30 ws10b"> information as befo<span class="_ _e"></span>re, but in a</span></div><div class="t m0 x35 h15 y46 ff4 fsb fc3 sc0 ls2f ws26a">more structured manne<span class="ls34 ws22">r. The class should</span></div><div class="t m0 x8b h29 y15b5 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x48 h15 y146 ff4 fsb fc3 sc0 ls3a ws0">Accept </div><div class="t m5 x1d h24 yb2d ffd fsc fc3 sc0 lsa0 ws0">author_data</div><div class="t m0 x68 h15 y146 ff4 fsb fc3 sc0 ls34 ws899"> as a dictionary in </div><div class="t m5 xeb h24 yb2d ffd fsc fc3 sc0 lsa0 ws0">__init__</div><div class="t m0 x14a h15 y146 ff4 fsb fc3 sc0 ls42 ws8f2">, storing each relevant value</div><div class="t m0 x48 h15 y24e ff4 fsb fc3 sc0 ls71 wsd4">(first name, last name, and so on) fr<span class="ws1e0">om the dictionary as an attribute</span></div><div class="t m0 x8b h29 y15b6 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x48 h15 y89 ff4 fsb fc3 sc0 ls3d ws50f">Have two properties, </div><div class="t m5 x69 h24 yeb3 ffd fsc fc3 sc0 lsa0 ws0">for_display</div><div class="t m0 xf h15 y89 ff4 fsb fc3 sc0 ls4e ws2fe"> and </div><div class="t m5 x2e h24 yeb3 ffd fsc fc3 sc0 lsa0 ws0">for_citation</div><div class="t m0 x14f h15 y89 ff4 fsb fc3 sc0 ls9e ws8f3">, that return the proper<span class="_ _0"></span>ly</div><div class="t m0 x48 h15 yeb5 ff4 fsb fc3 sc0 ls38 ws26">formatted author string</div><div class="t m0 x35 h15 yee3 ff4 fsb fc3 sc0 ls34 ws9f">Remember that you also want </div><div class="t m5 x59 h24 y15b7 ffd fsc fc3 sc0 lsa0 ws0">Book</div><div class="t m0 x94 h15 y253 ff4 fsb fc3 sc0 ls30 ws36"> to keep working for users, so <span class="_ _e"></span>you want to keep the</div><div class="t m0 x35 h15 y8e ff4 fsb fc3 sc0 ls34 ws0">existing </div><div class="t m5 x3d h24 y15b8 ffd fsc fc3 sc0 lsa0 ws0">author_data</div><div class="t m0 xba h15 y8e ff4 fsb fc3 sc0 ls78 ws0">, </div><div class="t m5 xbe h24 y15b8 ffd fsc fc3 sc0 lsa0 ws0">author_for_<span class="_ _e"></span>display</div><div class="t m0 x10e h15 y8e ff4 fsb fc3 sc0 ls79 ws626">, and </div><div class="t m5 x55 h24 y15b8 ffd fsc fc3 sc0 lsa0 ws0">author_for_<span class="_ _e"></span>citation</div><div class="t m0 x150 h15 y8e ff4 fsb fc3 sc0 ls30 ws167"> behaviors on</div><div class="t m5 x35 h24 y15b9 ffd fsc fc3 sc0 lsa0 ws0">Book</div><div class="t m0 x82 h15 y347 ff4 fsb fc3 sc0 ls1e ws6b5"> for now. By initializing an </div><div class="t m5 x12d h24 y15b9 ffd fsc fc3 sc0 lsa0 ws0">Author</div><div class="t m0 x65 h15 y347 ff4 fsb fc3 sc0 ls2c ws89e"> instance with </div><div class="t m5 x139 h24 y15b9 ffd fsc fc3 sc0 lsa0 ws0">author_data</div><div class="t m0 x62 h15 y347 ff4 fsb fc3 sc0 ls30 ws10b">, you can <span class="ff3 ls38 ws0">forward</span></div><div class="t m0 x35 h15 y348 ff4 fsb fc3 sc0 ls9e ws8f4">calls from </div><div class="t m5 x1c h24 y6ed ffd fsc fc3 sc0 lsa0 ws0">Book.author<span class="_ _e"></span>_for_display</div><div class="t m0 x13 h15 y348 ff4 fsb fc3 sc0 ls70 ws8f5"> to </div><div class="t m5 x7b h24 y6ed ffd fsc fc3 sc0 lsa0 ws0">Author.for_<span class="_ _e"></span>display</div><div class="t m0 xdd h15 y348 ff4 fsb fc3 sc0 ls3d ws40f">, and so on. This way,</div><div class="t m5 x35 h24 y15ba ffd fsc fc3 sc0 lsa0 ws0">Book</div><div class="t m0 x82 h15 yee4 ff4 fsb fc3 sc0 ls66 ws22f"> will let </div><div class="t m5 x37 h24 y15ba ffd fsc fc3 sc0 lsa0 ws0">Author</div><div class="t m0 xb1 h15 yee4 ff4 fsb fc3 sc0 ls48 ws432"> do most of the work, keeping on<span class="ls2f ws109">ly a temporary system in place to</span></div><div class="t m0 x35 h15 y274 ff4 fsb fc3 sc0 ls217 ws14a">make<span class="_ _e"></span> sure ca<span class="_ _e"></span>lls keep<span class="_ _e"></span> working<span class="_ _e"></span>. Give it<span class="_ _e"></span> a try now<span class="_ _e"></span>, and com<span class="_ _e"></span>e back t<span class="_ _e"></span>o the fol<span class="_ _e"></span>lowing<span class="_ _e"></span> listing</div><div class="t m0 x35 h15 yee7 ff4 fsb fc3 sc0 ls36 ws6a">to see how you did.</div><div class="t m0 x35 h3b y15bb ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Author:</div><div class="t m0 x87 h3b y15bc ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>author_data):</div><div class="t m0 x36 h3b y15bd ffd fs18 fc3 sc0 lsb2 ws0">self.first_name<span class="_"> </span>=<span class="_"> </span>author_data[&apos;first_name&apos;]</div><div class="t m0 x36 h3b y15be ffd fs18 fc3 sc0 lsb2 ws0">self.last_name<span class="_"> </span>=<span class="_"> </span>author_data[&apos;last_name&apos;]</div><div class="t m0 x87 h3b y15bf ffd fs18 fc3 sc0 lsb2 ws0">@property</div><div class="t m0 x87 h3b y15c0 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>for_display(self):</div><div class="t m0 x36 h3b y15c1 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>f&apos;{self.first_name}<span class="_"> </span>{self.last_name}&apos;</div><div class="t m0 x87 h3b y15c2 ffd fs18 fc3 sc0 lsb2 ws0">@property</div><div class="t m0 x87 h3b y15c3 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>for_citation(self):</div><div class="t m0 x36 h3b y15c4 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>f&apos;{self.last_name},<span class="_"> </span>{self.first_name[0]}.&apos;</div><div class="t m0 x35 h3b y15c5 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Book:</div><div class="t m0 x87 h3b y15c6 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>data):</div><div class="t m0 x36 h3b y15c7 ffd fs18 fc3 sc0 lsb2 ws0">#<span class="_"> </span>...</div><div class="t m0 x36 h3b y91f ffd fs18 fc3 sc0 lsb2 ws0">self.author_data<span class="_"> </span>=<span class="_"> </span>data[&apos;author&apos;]</div><div class="t m0 x36 h3b y1567 ffd fs18 fc3 sc0 lsb2 ws0">self.author<span class="_"> </span>=<span class="_"> </span>Author(self.author_data)</div><div class="t m0 x87 h3b y15c8 ffd fs18 fc3 sc0 lsb2 ws0">@property</div><div class="t m0 x87 h3b y15c9 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>author_for_display(self):</div><div class="t m0 x36 h3b y15ca ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>self.author.for_display</div><div class="t m0 x83 h20 y15cb ffb fs7 fc4 sc0 ls6 ws0">Listing<span class="_"> </span>9.10<span class="_ _55"> </span>Extracting an </div><div class="t m0 x47 h62 y15cc ff16 fs21 fc4 sc0 ls128 ws0">Author</div><div class="t m0 x121 h20 y15cb ffb fs7 fc4 sc0 ls6 ws0"> class from the </div><div class="t m0 x137 h62 y15cc ff16 fs21 fc4 sc0 ls128 ws0">Book</div><div class="t m0 x49 h20 y15cb ffb fs7 fc4 sc0 ls6 ws0"> class</div><div class="c x60 y15cd wbb h138"><div class="t m0 xc8 h14 y15ce ff12 fs7 fcb sc0 ls10d ws8f6">What was p<span class="ff13 ls6 ws0">r</span><span class="ls102 ws8f7">eviously sto<span class="ff13 ls6 ws0">r<span class="ff12 lsde">ed </span></span></span></div><div class="t m0 xc8 h14 y15cf ff12 fs7 fcb sc0 ls6 ws0">o<span class="ff13">n</span><span class="ls198 ws65c">ly as a dictio</span><span class="ff13">n</span>a<span class="ff13">r</span><span class="ls12f ws64e">y is </span><span class="ff13">n</span><span class="ls140">ow </span></div><div class="t m0 xc8 h14 y15d0 ff12 fs7 fcb sc0 ls10e ws0">st<span class="ff13 ls6">r</span><span class="ls12f">uctu<span class="ff13 ls6">r<span class="ff12 ws317">ed att</span>r</span><span class="lsd6">ibutes.</span></span></div></div><div class="c x60 y15d1 wbc h139"><div class="t m0 xc8 h14 y15d2 ff12 fs7 fcb sc0 ls88 ws8f8">The Autho<span class="ff13 ls6 ws0">r</span>-level p<span class="ff13 ls6 ws0">r<span class="ff12 ls124">ope</span>r</span><span class="lsd2 ws8f9">ties a<span class="ff13 ls6 ws0">r<span class="ff12">e </span></span></span></div><div class="t m0 xc8 h14 y15d3 ff12 fs7 fcb sc0 ls10e ws0">si<span class="ff13 ls6">m</span><span class="lsde">ple<span class="ff13 ls6">r</span><span class="ls146 ws4b3"> tha</span><span class="ff13 ls6">n</span><span class="lsdf ws4c9"> the o</span><span class="ff13 ls6">r</span><span class="ls103">igi<span class="ff13 ls6">n</span><span class="ls218">als.</span></span></span></div></div><div class="c x12 y15d4 w28 h10a"><div class="t m0 x12e h14 y15d5 ff12 fs7 fcb sc0 lsd2 ws0">Co<span class="ff13 ls6">n</span>ti<span class="ff13 ls6">n</span><span class="lsd3 ws743">ues sto</span><span class="ff13 ls6">r<span class="ff12">i</span>n</span><span class="ls18d ws691">g autho</span><span class="ff13 ls6">r</span><span class="ls14e ws74a">_data u</span><span class="ff13 ls6">n</span><span class="ls102">til </span></div><div class="t m0 x12e h14 y14c4 ff12 fs7 fcb sc0 ls6 ws0">co<span class="ff13">n</span><span class="ls119">su</span><span class="ff13">m</span>e<span class="ff13">r</span><span class="ls170 ws885">s do</span><span class="ff13">n</span><span class="ls145">’t </span><span class="ff13">n</span><span class="ls1e1 ws8fa">eed it a</span><span class="ff13">n</span>y<span class="ff13">m</span>o<span class="ff13">r</span>e</div></div><div class="c x74 y15d6 w28 h56"><div class="t m0 x12e h14 y65c ff12 fs7 fcb sc0 ls105 ws0">Sto<span class="ff13 ls6">r</span><span class="lsd9 ws8fb">es a</span><span class="ff13 ls6">n</span><span class="ls219"> i<span class="_ _e"></span><span class="ff13 ls6">n</span><span class="lsec">sta<span class="ff13 ls6">n</span><span class="lsd5 ws74e">ce of Autho</span><span class="ff13 ls6">r<span class="ff12"> </span></span></span></span></div><div class="t m0 x12e h14 y65d ff12 fs7 fcb sc0 ls103 ws0">fo<span class="ff13 ls6">r</span><span class="ws31b"> fo</span><span class="ff13 ls6">r</span><span class="ls88">wa<span class="ff13 ls6">r</span><span class="lsec">di<span class="ff13 ls6">n</span><span class="ls12f ws64e">g calls</span></span></span></div></div><div class="c x89 y15d7 wbd h46"><div class="t m0 xc8 h14 y2ed ff12 fs7 fcb sc0 ls102 ws3cd">Replaces p<span class="ff13 ls6 ws0">r</span><span class="lsda ws311">evious logic with </span></div><div class="t m0 xc8 h14 y2ee ff12 fs7 fcb sc0 ls123 ws0">fo<span class="ff13 ls6">r</span><span class="ls88">wa<span class="ff13 ls6">r</span><span class="lsec">di<span class="ff13 ls6">n</span><span class="lsde ws3cf">g to the Autho</span><span class="ff13 ls6">r</span><span class="lsdd"> i<span class="ff13 ls6">n</span></span>sta<span class="ff13 ls6">n<span class="ff12">ce</span></span></span></span></div></div><div class="t m0 x87 h3b y15d8 ffd fs18 fcd sc0 ls6 ws0">@property</div><div class="t m0 x87 h3b y15d9 ffd fs18 fcd sc0 ls6 ws0">def</div><div class="t m3 x0 h3a y15d9 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x36 h3b y15d9 ffd fs18 fcd sc0 ls6 ws0">author_for_citation(s<span class="_ _e"></span>elf):</div><div class="t m0 x36 h3b y15da ffd fs18 fc1 sc0 ls6 ws0">return</div><div class="t m3 x0 h3a y15da ff8 fs18 fc1 sc0 ls6 ws0"> </div><div class="t m0 x7e h3b y15da ffd fs18 fc1 sc0 ls6 ws0">self.author.for_citation</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
