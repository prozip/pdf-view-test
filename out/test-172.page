<div id="pfac" class="pf w0 h0" data-page-no="ac"><div class="pc pcac w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgac.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">148</div><div class="t m0 x17 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xa7 h2c y1d0 ffb fs19 fcb sc0 lsf6 ws0">HAPTER</div><div class="t m0 xba h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 8</div><div class="t m0 xe7 h2d y80 ffa fs7 fcb sc0 ls6 ws0">The rules (and exceptions) of inheritance</div><div class="t m0 x97 h3b y395 ffd fs18 fc3 sc0 lsb2 ws0">super().__init__(name)</div><div class="t m0 x97 h3b y396 ffd fs18 fc3 sc0 lsb2 ws0">self.name<span class="_"> </span>=<span class="_"> </span>name</div><div class="t m0 x97 h3b y397 ffd fs18 fc3 sc0 lsb2 ws0">self.shell_size<span class="_"> </span>=<span class="_"> </span>shell_size</div><div class="t m0 x44 h3b y484 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>race(gastropod_one,<span class="_"> </span>gastropod_two):</div><div class="t m0 xae h3b y569 ffd fs18 fc3 sc0 lsb2 ws0">gastropod_one.crawl()</div><div class="t m0 xae h3b y56a ffd fs18 fc3 sc0 lsb2 ws0">gastropod_two.crawl()</div><div class="t m0 x44 h3b y58f ffd fs18 fc3 sc0 lsb2 ws0">race(Slug(&apos;Geoffrey&apos;),<span class="_"> </span>Slug(&apos;Ramona&apos;))</div><div class="t m0 x44 h3b y590 ffd fs18 fc3 sc0 lsb2 ws0">race(Snail(&apos;Geoffrey&apos;),<span class="_"> </span>Snail(&apos;Ramona&apos;))</div><div class="t m0 x44 h15 y3f5 ff4 fsb fc3 sc0 ls1f ws45">You could pull more tricks ou<span class="_ _0"></span>t of your sleev<span class="lsc5 ws381">e <span class="_ _0"></span>to make this work, <span class="_ _0"></span>but consider that<span class="_ _0"></span> this</span></div><div class="t m0 x44 h15 y3f6 ff4 fsb fc3 sc0 ls2f ws23">might be a better case for composition. A snail <span class="ff3 lsb1 ws0">has-a</span><span class="ls1c ws10"> shell, after all.</span></div><div class="t m0 x32 h15 y489 ff4 fsb fc3 sc0 ls30 ws22e"> I like to think about substi<span class="ls34 ws3ae">tutab<span class="_ _e"></span>ility by examining the <span class="ff3 ls6f ws0">role</span><span class="ls71 ws483"> a particular set of classes</span></span></div><div class="t m0 x44 h15 y48a ff4 fsb fc3 sc0 ls6f ws856">fills. If each class in a hierarch<span class="_ _e"></span>y can fulfill <span class="ls3d ws97">the role in question, <span class="_ _e"></span>th<span class="ls3a wsc3">ey’re likely substitut-</span></span></div><div class="t m0 x44 h15 y48b ff4 fsb fc3 sc0 ls2f ws1c8">able. If a subclass changes any of its method <span class="ls42 ws1e5">signatures or raises an exception as part</span></div><div class="t m0 x44 h15 y48d ff4 fsb fc3 sc0 ls8d ws857">of its speci<span class="_ _e"></span>alization, it may not fu<span class="_ _e"></span>lfill that <span class="ls3a ws1c2">role, and this might <span class="_ _e"></span>be a hint that the class</span></div><div class="t m0 x44 h15 y48e ff4 fsb fc3 sc0 ls20 ws51">hierarchy should be ar<span class="ls42 ws32">ranged differently. </span></div><div class="t m0 x42 h26 y1272 ffc fs15 fc2 sc0 ls9c ws168">8<span class="_ _0"></span>.<span class="_ _0"></span>2<span class="_ _0"></span>.<span class="_ _1d"></span>3<span class="_ _5f"> </span>The ideal use case for inheritance</div><div class="t m0 x44 h15 y491 ff4 fsb fc3 sc0 ls38 ws424">Sandi Metz, a Ruby programmer who original<span class="ls2d ws408">ly came from the Smal<span class="_ _0"></span>ltalk community</span></div><div class="t m0 x44 h15 yc6 ff4 fsb fc3 sc0 ls62 ws858">(Smalltalk being a p<span class="_ _e"></span>rogramming language w<span class="_ _e"></span>r<span class="ls31 ws64d">itten in part by Alan Kay, one of the</span></div><div class="t m0 x44 h15 y1005 ff4 fsb fc3 sc0 ls48 ws52f">pioneers of object-oriente<span class="_ _e"></span>d programming), la<span class="ls30 ws394">id out a great set of ground rules about</span></div><div class="t m0 x44 h15 y27b ff4 fsb fc3 sc0 ls38 ws26">when to use inheritance:</div><div class="t m0 x23 h31 y1273 ff4 fs1a fc3 sc0 ls6 ws0">3</div><div class="t m0 x86 h29 y1274 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x87 h15 y115e ff4 fsb fc3 sc0 ls34 ws9f">The problem you’re solving has a shallow, <span class="_ _0"></span>narrow hierarchy.</div><div class="t m0 x86 h29 y1275 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x87 h15 y28f ff4 fsb fc3 sc0 ls30 wscf">Subclasses are at the leaves of the object<span class="_ _e"></span> graph; they don’t make use of other</div><div class="t m0 x87 h15 y290 ff4 fsb fc3 sc0 ls71 ws0">objects.</div><div class="t m0 x86 h29 y1276 ffe fs17 fca sc0 ls6 ws0"></div><div class="t m0 x87 h15 y1ad ff4 fsb fc3 sc0 ls2d ws31">Subclasses use (or specialize) <span class="ff3 ls6 ws0">all</span><span class="ls6c ws6f"> the behavior of their<span class="_ _0"></span> superclass.</span></div><div class="t m0 x44 h15 y5c ff4 fsb fc3 sc0 ls36 ws35">I’ll talk through each of these in a little more detail.</div><div class="t m0 x44 h30 y1277 ffb fsc fc2 sc0 ls6 ws0">S</div><div class="t m0 x1a h5a y1278 ffb fs20 fc2 sc0 ls162 ws0">HALLOW</div><div class="t m0 x102 h30 y1277 ffb fsc fc2 sc0 ls1ca ws0">, </div><div class="t m0 xef h5a y1278 ffb fs20 fc2 sc0 ls11e ws0">NARROW</div><div class="t m0 x17 h30 y1277 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x28 h5a y1278 ffb fs20 fc2 sc0 ls1e9 ws0">HIERARCHY</div><div class="t m0 x44 h15 y1279 ff4 fsb fc3 sc0 ls3a ws0">The <span class="ff3 ls48">shal<span class="_ _e"></span>low</span><span class="ls38 wsc9"> part of this rule addresses the problem with deep inheritance hierarchies</span></div><div class="t m0 x44 h15 y127a ff4 fsb fc3 sc0 ls2e wsb7">you learned earlier: deeply nested<span class="_ _0"></span> class hi<span class="ls1e ws258">erarchies can lead to d<span class="_ _0"></span>ifficult management</span></div><div class="t m0 x44 h15 y127b ff4 fsb fc3 sc0 ls20 ws3ea">and the introduction of bu<span class="ls38 ws193">gs. Keeping t<span class="_ _e"></span>he hierarchy small and contained makes it</span></div><div class="t m0 x44 h15 y127c ff4 fsb fc3 sc0 ls5e ws14a">easier to reason about when necessary (figure <span class="_ _e"></span>8.4).</div><div class="t m0 x32 h15 y127d ff4 fsb fc3 sc0 ls3a ws74"> The <span class="ff3 ls48 ws0">narrow<span class="ff4 ls147"> p<span class="_ _1d"></span>a<span class="_ _0"></span>r<span class="_ _1d"></span>t<span class="_ _0"></span> o<span class="_ _1d"></span>f<span class="_ _1d"></span> t<span class="_ _0"></span>h<span class="_ _1d"></span>i<span class="_ _1d"></span>s<span class="_ _0"></span> r<span class="_ _1d"></span>u<span class="_ _1d"></span>l<span class="_ _0"></span>e<span class="_ _1d"></span> m<span class="_ _1d"></span>e<span class="_ _0"></span>a<span class="_ _1d"></span>n<span class="_ _0"></span>s<span class="_ _1d"></span> t<span class="_ _1d"></span>h<span class="_ _1d"></span>a<span class="_ _0"></span>t<span class="_ _1d"></span> n<span class="_ _0"></span>o<span class="_ _1d"></span> c<span class="_ _1d"></span>l<span class="_ _0"></span>a<span class="_ _1d"></span>s<span class="_ _1d"></span>s<span class="_ _0"></span> i<span class="_ _1d"></span>n<span class="_ _1d"></span> <span class="_ _e"></span>t<span class="_ _1c"></span>h<span class="_ _0"></span>e<span class="_ _1d"></span> h<span class="_ _1d"></span>i<span class="_ _0"></span>e<span class="_ _1d"></span>r<span class="_ _0"></span>a<span class="_ _1d"></span>r<span class="_ _1d"></span>c<span class="_ _0"></span>h<span class="_ _1d"></span>y<span class="_ _1d"></span> s<span class="_ _0"></span>h<span class="_ _1d"></span>o<span class="_ _1d"></span>u<span class="_ _0"></span>l<span class="_ _1d"></span>d<span class="_ _1d"></span> h<span class="_ _0"></span>a<span class="_ _1d"></span>v<span class="_ _0"></span>e<span class="_ _1d"></span> t<span class="_ _1d"></span>o<span class="_ _0"></span>o</span></span></div><div class="t m0 x44 h15 y127e ff4 fsb fc3 sc0 ls2d ws79">many subclasses. As the number of subcla<span class="ls3a ws63c">sses grows, it becomes difficult to know</span></div><div class="t m0 x44 h15 y11fd ff4 fsb fc3 sc0 ls36 ws350">which ones provide which specialization, <span class="ls3e ws859">and other developers may duplicate sub-</span></div><div class="t m0 x44 h15 y127f ff4 fsb fc3 sc0 ls7d ws11c">classes if they can’t find <span class="ls20 ws51">the one they’re looking for. </span></div><div class="c x40 y1280 w72 hdb"><div class="t m0 xfd h14 y1029 ff12 fs7 fcb sc0 ls10c ws3d9">You ca<span class="ff13 ls6 ws0">n<span class="ff12 lsdd"> c</span>r</span><span class="lsd2 ws35c">eate two Slug </span></div><div class="t m0 xfd h14 y102a ff12 fs7 fcb sc0 ls6 ws0">i<span class="ff13">n</span><span class="ls18d">sta</span><span class="ff13">n</span><span class="ls117 ws3a5">ces a</span><span class="ff13">n</span><span class="lsec">d </span><span class="ff13">r</span><span class="lsda ws2aa">ace the</span><span class="ff13">m</span>.</div></div><div class="c x13 yc7b w9d h6e"><div class="t m0 x12e h14 y68d ff12 fs7 fcb sc0 ls6 ws0">T<span class="ff13">r</span><span class="lsd3">yi</span><span class="ff13">n</span><span class="lsff ws85a">g to use S</span><span class="ff13">n</span><span class="lsde ws71e">ail without a shell_size </span></div><div class="t m0 x12e h14 y68e ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">r</span><span class="lsdd">gu</span><span class="ff13">m</span>e<span class="ff13">n</span><span class="lsd2">t </span><span class="ff13">r</span><span class="ls10e ws4f1">aises a</span><span class="ff13">n</span><span class="lsde ws2ad"> exceptio</span><span class="ff13">n</span>.</div></div><div class="t m0 x42 h32 y210 ff4 fs1b fcd sc0 ls6 ws0">3</div><div class="t m0 x43 h33 y211 ff4 fs17 fcd sc0 ls6 ws0">See Sandi Metz<span class="_ _e"></span>, “All the Little Things,”</div><div class="t m3 x0 h34 y211 ff8 fs17 fcd sc0 ls6 ws0"> </div><div class="t m0 xa8 h33 y211 ff3 fs17 fcd sc0 ls6 ws0">RailsConf 2014<span class="ff4">,</span></div><div class="t m3 x0 h34 y211 ff8 fs17 fcd sc0 ls6 ws0"> </div><div class="t m0 x84 h33 y211 ff4 fs17 fcf sc0 ls6 ws0">www.youtube<span class="_ _e"></span>.com/watch?v=8bZh5LMa<span class="_ _e"></span>SmE</div><div class="t m3 x0 h34 y211 ff8 fs17 fcf sc0 ls6 ws0"> </div><div class="t m0 x13b h33 y211 ff4 fs17 fcd sc0 ls6 ws0">for more.</div><a class="l" href="https://www.youtube.com/watch?v=8bZh5LMaSmE"><div class="d m2" style="border-style:none;position:absolute;left:263.940000px;bottom:62.318000px;width:161.820000px;height:10.500000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
