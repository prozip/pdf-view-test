<div id="pfcf" class="pf w0 h0" data-page-no="cf"><div class="pc pccf w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgcf.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">183<span class="_ _f7"></span><span class="ffa">Defining coupling</span></div><div class="t m0 x35 h3b y395 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>_normalize(query):</div><div class="t m0 x87 h3b y396 ffd fs18 fc3 sc0 lsb2 ws0">query<span class="_"> </span>=<span class="_"> </span>query.casefold()</div><div class="t m0 x87 h3b y397 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>query</div><div class="t m0 x35 h3b y484 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>_remove_quotes(query):</div><div class="t m0 x87 h3b y569 ffd fs18 fc3 sc0 lsb2 ws0">query<span class="_"> </span>=<span class="_"> </span>re.sub(r&apos;&quot;&apos;,<span class="_"> </span>&apos;&apos;,<span class="_"> </span>query)</div><div class="t m0 x87 h3b y56a ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>query</div><div class="t m0 x35 h3b y58f ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>clean_query(query):</div><div class="t m0 x87 h3b y590 ffd fs18 fc3 sc0 lsb2 ws0">query<span class="_"> </span>=<span class="_"> </span>_remove_spaces(query)</div><div class="t m0 x87 h3b yfe2 ffd fs18 fc3 sc0 lsb2 ws0">query<span class="_"> </span>=<span class="_"> </span>_remove_quotes(query)</div><div class="t m0 x87 h3b y591 ffd fs18 fc3 sc0 lsb2 ws0">query<span class="_"> </span>=<span class="_"> </span>_normalize(query)</div><div class="t m0 x87 h3b y592 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>query</div><div class="t m0 x35 h3b y595 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>__name__<span class="_"> </span>==<span class="_"> </span>&apos;__main__&apos;:</div><div class="t m0 x87 h3b y596 ffd fs18 fc3 sc0 lsb2 ws0">search_query<span class="_"> </span>=<span class="_"> </span>input(&apos;Enter<span class="_"> </span>your<span class="_"> </span>search<span class="_"> </span>query:<span class="_"> </span>&apos;)</div><div class="t m0 x87 h3b yc4a ffd fs18 fc3 sc0 lsb2 ws0">search_query<span class="_"> </span>=<span class="_"> </span>clean_query(search_query)</div><div class="t m0 x87 h3b y1681 ffd fs18 fc1 sc0 lsb2 ws0">print(f&apos;Running<span class="_"> </span>a<span class="_"> </span>search<span class="_"> </span>for<span class="_"> </span>&quot;{search_query}&quot;&apos;)</div><div class="t m0 x35 h15 y93 ff4 fsb fc3 sc0 ls20 ws330">Now when you think of another technique to clean your queries, you’ll be able to do</div><div class="t m0 x35 h15 yc6c ff4 fsb fc3 sc0 ls34 ws22">the following (shown in figure 10.3):</div><div class="t m0 x8a h3d y1682 ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x48 h15 y1253 ff4 fsb fc3 sc0 ls1c ws10">Create a function to perform <span class="ls3a ws28">th<span class="_ _e"></span>e new transform on a query.</span></div><div class="t m0 x8a h3d y1683 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x48 h15 y154 ff4 fsb fc3 sc0 ls7d ws11c">Call the new function inside </div><div class="t m5 x94 h24 y1684 ffd fsc fc3 sc0 lsa0 ws0">clean_query</div><div class="t m0 x54 h15 y154 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x8a h3d y1685 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x48 h15 y156 ff4 fsb fc3 sc0 ls62 ws278">Call it a day, con<span class="_ _e"></span>fident that consum<span class="_ _e"></span><span class="ls71 wsd4">ers are all cleaning queries properly.</span></div><div class="c x68 y1381 wa0 h144"><div class="t m0 x12e h14 y387 ff12 fs7 fcb sc0 lsec ws45e">A si<span class="ff13 ls6 ws0">n</span><span class="ls88 ws314">gle e<span class="ff13 ls6 ws0">n<span class="ff12">t</span>r</span><span class="lsd4 ws4ee">y poi<span class="ff13 ls6 ws0">n<span class="ff12 lsd2">t </span>r<span class="ff12">eceives </span></span></span></span></div><div class="t m0 x12e h14 y388 ff12 fs7 fcb sc0 lsd2 ws35c">the o<span class="ff13 ls6 ws0">r<span class="ff12 ls103">igi</span>n</span><span class="ls10e ws55a">al que<span class="ff13 ls6 ws0">r</span><span class="ls88 ws314">y, clea<span class="ff13 ls6 ws0">n</span></span>s it, </span></div><div class="t m0 x12e h14 y389 ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">n</span><span class="lsec">d </span><span class="ff13">r</span><span class="ls105">etu<span class="ff13 ls123">rn</span><span class="ls10e ws4f1">s it.</span></span></div></div><div class="c x113 y1686 wa0 hbb"><div class="t m0 x12e h14 y1687 ff12 fs7 fcb sc0 ls11a ws872">The co<span class="ff13 ls6 ws0">n<span class="ff12 ls10e">su</span>m<span class="ff12">i</span>n</span><span class="lse3 ws2b1">g code <span class="ff13 ls6 ws0">n</span><span class="lsd9 ws2ce">eeds to </span></span></div><div class="t m0 x12e h14 y112e ff12 fs7 fcb sc0 ls12f ws91d">call o<span class="ff13 ls6 ws0">n</span><span class="ls10c ws91e">ly a si<span class="ff13 ls6 ws0">n</span><span class="lse0 ws91f">gle fu<span class="ff13 ls6 ws0">n<span class="ff12 lse4">ctio</span>n<span class="ff12"> <span class="_ _0"></span><span class="ff13">n<span class="ff12 ls140">ow, </span></span></span></span></span></span></div><div class="t m0 x12e h14 y112f ff13 fs7 fcb sc0 ls6 ws0">r<span class="ff12 lsef">educi</span>n<span class="ff12 ls125 ws3cc">g coupli</span>n<span class="ff12 lse1">g.</span></div></div><div class="c x19 y1688 wcb h145"><div class="t m0 x12a h146 y1689 ff15 fs32 fc12 sc0 ls6 ws0">remove_spaces<span class="_ _10"> </span>remove_quotes</div><div class="t m0 x14c h146 y168a ff15 fs32 fc12 sc0 ls6 ws0">_main_</div><div class="t m0 xd7 h146 y1689 ff15 fs32 fc12 sc0 ls6 ws0">normalize</div><div class="t m0 x1 h147 y168b ff11 fs32 fc12 sc0 ls21d ws920">“Clean this</div><div class="t m0 x44 h147 y168c ff11 fs32 fc12 sc0 ls21d ws0">query,</div><div class="t m0 x148 h147 y168d ff11 fs32 fc12 sc0 ls21d ws0">please.”</div><div class="t m0 x130 h147 y168b ff11 fs32 fc12 sc0 ls21d ws920">“Clean this</div><div class="t m0 x12b h147 y168c ff11 fs32 fc12 sc0 ls21d ws0">query,</div><div class="t m0 x14d h147 y168d ff11 fs32 fc12 sc0 ls21d ws0">please.”</div><div class="t m0 xd8 h147 y168b ff11 fs32 fc12 sc0 ls21d ws920">“Clean this</div><div class="t m0 x79 h147 y168c ff11 fs32 fc12 sc0 ls21d ws0">query,</div><div class="t m0 x36 h147 y168d ff11 fs32 fc12 sc0 ls21d ws0">please.”</div><div class="t m0 x14b h148 y168e ff12 fs33 fc12 sc0 ls6 ws0">The main procedure is tightly coupled</div><div class="t m0 x14b h148 y168f ff12 fs33 fc12 sc0 ls6 ws0">to the process of cleaning queries because</div><div class="t m0 x14b h148 y1690 ff12 fs33 fc12 sc0 ls6 ws0">it knows all the details about how to do it.</div><div class="t m0 x20 h148 y1691 ff12 fs33 fc12 sc0 ls6 ws0">The main procedure fully entrusts the</div><div class="t m0 x20 h148 y1692 ff12 fs33 fc12 sc0 ls6 ws0">cleaning of queries to the </div><div class="t m0 xc9 h149 y1693 ff1e fs34 fc12 sc0 ls6 ws0">clean_query</div><div class="t m0 x20 h148 y1694 ff12 fs33 fc12 sc0 ls6 ws0">function, loosening its coupling to the</div><div class="t m0 x20 h148 y1695 ff12 fs33 fc12 sc0 ls6 ws0">now-encapsulated quer<span class="_ _e"></span>y<span class="_ _0"></span>-cleaning process.</div><div class="t m0 xfe h146 y1689 ff15 fs32 fc12 sc0 ls6 ws0">_remove_quotes<span class="_ _107"> </span>_fix_typos<span class="_ _108"></span>_remove_spaces</div><div class="t m0 x2a h146 y168a ff15 fs32 fc12 sc0 ls6 ws0">clean_query</div><div class="t m0 x55 h146 y1696 ff15 fs32 fc12 sc0 ls6 ws0">run_query</div><div class="t m0 xb3 h146 y1697 ff15 fs32 fc12 sc0 ls6 ws0">_main_</div><div class="t m0 x71 h146 y1689 ff15 fs32 fc12 sc0 ls6 ws0">_normalize</div><div class="t m0 x45 h147 y1698 ff11 fs32 fc12 sc0 ls21d ws921">“Clean this query,</div><div class="t m0 xe4 h147 y1699 ff11 fs32 fc12 sc0 ls21d ws0">please.”</div><div class="t m0 x74 h147 y169a ff11 fs32 fc12 sc0 ls21d ws922">“Run this</div><div class="t m0 x5f h147 y169b ff11 fs32 fc12 sc0 ls21d ws922">query, please.”</div><div class="t m0 x111 h148 y169c ff12 fs33 fc12 sc0 ls6 ws0">If the code needs to do</div><div class="t m0 x111 h148 y169d ff12 fs33 fc12 sc0 ls6 ws0">new things later on, the</div><div class="t m0 x111 h148 y169e ff12 fs33 fc12 sc0 ls6 ws0">main process can keep</div><div class="t m0 x111 h148 y169f ff12 fs33 fc12 sc0 ls6 ws0">query cleaning and the</div><div class="t m0 x111 h148 y16a0 ff12 fs33 fc12 sc0 ls6 ws0">new tasks separated</div><div class="t m0 x111 h148 y16a1 ff12 fs33 fc12 sc0 ls6 ws0">using this approach.</div></div><div class="c x19 y3f w4 h14a"><div class="t m0 xea h2b y16a2 ffb fs18 fcb sc0 ls69 ws44f">Using encapsulation and separation of concerns to maintain <span class="_ _0"></span>loose coupling<span class="_ _109"></span>Figure 10.3</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
