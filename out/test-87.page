<div id="pf57" class="pf w0 h0" data-page-no="57"><div class="pc pc57 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg57.png"/><div class="t m0 xbf h14 y80 ff7 fs7 fcb sc0 ls6 ws0">63<span class="_ _69"></span><span class="ffa">Hurtling through time and space</span></div><div class="t m0 x35 h26 y1e4 ffc fs15 fc2 sc0 ls9c ws168">Space complexity<span class="_ _6c"></span>4<span class="_ _0"></span>.<span class="_ _0"></span>1<span class="_ _0"></span>.<span class="_ _1d"></span>3</div><div class="t m0 x35 h15 y140 ff4 fsb fc3 sc0 ls71 ws241">Just like time complexity, <span class="ff3 ls4b ws53e">space complexit<span class="_ _e"></span>y</span><span class="ls36 ws137"> is a measure of how y<span class="_ _0"></span>our code uses disk space</span></div><div class="t m0 x35 h15 y141 ff4 fsb fc3 sc0 ls3a ws18c">or memory as its inputs grow. Space comple<span class="ls3d ws53f">xity is easy to o<span class="_ _e"></span>verlook, though, because</span></div><div class="t m0 x35 h15 y142 ff4 fsb fc3 sc0 ls2f ws26a">it’s not always something you observe direct<span class="ws1f4">ly. Sometimes inefficient use of disk space</span></div><div class="t m0 x35 h15 y143 ff4 fsb fc3 sc0 ls31 ws7e">rears its ugly head only when you get a pop <span class="wsbe">up saying you have no disk space left on</span></div><div class="t m0 x35 h15 y144 ff4 fsb fc3 sc0 ls47 ws540">your computer. It’s good to think about spac<span class="_ _e"></span><span class="ls36 ws2e7">e as you write your code so you don’t eat</span></div><div class="t m0 x35 h15 y145 ff4 fsb fc3 sc0 lsf8 ws434">up your resou<span class="_ _e"></span>rces.</div><div class="t m0 x35 h30 y88b ffb fsc fc2 sc0 ls6 ws0">M</div><div class="t m0 x3c h5a y88c ffb fs20 fc2 sc0 ls75 ws0">EMORY</div><div class="t m0 x35 h15 y88d ff4 fsb fc3 sc0 ls49 ws541">A common wa<span class="_ _0"></span>y program<span class="_ _0"></span>s use too <span class="_ _0"></span>much memor<span class="_ _0"></span>y <span class="ls2e ws542">is by reading la<span class="_ _0"></span>rge data files fully into</span></div><div class="t m0 x35 h15 y88e ff4 fsb fc3 sc0 ls1f ws543">memory when they don’t have to. Suppose yo<span class="ls2d ws1a4">u have a text file containing a row for</span></div><div class="t m0 x35 h15 y88f ff4 fsb fc3 sc0 ls36 ws87">each person alive today and their fa<span class="_ _0"></span>vorite<span class="ls1f ws544"> color. You’d like to<span class="ls71 ws88"> know the number of</span></span></div><div class="t m0 x35 h15 y890 ff4 fsb fc3 sc0 ls51 ws545">people who like each color the most. You migh<span class="ls63 ws546">t consider readi<span class="_ _e"></span>ng the whole file<span class="_ _e"></span> in as a</span></div><div class="t m0 x35 h15 y891 ff4 fsb fc3 sc0 ls38 ws26">list of rows and operating on the list:</div><div class="t m0 x35 h3b y892 ffd fs18 fc3 sc0 lsb2 ws0">color_counts<span class="_"> </span>=<span class="_"> </span>{}</div><div class="t m0 x35 h3b y893 ffd fs18 fc3 sc0 lsb2 ws0">with<span class="_"> </span>open(&apos;all-favorite-colors.txt&apos;)<span class="_"> </span>as<span class="_"> </span>favorite_colors_file:</div><div class="t m0 x87 h3b y894 ffd fs18 fc3 sc0 lsb2 ws0">favorite_colors<span class="_"> </span>=<span class="_"> </span>favorite_colors_file.read().splitlines()</div><div class="t m0 x35 h3b y895 ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>color<span class="_"> </span>in<span class="_"> </span>favorite_colors:</div><div class="t m0 x66 h3b y896 ffd fs18 fc3 sc0 lsb2 ws0">color_counts:<span class="_ _6d"></span>in<span class="_ _6e"></span>color<span class="_ _6e"></span>if</div><div class="t m0 xb3 h3b y897 ffd fs18 fc3 sc0 lsb2 ws0">1<span class="_ _46"></span>+=<span class="_ _6f"></span>color_counts[color]</div><div class="t m0 x87 h3b y898 ffd fs18 fc3 sc0 lsb2 ws0">else:</div><div class="t m0 x36 h3b y899 ffd fs18 fc1 sc0 lsb2 ws0">color_counts[color]<span class="_"> </span>=<span class="_"> </span>1</div><div class="t m0 x35 h15 y206 ff4 fsb fc3 sc0 ls3a ws1e0">There are a lot of people on <span class="_ _e"></span>planet Earth. <span class="ls2f ws109">Even if the file only contained one c<span class="_ _0"></span>olumn</span></div><div class="t m0 x35 h15 y89a ff4 fsb fc3 sc0 ls1c wsf2">of favorite colors and each row used 1 <span class="_ _e"></span>byte of data, the file would still be just over 7 GB</div><div class="t m0 x35 h15 y89b ff4 fsb fc3 sc0 ls3a ws547">in size. You might have that much memory<span class="ls20 ws548"> on your machine, but the task doesn’t</span></div><div class="t m0 x35 h15 y89c ff4 fsb fc3 sc0 ls6d ws71">require yo<span class="_ _e"></span>u to have all the row <span class="ls31 ws25">information available at once.</span></div><div class="t m0 x83 h15 y89d ff4 fsb fc3 sc0 ls6 ws549"> In Python, you can read<span class="_ _e"></span> a file line-by-line in a </div><div class="t m5 x14 h24 y89e ffd fsc fc3 sc0 lsa0 ws0">for</div><div class="t m0 x2d h15 y89d ff4 fsb fc3 sc0 ls42 ws37e"> loop, and on each iteration of</div><div class="t m0 x35 h15 y89f ff4 fsb fc3 sc0 ls2d ws211">the loop, the next line will <span class="ff3 ls5b ws0">replace</span> the current line in memory. Try updating the code</div><div class="t m0 x35 h15 y8a0 ff4 fsb fc3 sc0 ls5e ws14a">to read one line from<span class="_ _e"></span> the file at a time, and come back when <span class="_ _e"></span>you’ve got it.</div><div class="t m0 x35 h3b y8a1 ffd fs18 fc3 sc0 lsb2 ws0">color_counts<span class="_"> </span>=<span class="_"> </span>{}</div><div class="c x35 y8a2 w2 h8f"><div class="t m0 xb7 h2f y8a3 ffb fs15 fc2 sc0 ls169 ws54a">The garbage ma<span class="_ _e"></span>n</div><div class="t m0 xb7 h30 y8a4 fff fsc fc3 sc0 ls95 ws54b">Another thing that makes space comple<span class="_ _e"></span>xity more difficult in Python is that you don’t</div><div class="t m0 xb7 h30 y8a5 fff fsc fc3 sc0 lsb6 ws516">often manage memory you<span class="_ _e"></span>rself. In some languages, you must explicitly<span class="_ _e"></span> allocate and</div><div class="t m0 xb7 h30 y8a6 fff fsc fc3 sc0 lsb6 ws54c">free up memory, which <span class="_ _e"></span>forces you to manage how <span class="_ _e"></span>your code uses resources. Python</div><div class="t m0 xb7 h30 y8a7 fff fsc fc3 sc0 ls96 ws54d">uses automatic <span class="ff10 lscd ws0">garbage</span></div><div class="t m0 xae h1b y8a8 ff3 fsb fc3 sc0 ls6 ws0"> </div><div class="t m0 x8a h30 y8a7 ff10 fsc fc3 sc0 ls16a ws0">collection<span class="fff ls95 ws54e">, which frees the memo<span class="_ _e"></span>ry that holds objects that</span></div><div class="t m0 xb7 h30 y8a9 fff fsc fc3 sc0 lsd0 ws54f">are no longer in u<span class="_ _e"></span>se by a running program.</div></div><div class="c x3e y8aa w35 h90"><div class="t m0 x2 h14 y8ab ff12 fs7 fcb sc0 lsda ws311">Reads the whole file</div><div class="t m0 xa h14 y8ac ff12 fs7 fcb sc0 ls6 ws0">i<span class="ff13">n</span><span class="lsdc ws2ac">to a list of li</span><span class="ff13">n</span><span class="ls117">es</span></div></div><div class="c xcc y855 w37 h56"><div class="t m0 x43 h14 y8ad ff12 fs7 fcb sc0 lsd3 ws39d">Reads o<span class="ff13 ls6 ws0">n</span><span class="ls10c ws550">ly o<span class="ff13 ls6 ws0">n<span class="ff12">e </span></span></span></div><div class="t m0 x43 h14 y8ae ff12 fs7 fcb sc0 ls6 ws0">li<span class="ff13">n</span><span class="ls105 ws325">e at a ti</span><span class="ff13">m</span>e</div></div><div class="t m0 x35 h3b y8af ffd fs18 fcd sc0 ls6 ws0">with</div><div class="t m3 x0 h3a y8af ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x4 h3b y8af ffd fs18 fcd sc0 ls6 ws0">open(&apos;all-favorite-colors.<span class="_ _e"></span>txt&apos;)</div><div class="t m3 x0 h3a y8af ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 xf h3b y8af ffd fs18 fcd sc0 ls6 ws0">as</div><div class="t m3 x0 h3a y8af ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x30 h3b y8af ffd fs18 fcd sc0 ls6 ws0">favorite_colors_file:</div><div class="t m0 x87 h3b y8b0 ffd fs18 fcd sc0 ls6 ws0">for</div><div class="t m3 x0 h3a y8b0 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x36 h3b y8b0 ffd fs18 fcd sc0 ls6 ws0">color</div><div class="t m3 x0 h3a y8b0 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x28 h3b y8b0 ffd fs18 fcd sc0 ls6 ws0">in</div><div class="t m3 x0 h3a y8b0 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x67 h3b y8b0 ffd fs18 fcd sc0 ls6 ws0">favorite_colors_file:</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
