<div id="pfbb" class="pf w0 h0" data-page-no="bb"><div class="pc pcbb w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgbb.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">163<span class="_ _e2"></span><span class="ffa">How big should my class/function/module be?</span></div><div class="t m0 x35 h3b y2c2 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>has_long_words(sentence):</div><div class="t m0 x87 h3b y2c3 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>isinstance(sentence,<span class="_"> </span>str):</div><div class="t m0 x36 h3b y2c4 ffd fs18 fc3 sc0 lsb2 ws0">sentence<span class="_"> </span>=<span class="_"> </span>sentence.split(&apos;<span class="_"> </span>&apos;)</div><div class="t m0 x87 h3b y1423 ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>word<span class="_"> </span>in<span class="_"> </span>sentence:</div><div class="t m0 x36 h3b y1424 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>len(word)<span class="_"> </span>&gt;<span class="_"> </span>10:</div><div class="t m0 xe6 h3b y1425 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>True</div><div class="t m0 x87 h3b y1426 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>False</div><div class="t m0 x35 h15 y1427 ff4 fsb fc3 sc0 ls2d wsa1">The edges are arrows that fo<span class="ls1c ws24e">llow the different execution paths your code can take.</span></div><div class="t m0 x35 h15 y1428 ff4 fsb fc3 sc0 ls35 ws5b0">Cyclomatic complexity, <span class="_ _0"></span><span class="ff3 ls6 ws0">M<span class="ff4 ls42 ws1e5">, for a function or method is equal to the num<span class="_ _e"></span>ber of edges</span></span></div><div class="t m0 x35 h15 y1429 ff4 fsb fc3 sc0 ls42 ws19d">minus the number of nodes, <span class="ls3b ws265">plus two. You can add nodes and edges for the lines of</span></div><div class="t m0 x35 h15 y142a ff4 fsb fc3 sc0 ls2f wsf3">code that aren’t inside a cond<span class="ls25 wse5">itional block or a loop if it helps you diagram a function,</span></div><div class="t m0 x35 h15 y142b ff4 fsb fc3 sc0 ls5e ws306">but they won’t affect the overall complexi<span class="_ _e"></span><span class="ls71 ws2b4">ty—they each add <span class="_ _0"></span>one node and one edge,</span></div><div class="t m0 x35 h15 y142c ff4 fsb fc3 sc0 ls42 ws32">which cancel out in the math.</div><div class="t m0 x83 h15 y142d ff4 fsb fc3 sc0 ls3d ws2c"> The </div><div class="t m5 xd8 h24 y142e ffd fsc fc3 sc0 lsa0 ws0">has_long_wor<span class="_ _e"></span>ds</div><div class="t m0 x45 h15 y142d ff4 fsb fc3 sc0 ls38 ws26"> function has one conditional to <span class="ls20 ws51">check if the input is a string,</span></div><div class="t m0 x35 h15 y142f ff4 fsb fc3 sc0 ls6c ws8a7">a loop for each word<span class="_ _0"></span> in the sentence, and a c<span class="_ _0"></span>o<span class="ls1e ws8a8">nditional inside the loop to check if a word</span></div><div class="t m0 x35 h15 y1430 ff4 fsb fc3 sc0 ls71 ws341">is long. Its diagram is shown in figure 9.1.<span class="ls34 ws694"> By diagramming the control flow and simpli-</span></div><div class="t m0 x35 h15 y1431 ff4 fsb fc3 sc0 ls25 ws1a">fying the graph as plain nodes and edges, you can count them up and<span class="_ _0"></span> plug the results</div><div class="t m0 x35 h15 y1432 ff4 fsb fc3 sc0 ls7a ws8a9">into the cyclo<span class="_ _0"></span>matic complexi<span class="_ _0"></span>ty equa<span class="ls30 ws3bd">tion. In this case, the graph of </span></div><div class="t m5 x115 h24 y1433 ffd fsc fc3 sc0 lsa0 ws0">has_long_word<span class="_ _e"></span>s</div><div class="t m0 x9b h15 y1432 ff4 fsb fc3 sc0 ls1e ws8aa"> has</div><div class="t m0 x35 h15 y1202 ff4 fsb fc3 sc0 ls3a ws1e0">8 nodes with 10 edges, so its complexity is <span class="_ _0"></span><span class="ff3 ls6 ws0">M<span class="ff4 lsb1 ws1d3"> = </span>E<span class="ff4 ls25 ws1e1"> - </span>N<span class="ff4 ls66 ws69"> + 2 = 10 - 8 + 2 = 4.</span></span></div><div class="t m0 x83 h20 y2ea ffb fs7 fc4 sc0 ls6 ws0">Listing<span class="_"> </span>9.1<span class="_ _55"> </span>A function with conditionals and a loop</div><div class="c xb3 y1434 wab h56"><div class="t m0 x12e h14 y68d ff12 fs7 fcb sc0 lsff ws504">Splits wo<span class="ff13 ls6 ws0">r</span><span class="ls170 ws8ab">ds i<span class="ff13 ls6 ws0">n</span><span class="ls10e ws8ac"> se<span class="ff13 ls6 ws0">n<span class="ff12 lsd2">te</span>n</span><span class="lsee ws8ad">ce if </span></span></span></div><div class="t m0 x12e h14 y1435 ff12 fs7 fcb sc0 lsdb ws2ab">it’s a st<span class="ff13 ls6 ws0">r<span class="_ _0"></span><span class="ff12">i<span class="ff13">n</span><span class="lsdd ws4">g (co</span><span class="ff13">n</span><span class="lsd3">ditio</span><span class="ff13">n</span><span class="ls170">al)</span></span></span></div></div><div class="c x1f y1436 wab h56"><div class="t m0 x12e h14 y1437 ff12 fs7 fcb sc0 lsf2 ws65e">Does wo<span class="ff13 ls6 ws0">r</span><span class="lsdb ws8ae">k fo<span class="ff13 ls6 ws0">r</span><span class="ls10a ws470"> each wo<span class="ff13 ls6 ws0">r</span><span class="ls10d ws35b">d (loop)</span></span></span></div></div><div class="c x3b y1438 wac hb3"><div class="t m0 x42 h14 yf2d ff12 fs7 fcb sc0 lse0 ws0">Retu<span class="ff13 ls103">rn</span><span class="ls119 ws8af">s T</span><span class="ff13 ls6">r</span><span class="ls140 ws8b0">ue if a lo</span><span class="ff13 ls6">n</span><span class="ls100 ws8b1">g wo</span><span class="ff13 ls6">r</span><span class="lsec">d </span></div><div class="t m0 x42 h14 y936 ff12 fs7 fcb sc0 ls103 ws31b">is fou<span class="ff13 ls6 ws0">n</span><span class="ls102 ws319">d (co<span class="ff13 ls6 ws0">n<span class="ff12 lsd5">ditio</span>n<span class="ff12 ls170">al)</span></span></span></div></div><div class="c x2 yf2b w7b h11e"><div class="t m0 x128 h14 y658 ff12 fs7 fcb sc0 lsd3 ws0">Retu<span class="ff13 ls123">rn</span><span class="ls10e">s </span></div><div class="t m0 x128 h14 y659 ff12 fs7 fcb sc0 lsd5 ws2a6">False if </div><div class="t m0 x128 h14 y65a ff13 fs7 fcb sc0 ls6 ws0">n<span class="ff12 ls140 ws5ad">o wo</span>r<span class="ff12 ls170">ds </span></div><div class="t m0 x128 h14 y1439 ff12 fs7 fcb sc0 ls88 ws0">we<span class="ff13 ls6">r<span class="ff12 ws3a5">e lo</span>n<span class="ff12">g</span></span></div></div><div class="c x19 y143a wad h11f"><div class="t m0 x1b h120 y143b ff11 fs2d fc12 sc0 ls6 ws0">Start<span class="_ _e6"></span>Start</div><div class="t m0 x143 h121 y143c ff15 fs2d fc12 sc0 ls6 ws0">words = sentence.split(&apos; &apos;)</div><div class="t m0 x148 h121 y143d ff15 fs2d fc12 sc0 ls6 ws0">for word in words<span class="_ _e7"></span>for word in words</div><div class="t m0 x12c h120 y143e ff11 fs2d fc12 sc0 ls201 ws0">Repeat/end<span class="ff15 ls6"> for<span class="_ _42"></span><span class="ff11 ls201">Repeat/end<span class="ff15 ls6"> for<span class="_ _e8"> </span><span class="ws8b2">Return True<span class="_ _e9"></span>Return True</span></span></span></span></div><div class="t m0 x35 h121 y143f ff15 fs2d fc12 sc0 ls6 ws0">return False<span class="_ _ea"></span>return False</div><div class="t m0 x13a h121 y1440 ff15 fs2d fc12 sc0 ls6 ws0">if isinstance(sentence, str)<span class="_ _eb"></span>if isinstance(sentence, str)</div><div class="t m0 x3 h121 y1441 ff15 fs2d fc12 sc0 ls6 ws0">if len(word) &gt; 10<span class="_ _e7"></span>if len(word) &gt; 10</div><div class="t m0 x0 h122 y1442 ff12 fs2e fc12 sc0 ls6 ws0">If </div><div class="t m0 xc7 h123 y1443 ff1e fs2f fc12 sc0 ls6 ws0">sentence</div><div class="t m0 xc1 h122 y1442 ff12 fs2e fc12 sc0 ls6 ws0"> is</div><div class="t m0 x0 h122 y1444 ff12 fs2e fc12 sc0 ls6 ws0">already a list, use</div><div class="t m0 x0 h122 y1445 ff12 fs2e fc12 sc0 ls6 ws0">it as the value</div><div class="t m0 x0 h122 y1446 ff12 fs2e fc12 sc0 ls6 ws0">for </div><div class="t m0 xb7 h123 y1447 ff1e fs2f fc12 sc0 ls6 ws0">words</div><div class="t m0 x149 h122 y1448 ff12 fs2e fc12 sc0 ls6 ws0">.</div><div class="t m0 x0 h122 y1442 ff12 fs2e fc12 sc0 ls6 ws0">If </div><div class="t m0 xc7 h123 y1443 ff1e fs2f fc12 sc0 ls6 ws0">sentence</div><div class="t m0 xc1 h122 y1442 ff12 fs2e fc12 sc0 ls6 ws0"> is</div><div class="t m0 x0 h122 y1444 ff12 fs2e fc12 sc0 ls6 ws0">already a list, use</div><div class="t m0 x0 h122 y1445 ff12 fs2e fc12 sc0 ls6 ws0">it as the value</div><div class="t m0 x0 h122 y1446 ff12 fs2e fc12 sc0 ls6 ws0">for </div><div class="t m0 xb7 h123 y1447 ff1e fs2f fc12 sc0 ls6 ws0">words</div><div class="t m0 x149 h122 y1448 ff12 fs2e fc12 sc0 ls6 ws0">.</div><div class="t m0 xb6 h122 y1449 ff12 fs2e fc12 sc0 ls202 ws0">If </div><div class="t m0 x13d h123 y144a ff1e fs2f fc12 sc0 ls6 ws0">sentence</div><div class="t m0 xa5 h122 y1449 ff12 fs2e fc12 sc0 ls6 ws0"> is a</div><div class="t m0 xb6 h122 y144b ff12 fs2e fc12 sc0 ls6 ws0">string, split it up</div><div class="t m0 xb6 h122 y144c ff12 fs2e fc12 sc0 ls6 ws0">by the spaces</div><div class="t m0 xb6 h122 y144d ff12 fs2e fc12 sc0 ls6 ws0">between words.</div><div class="t m0 xb6 h122 y1449 ff12 fs2e fc12 sc0 ls202 ws0">If </div><div class="t m0 x13d h123 y144a ff1e fs2f fc12 sc0 ls6 ws0">sentence</div><div class="t m0 xa5 h122 y1449 ff12 fs2e fc12 sc0 ls6 ws0"> is a</div><div class="t m0 xb6 h122 y144b ff12 fs2e fc12 sc0 ls6 ws0">string, split it up</div><div class="t m0 xb6 h122 y144c ff12 fs2e fc12 sc0 ls6 ws0">by the spaces</div><div class="t m0 xb6 h122 y144d ff12 fs2e fc12 sc0 ls6 ws0">between words.</div><div class="t m0 x0 h122 y144e ff12 fs2e fc12 sc0 ls6 ws0">Each loop, if a word</div><div class="t m0 x0 h122 y144f ff12 fs2e fc12 sc0 ls6 ws0">has length </div><div class="t m0 x149 h124 y1450 ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xbd h122 y1451 ff12 fs2e fc12 sc0 ls6 ws0">0 or more,</div><div class="t m0 x0 h122 y1452 ff12 fs2e fc12 sc0 ls6 ws0">returns immediately<span class="_ _1c"></span>.</div><div class="t m0 x0 h122 y1453 ff12 fs2e fc12 sc0 ls6 ws0">Other<span class="_ _e"></span>wise, continue</div><div class="t m0 x0 h122 y1454 ff12 fs2e fc12 sc0 ls6 ws0">looping.</div><div class="t m0 x0 h122 y144e ff12 fs2e fc12 sc0 ls6 ws0">Each loop, if a word</div><div class="t m0 x0 h122 y1451 ff12 fs2e fc12 sc0 ls6 ws0">has length </div><div class="t m0 x149 h124 y1450 ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xbd h122 y1451 ff12 fs2e fc12 sc0 ls6 ws0">0 or more,</div><div class="t m0 x0 h122 y1452 ff12 fs2e fc12 sc0 ls6 ws0">returns immediately<span class="_ _1c"></span>.</div><div class="t m0 x0 h122 y1453 ff12 fs2e fc12 sc0 ls6 ws0">Other<span class="_ _e"></span>wise, continue</div><div class="t m0 x0 h122 y1454 ff12 fs2e fc12 sc0 ls6 ws0">looping.</div><div class="t m0 x0 h122 y1455 ff12 fs2e fc12 sc0 ls6 ws0">If the end of the</div><div class="t m0 x0 h122 y1456 ff12 fs2e fc12 sc0 ls6 ws0">loop is reached</div><div class="t m0 x0 h122 y1457 ff12 fs2e fc12 sc0 ls6 ws0">(there aren’t any</div><div class="t m0 x0 h122 y1458 ff12 fs2e fc12 sc0 ls6 ws0">words left), return</div><div class="t m0 x0 h123 y1459 ff1e fs2f fc12 sc0 ls6 ws0">False</div><div class="t m0 xfd h122 y145a ff12 fs2e fc12 sc0 ls6 ws0">.</div><div class="t m0 x0 h122 y1455 ff12 fs2e fc12 sc0 ls6 ws0">If the end of the</div><div class="t m0 x0 h122 y1456 ff12 fs2e fc12 sc0 ls6 ws0">loop is reached</div><div class="t m0 x0 h122 y1457 ff12 fs2e fc12 sc0 ls6 ws0">(there aren’t any</div><div class="t m0 x0 h122 y1458 ff12 fs2e fc12 sc0 ls6 ws0">words left), return</div><div class="t m0 x0 h123 y1459 ff1e fs2f fc12 sc0 ls6 ws0">False</div><div class="t m0 xfd h122 y145a ff12 fs2e fc12 sc0 ls6 ws0">.</div><div class="t m0 x4c h122 y144b ff12 fs2e fc12 sc0 ls6 ws0">Visualizing the control</div><div class="t m0 x4c h122 y144c ff12 fs2e fc12 sc0 ls6 ws0">flow as nodes and edges</div><div class="t m0 x4c h122 y144d ff12 fs2e fc12 sc0 ls6 ws0">of a graph</div><div class="t m0 x4c h122 y144b ff12 fs2e fc12 sc0 ls6 ws0">Visualizing the control</div><div class="t m0 x4c h122 y144c ff12 fs2e fc12 sc0 ls6 ws0">flow as nodes and edges</div><div class="t m0 x4c h122 y144d ff12 fs2e fc12 sc0 ls6 ws0">of a graph</div><div class="t m0 xa5 h122 y145b ff12 fs2e fc12 sc0 ls6 ws0">There are 8 nodes and </div><div class="t m0 x147 h124 y145c ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xe9 h122 y145b ff12 fs2e fc12 sc0 ls6 ws0">0 edges</div><div class="t m0 xa5 h122 y145d ff12 fs2e fc12 sc0 ls6 ws0">between them. The cyclomatic complexity<span class="_ _1c"></span>,</div><div class="t m0 xa5 h122 y145e ff12 fs2e fc12 sc0 ls6 ws0">                  + 2, is     <span class="_ _e"></span>= </div><div class="t m0 x14a h124 y145f ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xcb h122 y1460 ff12 fs2e fc12 sc0 ls6 ws0">0 – 8 + 2 = 4.</div><div class="t m0 xa5 h122 y145b ff12 fs2e fc12 sc0 ls6 ws0">There are 8 nodes and </div><div class="t m0 x147 h124 y145c ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xe9 h122 y145b ff12 fs2e fc12 sc0 ls6 ws0">0 edges</div><div class="t m0 xa5 h122 y145d ff12 fs2e fc12 sc0 ls6 ws0">between them. The cyclomatic complexity<span class="_ _1c"></span>,</div><div class="t m0 xa5 h122 y145e ff12 fs2e fc12 sc0 ls6 ws0">                  + 2, is     <span class="_ _e"></span>= </div><div class="t m0 x14a h124 y145f ff1b fs2f fc12 sc0 ls6 ws0">1</div><div class="t m0 xcb h122 y1460 ff12 fs2e fc12 sc0 ls6 ws0">0 – 8 + 2 = 4.</div><div class="t md xa5 h125 y1461 ff12 fs30 fc12 sc0 ls6 ws0">M = E – N<span class="_ _ec"></span>M = E – N<span class="_ _ed"> </span>M<span class="_ _ee"></span>M</div></div><div class="t m0 x19 h2b y629 ffb fs18 fc11 sc0 ls6 ws0">Figure 9.1</div><div class="t m3 x0 h3a y629 ff8 fs18 fc11 sc0 ls6 ws0"> </div><div class="t m0 x3c h2b y629 ffb fs18 fc11 sc0 ls6 ws0">Diagramming control flow to <span class="_ _e"></span>measure cyclomatic complexity</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
