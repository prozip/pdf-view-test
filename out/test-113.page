<div id="pf71" class="pf w0 h0" data-page-no="71"><div class="pc pc71 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg71.png"/><div class="t m0 xbf h14 y80 ff7 fs7 fcb sc0 ls6 ws0">89<span class="_ _99"></span><span class="ffa">Unit testing with unittest</span></div><div class="t m0 x35 h15 y40 ff4 fsb fc3 sc0 ls4e ws646">If you want to test the </div><div class="t m5 xbe h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">transform_name<span class="_ _e"></span>_for_sku</div><div class="t m0 x113 h15 y40 ff4 fsb fc3 sc0 ls194 ws393"> method fr<span class="_ _0"></span>om the </div><div class="t m5 x9d h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">Product</div><div class="t m0 x10a h15 y40 ff4 fsb fc3 sc0 ls2d ws211"> class, this</div><div class="t m0 x35 h15 y41 ff4 fsb fc3 sc0 ls14a ws4cb">recipe b<span class="_ _e"></span>ecomes</div><div class="t m0 x8a h3d yb6c ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x48 h15 y141 ff4 fsb fc3 sc0 ls31 ws25">Create an instance of </div><div class="t m5 x46 h24 yb6d ffd fsc fc3 sc0 lsa0 ws0">Product</div><div class="t m0 xa5 h15 y141 ff4 fsb fc3 sc0 ls47 ws54"> with a name, <span class="_ _e"></span>size, and color.</div><div class="t m0 x8a h3d yb6e ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x48 h15 yb6f ff4 fsb fc3 sc0 ls48 ws647">Observe that </div><div class="t m5 xb9 h24 yb70 ffd fsc fc3 sc0 lsa0 ws0">transform_n<span class="_ _e"></span>ame_for_sku</div><div class="t m0 xeb h15 yb6f ff4 fsb fc3 sc0 ls2c ws648"> returns </div><div class="t m5 x49 h24 yb70 ffd fsc fc3 sc0 lsa0 ws0">name.upper()</div><div class="t m0 xd4 h15 yb6f ff4 fsb fc3 sc0 ls5e ws649">; the expected</div><div class="t m0 x48 h15 yae0 ff4 fsb fc3 sc0 ls36 ws35">result is the name in uppercase.</div><div class="t m0 x8a h3d yb71 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x48 h15 yae3 ff4 fsb fc3 sc0 ls3d ws27e">Call the </div><div class="t m5 xad h24 yb72 ffd fsc fc3 sc0 lsa0 ws0">Product</div><div class="t m0 xe2 h15 yae3 ff4 fsb fc3 sc0 ls38 ws23e"> instance’s </div><div class="t m5 xd0 h24 yb72 ffd fsc fc3 sc0 lsa0 ws0">transform_nam<span class="_ _e"></span>e_for_sku</div><div class="t m0 x7a h15 yae3 ff4 fsb fc3 sc0 lsaf ws0"> m<span class="_ _1c"></span>e<span class="_ _1d"></span>t<span class="_ _1c"></span>h<span class="_ _1c"></span>o<span class="_ _1d"></span>d<span class="_ _1c"></span> a<span class="_ _1d"></span>n<span class="_ _1c"></span>d<span class="_ _1c"></span> s<span class="_ _1d"></span>a<span class="_ _1c"></span>v<span class="_ _1c"></span>e<span class="_ _1d"></span> i<span class="_ _1c"></span>t<span class="_ _1c"></span> i<span class="_ _1d"></span>n<span class="_ _1c"></span> a</div><div class="t m0 x48 h15 y693 ff4 fsb fc3 sc0 ls42 ws0">variable.</div><div class="t m0 x8a h3d yb73 ffb fs1e fca sc0 ls6 ws0">4</div><div class="t m0 x48 h15 yb74 ff4 fsb fc3 sc0 ls1c ws10">Compare the expected result to the<span class="_ _e"></span> saved actual result.</div><div class="t m0 x35 h15 y6ce ff4 fsb fc3 sc0 ls3b ws1ee">You can write the first three steps <span class="ls6b ws64a">using regular code for creating a </span></div><div class="t m5 x99 h24 yb75 ffd fsc fc3 sc0 lsa0 ws0">Product</div><div class="t m0 xfc h15 y6ce ff4 fsb fc3 sc0 ls44 ws593"> instance</div><div class="t m0 x35 h15 y6cf ff4 fsb fc3 sc0 ls3e ws13c">and getting the value of </div><div class="t m5 xf1 h24 y941 ffd fsc fc3 sc0 lsa0 ws0">transform_nam<span class="_ _e"></span>e_for_sku</div><div class="t m0 xf0 h15 y6cf ff4 fsb fc3 sc0 ls21 ws64b">. Using an </div><div class="t m5 x7a h24 y941 ffd fsc fc3 sc0 lsa0 ws0">assert</div><div class="t m0 x95 h15 y6cf ff4 fsb fc3 sc0 ls71 ws2d4"> statement for the</div><div class="t m0 x35 h15 y39e ff4 fsb fc3 sc0 ls5e ws57">fourth step would work, but </div><div class="t m5 x8f h24 yb76 ffd fsc fc3 sc0 lsa0 ws0">AssertionEr<span class="_ _e"></span>ror</div><div class="t m0 x5f h15 y39e ff4 fsb fc3 sc0 ls6c ws2c7"> doesn’t provid<span class="_ _0"></span>e much<span class="ls6d ws71"> information<span class="_ _e"></span> in its</span></div><div class="t m0 x35 h15 y39f ff4 fsb fc3 sc0 ls30 ws12c">traceback by default. This is where <span class="_ _e"></span>the cust<span class="ls3a wse4">om assertion methods in<span class="ls2d ws15b"> unittest come into</span></span></div><div class="t m0 x35 h15 yb77 ff4 fsb fc3 sc0 ls1c ws151">play. The most common one to use for comparing two values is </div><div class="t m5 x115 h24 yb78 ffd fsc fc3 sc0 lsa0 ws0">assertEqual</div><div class="t m0 xda h15 yb77 ff4 fsb fc3 sc0 ls192 ws64c">, which</div><div class="t m0 x35 h15 y3a1 ff4 fsb fc3 sc0 ls31 ws64d">accepts expected and actual values<span class="ws2d3"> as arguments. It raises an </span></div><div class="t m5 x5c h24 yb79 ffd fsc fc3 sc0 lsa0 ws0">AssertionErro<span class="_ _e"></span>r</div><div class="t m0 xcf h15 y3a1 ff4 fsb fc3 sc0 ls195 ws495"> and</div><div class="t m0 x35 h15 y6d1 ff4 fsb fc3 sc0 ls38 ws1a9">provides additional information showing the <span class="ls47 ws2f5">difference between the<span class="_ _e"></span> two values if they</span></div><div class="t m0 x35 h15 y6d2 ff4 fsb fc3 sc0 ls44 ws34">aren’t equal. This added context can <span class="ls1e ws16">help you find issu<span class="ls31 ws25">es more easily.</span></span></div><div class="t m0 x83 h15 y6d3 ff4 fsb fc3 sc0 ls6c ws6f"> Here’s what the test mi<span class="_ _0"></span>ght look like on a first pass:</div><div class="t m0 x35 h3b yb7a ffd fs18 fc3 sc0 lsb2 ws0">import<span class="_"> </span>unittest</div><div class="t m0 x35 h3b yb7b ffd fs18 fc3 sc0 lsb2 ws0">from<span class="_"> </span>product<span class="_"> </span>import<span class="_"> </span>Product</div><div class="t m0 x35 h3b y9ef ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>ProductTestCase(unittest.TestCase):</div><div class="t m0 x87 h3b yb7c ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>test_transform_name_for_sku(self):</div><div class="t m0 x36 h3b y9f0 ffd fs18 fc3 sc0 lsb2 ws0">small_black_shoes<span class="_"> </span>=<span class="_"> </span>Product(&apos;shoes&apos;,<span class="_"> </span>&apos;S&apos;,<span class="_"> </span>&apos;black&apos;)</div><div class="t m0 x36 h3b y9f1 ffd fs18 fc3 sc0 lsb2 ws0">expected_value<span class="_"> </span>=<span class="_"> </span>&apos;SHOES&apos;</div><div class="t m0 x36 h3b y9f2 ffd fs18 fc3 sc0 lsb2 ws0">actual_value<span class="_"> </span>=<span class="_"> </span>small_black_shoes.transform_name_for_sku()</div><div class="t m0 x36 h3b y9f3 ffd fs18 fc3 sc0 lsb2 ws0">self.assertEqual(expected_value,<span class="_"> </span>actual_value)</div><div class="c x84 yb7d w47 hb0"><div class="t m0 x42 h14 yb7e ff12 fs7 fcb sc0 ls6 ws0">P<span class="ff13">r</span><span class="lsde">epa</span><span class="ff13">r</span><span class="ls12f ws64e">es the setup fo</span><span class="ff13">r</span></div><div class="t m0 x128 h14 yb7f ff12 fs7 fcb sc0 ls6 ws0">t<span class="ff13">r</span>a<span class="ff13">n</span><span class="ls10e">sfo<span class="ff13 ls103">rm</span></span>_<span class="ff13">n</span>a<span class="ff13">m</span><span class="lsd9">e_fo</span><span class="ff13">r</span><span class="lsee ws2cf">_sku: the</span></div><div class="t m0 xbd h14 yb80 ff12 fs7 fcb sc0 ls6 ws0">p<span class="ff13">r</span><span class="lsda ws311">oduct with its att</span><span class="ff13">r</span><span class="lsd3">ibut<span class="_ _0"></span>es</span></div></div><div class="c x129 yb81 w48 h6e"><div class="t m0 xf9 h14 yb82 ff12 fs7 fcb sc0 ls11a ws3a4">States the</div><div class="t m0 x124 h14 yb83 ff12 fs7 fcb sc0 ls13c ws0">expected</div><div class="t m0 x100 h14 yb84 ff13 fs7 fcb sc0 ls6 ws0">r<span class="ff12 ls125 ws3cc">esult fo</span>r</div><div class="t m0 x12a h14 yb85 ff12 fs7 fcb sc0 lse1 ws0">ge<span class="ff13 ls6">n<span class="ff12">e</span>r</span><span class="lsda">ate_sku</span></div><div class="t m0 xfb h14 yb86 ff12 fs7 fcb sc0 lsdc ws2ac">with the</div><div class="t m0 x12b h14 yb87 ff12 fs7 fcb sc0 ls170 ws0">give<span class="ff13 ls6">n</span><span class="lsdd"> i<span class="ff13 ls6">n</span><span class="ls106">puts</span></span></div></div><div class="c x53 yb88 w49 hb0"><div class="t m0 xbc h14 yb7e ff12 fs7 fcb sc0 lsd6 ws0">Obtai<span class="ff13 ls6">n<span class="ff12">s</span></span></div><div class="t m0 x1a h14 yb7f ff12 fs7 fcb sc0 ls118 ws3ce"> the actual</div><div class="t m0 xc2 h14 yb89 ff12 fs7 fcb sc0 ls6 ws0"> <span class="ff13">r</span><span class="ls10a ws339">esult of</span></div><div class="t m0 x12c h14 yb8a ff12 fs7 fcb sc0 lsdd ws0">ge<span class="ff13 ls6">n<span class="ff12">e</span>r</span><span class="lsd6">ate_</span></div><div class="t m0 x3c h14 yb8b ff12 fs7 fcb sc0 ls28 ws64f">sku fo<span class="ff13 ls6 ws0">r</span></div><div class="t m0 x7f h14 yb8c ff12 fs7 fcb sc0 ls117 ws0">co<span class="ff13 ls6">m</span><span class="lsec">pa<span class="ff13 ls6">r</span><span class="ls123">iso<span class="ff13 ls6">n</span></span></span></div></div><div class="c xd0 yb8d w3a h57"><div class="t m0 x2 h14 yb8e ff12 fs7 fcb sc0 lsdc ws650">Uses the special equality asse<span class="ff13 ls6 ws0">r<span class="ff12 ls100">tio</span>n</span></div><div class="t m0 x42 h14 yb8f ff13 fs7 fcb sc0 ls6 ws0">m<span class="ff12 lsd6 ws3da">ethod to co</span>m<span class="ff12 lsec">pa</span>r<span class="ff12 ls106 ws45d">e two values</span></div></div><div class="t m0 x35 h15 yb90 ff4 fsb fcd sc0 ls6 ws0">Running <span class="_ _f"></span>the <span class="_ _e"></span>test <span class="_ _e"></span>run<span class="_ _e"></span>ner <span class="_ _e"></span>now <span class="_ _f"></span>should <span class="_ _e"></span>still <span class="_ _e"></span>s<span class="_ _e"></span>how</div><div class="t m3 x0 h22 yb90 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x54 h24 yb90 ffd fsc fcd sc0 ls6 ws0">Ran </div><div class="t m3 x0 h25 yb90 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m4 x111 h24 yb90 ffd fsc fcd sc0 ls6 ws0">1 </div><div class="t m3 x0 h25 yb90 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m4 x41 h24 yb90 ffd fsc fcd sc0 ls6 ws0">test</div><div class="t m0 x58 h15 yb90 ff4 fsb fcd sc0 ls6 ws0">, <span class="_ _e"></span>and <span class="_ _f"></span>if <span class="_ _e"></span>the <span class="_ _f"></span>test <span class="_ _e"></span>passes <span class="_ _f"></span>(it</div><div class="t m3 x0 h22 yb90 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x35 h15 y8cf ff4 fsb fcd sc0 ls6 ws0">should), you won’t<span class="_ _e"></span> see much additional output.</div><div class="t m3 x0 h22 yb91 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m3 x0 h22 yb91 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x8a h15 yb91 ff4 fsb fcd sc0 ls6 ws0">It’s <span class="_ _e"></span>a <span class="_ _e"></span>good<span class="_ _e"></span> <span class="_ _e"></span>idea <span class="_ _e"></span>to <span class="_ _e"></span>see <span class="_ _e"></span>your <span class="_ _e"></span>tes<span class="_ _e"></span>ts <span class="_ _e"></span>fail <span class="_ _e"></span>to</div><div class="t m3 x0 h22 yb91 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x10d h15 yb91 ff4 fsb fcd sc0 ls6 ws0">verify <span class="_ _e"></span>that <span class="_ _f"></span>they’ll <span class="_ _e"></span>actually <span class="_ _e"></span>catch <span class="_ _f"></span>a <span class="_ _e"></span>problem</div><div class="t m3 x0 h22 yb91 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x35 h15 yb92 ff4 fsb fcd sc0 ls6 ws0">with <span class="_ _e"></span>your <span class="_ _e"></span>code <span class="_ _e"></span>if <span class="_ _e"></span>one ar<span class="_ _e"></span>ises. C<span class="_ _e"></span>hange t<span class="_ _e"></span>he expe<span class="_ _e"></span>cted value</div><div class="t m3 x0 h22 yb92 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x5b h24 yb93 ffd fsc fcd sc0 ls6 ws0">&apos;SHOE<span class="_ _0"></span>S&apos;</div><div class="t m3 x0 h25 yb93 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 xb4 h15 yb93 ff4 fsb fcd sc0 ls6 ws0">to</div><div class="t m3 x0 h22 yb93 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x99 h24 yb93 ffd fsc fcd sc0 ls6 ws0">&apos;SHOEZ<span class="_ _0"></span>&apos;</div><div class="t m3 x0 h25 yb93 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 x8 h15 yb93 ff4 fsb fcd sc0 ls6 ws0">and <span class="_ _e"></span>run</div><div class="t m3 x0 h22 yb93 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x35 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">the </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x1b h15 yb94 ff4 fsb fcd sc0 ls6 ws0">test </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x36 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">again. </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x28 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">Now, </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x16 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">unittest </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x59 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">will </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xb3 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">raise </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x27 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">an</div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x89 h24 yb94 ffd fsc fcd sc0 ls6 ws0">Asser<span class="_ _0"></span>tionErr<span class="_ _0"></span>or</div><div class="t m3 x0 h25 yb94 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 x7a h15 yb94 ff4 fsb fcd sc0 ls6 ws0">stating </div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x62 h15 yb94 ff4 fsb fcd sc0 ls6 ws0">that</div><div class="t m3 x0 h22 yb94 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x107 h24 yb94 ffd fsc fcd sc0 ls6 ws0">&apos;SHOEZ<span class="_ _0"></span>&apos; </div><div class="t m3 x0 h25 yb94 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m4 xbf h24 yb94 ffd fsc fcd sc0 ls6 ws0">!=</div><div class="t m4 x35 h24 yb95 ffd fsc fcd sc0 ls6 ws0">&apos;SHOE<span class="_ _0"></span>S&apos;</div><div class="t m0 xd8 h15 yb95 ff4 fsb fcd sc0 ls6 ws0">:</div><div class="t m0 x35 h3b yb96 ffd fs18 fcd sc0 ls6 ws0">$</div><div class="t m3 x0 h3a yb96 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 xae h3b yb96 ffd fs18 fcd sc0 ls6 ws0">python</div><div class="t m3 x0 h3a yb96 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x15 h3b yb96 ffd fs18 fcd sc0 ls6 ws0">-m</div><div class="t m3 x0 h3a yb96 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 xe6 h3b yb96 ffd fs18 fcd sc0 ls6 ws0">unittest</div><div class="t m0 x35 h3b yb97 ffd fs18 fcd sc0 ls6 ws0">F</div><div class="t m0 x35 h3b yb98 ffd fs18 fcd sc0 ls6 ws0">==========================<span class="_ _e"></span>============================================</div><div class="t m0 x35 h3b yb99 ffd fs18 fcd sc0 ls6 ws0">FAIL:</div><div class="t m3 x0 h3a yb99 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x97 h3b yb99 ffd fs18 fcd sc0 ls6 ws0">test_transform_name_for_sk<span class="_ _e"></span>u</div><div class="t m3 x0 h3a yb99 ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x6b h3b yb99 ffd fs18 fcd sc0 ls6 ws0">(test_product.Product<span class="_ _e"></span>TestCase)</div><div class="t m0 x35 h3b yb9a ffd fs18 fcd sc0 ls6 ws0">--------------------------<span class="_ _e"></span>--------------------------------------------</div><div class="t m3 x0 h3a yb9a ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x35 h3b yb9b ffd fs18 fcd sc0 ls6 ws0">Traceback</div><div class="t m3 x0 h3a yb9b ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x1c h3b yb9b ffd fs18 fcd sc0 ls6 ws0">(most</div><div class="t m3 x0 h3a yb9b ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x66 h3b yb9b ffd fs18 fcd sc0 ls6 ws0">recent</div><div class="t m3 x0 h3a yb9b ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 xb6 h3b yb9b ffd fs18 fcd sc0 ls6 ws0">call</div><div class="t m3 x0 h3a yb9b ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x11 h3b yb9b ffd fs18 fcd sc0 ls6 ws0">last):</div><div class="t m0 xae h3b yb9c ffd fs18 fcd sc0 ls6 ws0">File</div><div class="t m3 x0 h3a yb9c ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x90 h3b yb9c ffd fs18 fcd sc0 ls6 ws0">&quot;/Users/dhillard/test/test_prod<span class="_ _e"></span>uct.py&quot;,</div><div class="t m3 x0 h3a yb9c ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x3e h3b yb9c ffd fs18 fcd sc0 ls6 ws0">line</div><div class="t m3 x0 h3a yb9c ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x104 h3b yb9c ffd fs18 fcd sc0 ls6 ws0">11,</div><div class="t m3 x0 h3a yb9c ff8 fs18 fcd sc0 ls6 ws0"> </div><div class="t m0 x6f h3b yb9c ffd fs18 fcd sc0 ls6 ws0">in</div><div class="t m0 x35 h51 yb9d ff9 fs15 fc10 sc0 ls6 ws0">➥</div><div class="t m3 x0 h52 yb9d ff8 fs15 fc10 sc0 ls6 ws0"> </div><div class="t m0 x83 h3b yb9e ffd fs18 fcd sc0 ls6 ws0">test_transform_name_for_sk<span class="_ _e"></span>u</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
