<div id="pf6f" class="pf w0 h0" data-page-no="6f"><div class="pc pc6f w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg6f.png"/><div class="t m0 xbf h14 y80 ff7 fs7 fcb sc0 ls6 ws0">87<span class="_ _99"></span><span class="ffa">Unit testing with unittest</span></div><div class="t m0 x35 h15 y40 ff4 fsb fc3 sc0 ls38 ws460">those. You learned to use cohesion, namesp<span class="ls3a ws63f">acing, and separation<span class="wsee"> of concerns for</span></span></div><div class="t m0 x35 h15 y41 ff4 fsb fc3 sc0 ls2d ws31">code, and you can apply the same ideas to tests. </div><div class="t m0 x19 h26 yb2b ffc fs15 fc2 sc0 ls11f ws0">5<span class="_ _0"></span>.<span class="_ _1d"></span>4.<span class="_ _1d"></span>2<span class="_ _5f"> </span>Running tests wit<span class="_ _0"></span>h unittest</div><div class="t m0 x35 h15 y44 ff4 fsb fc3 sc0 ls38 ws9e">Unittest provides a test runner that you can use by typing </div><div class="t m5 x5b h24 y9b8 ffd fsc fc3 sc0 lsa0 ws640">python -m unitte<span class="_ _e"></span>st</div><div class="t m0 x2c h15 y44 ff4 fsb fc3 sc0 lsf8 ws641"> in your</div><div class="t m0 x35 h15 y45 ff4 fsb fc3 sc0 ls3d ws2c">terminal. When you run the unittest <span class="_ _e"></span>te<span class="ls3e ws4a">st runner, it will<span class="ls42 ws32"> look for tests by</span></span></div><div class="t m0 x8a h3d yb2c ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x48 h15 y145 ff4 fsb fc3 sc0 ls1e ws96">Looking in the current directory (and <span class="ls3a ws74">any subdirectories) for modules named</span></div><div class="t m5 x48 h24 yb2d ffd fsc fc3 sc0 lsa0 ws0">test_*</div><div class="t m0 x38 h15 y146 ff4 fsb fc3 sc0 ls30 ws36"> or </div><div class="t m5 x7e h24 yb2d ffd fsc fc3 sc0 lsa0 ws0">*_test</div><div class="t m0 x8a h3d yb2e ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x48 h15 yb2f ff4 fsb fc3 sc0 ls3a ws28">Looking in those modules for classes that inherit <span class="_ _e"></span>from </div><div class="t m5 x123 h24 yb30 ffd fsc fc3 sc0 lsa0 ws0">unittest.Te<span class="_ _e"></span>stCase</div><div class="t m0 x8a h3d yb31 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x48 h15 y343 ff4 fsb fc3 sc0 ls42 ws32">Looking in those classes for methods that<span class="_ _e"></span> start with </div><div class="t m5 x4a h24 yb32 ffd fsc fc3 sc0 lsa0 ws0">test_</div><div class="t m0 x35 h15 y695 ff4 fsb fc3 sc0 ls3b ws4b0">Some people like<span class="_ _e"></span> to put their tests as close <span class="lsbf ws0">to<span class="_ _0"></span> t<span class="_ _0"></span>he<span class="_ _0"></span> re<span class="_ _1d"></span>le<span class="_ _0"></span>va<span class="_ _1d"></span>nt c<span class="_ _1d"></span>ode<span class="_ _1d"></span> as p<span class="_ _1d"></span>oss<span class="_ _1d"></span>ibl<span class="_ _1d"></span>e, m<span class="_ _1d"></span>aki<span class="_ _1d"></span>ng i<span class="_ _1d"></span>t</span></div><div class="t m0 x35 h15 y696 ff4 fsb fc3 sc0 ls71 ws483">easier to find tests for a part<span class="ls4b ws642">icular mo<span class="_ _e"></span>dule of interest. <span class="_ _e"></span>Others like to put all<span class="_ _e"></span> their tests</span></div><div class="t m0 x35 h15 y255 ff4 fsb fc3 sc0 ls2f ws1c8">in a tests/ directory that lives at the root <span class="ls48 ws4a5">of their project to k<span class="ls3d ws13d">eep them separate from</span></span></div><div class="t m0 x35 h15 y256 ff4 fsb fc3 sc0 ls2d ws408">the code. I’ve done it both ways and don’t <span class="ls7d ws5ed">have a <span class="_ _e"></span>strong preference myself. Do what</span></div><div class="t m0 x35 h15 y698 ff4 fsb fc3 sc0 ls1b ws40">works for you<span class="_ _e"></span>, your team, or the communit<span class="_ _e"></span>y you’re writing software with. </div><div class="t m0 x19 h26 yb33 ffc fs15 fc2 sc0 ls142 ws47e">5<span class="_ _0"></span>.<span class="_ _0"></span>4<span class="_ _0"></span>.<span class="_ _0"></span>3<span class="_ _11"> </span>Writing your first test with unittest</div><div class="t m0 x35 h15 y276 ff4 fsb fc3 sc0 ls5e ws36b">Now that you’ve got an idea of how unittest<span class="ls20 ws1ca"> does things, you need something to test<span class="_ _e"></span>.</span></div><div class="t m0 x35 h15 y3fd ff4 fsb fc3 sc0 ls38 ws26">The following listing lays out a class yo<span class="ls1e ws16">u’ll use to get some<span class="ls42 ws32"> testing practice.</span></span></div><div class="t m0 x35 h3b yb34 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Product:</div><div class="t m0 x87 h3b yb35 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self,<span class="_"> </span>name,<span class="_"> </span>size,<span class="_"> </span>color):</div><div class="t m0 x36 h3b yb36 ffd fs18 fc3 sc0 lsb2 ws0">self.name<span class="_"> </span>=<span class="_"> </span>name</div><div class="t m0 x36 h3b yb37 ffd fs18 fc3 sc0 lsb2 ws0">self.size<span class="_"> </span>=<span class="_"> </span>size</div><div class="t m0 x36 h3b yb38 ffd fs18 fc3 sc0 lsb2 ws0">self.color<span class="_"> </span>=<span class="_"> </span>color</div><div class="t m0 x87 h3b yb39 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>transform_name_for_sku(self):</div><div class="t m0 x36 h3b yb3a ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>self.name.upper()</div><div class="t m0 x87 h3b yb3b ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>transform_color_for_sku(self):</div><div class="t m0 x36 h3b yb3c ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>self.color.upper()</div><div class="t m0 x87 h3b yb3d ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>generate_sku(self):</div><div class="t m0 x36 h3b y4fe ffd fs18 fc3 sc0 lsb2 ws0">&quot;&quot;&quot;</div><div class="t m0 x36 h3b yb3e ffd fs18 fc3 sc0 lsb2 ws0">Generates<span class="_"> </span>a<span class="_"> </span>SKU<span class="_"> </span>for<span class="_"> </span>this<span class="_"> </span>product.</div><div class="t m0 x36 h3b yb3f ffd fs18 fc3 sc0 lsb2 ws0">Example:</div><div class="t m0 xe6 h3b y500 ffd fs18 fc3 sc0 lsb2 ws0">&gt;&gt;&gt;<span class="_"> </span>small_black_shoes<span class="_"> </span>=<span class="_"> </span>Product(&apos;shoes&apos;,<span class="_"> </span>&apos;S&apos;,<span class="_"> </span>&apos;black&apos;)</div><div class="t m0 xe6 h3b yb40 ffd fs18 fc3 sc0 lsb2 ws0">&gt;&gt;&gt;<span class="_"> </span>small_black_shoes.generate_sku()</div><div class="t m0 xe6 h3b yb41 ffd fs18 fc3 sc0 lsb2 ws0">&apos;SHOES-S-BLACK&apos;</div><div class="t m0 x36 h3b yb42 ffd fs18 fc3 sc0 lsb2 ws0">&quot;&quot;&quot;</div><div class="t m0 x36 h3b y502 ffd fs18 fc3 sc0 lsb2 ws0">name<span class="_"> </span>=<span class="_"> </span>self.transform_name_for_sku()</div><div class="t m0 x36 h3b y503 ffd fs18 fc3 sc0 lsb2 ws0">color<span class="_"> </span>=<span class="_"> </span>self.transform_color_for_sku()</div><div class="t m0 x36 h3b yb43 ffd fs18 fc1 sc0 lsb2 ws0">return<span class="_"> </span>f&apos;{name}-{self.size}-{color}&apos;</div><div class="t m0 x17 h20 yb44 ffb fs7 fc4 sc0 ls6 ws0">A product class for an e-commerce system<span class="_ _9a"></span>Listing<span class="_"> </span>5.1</div><div class="c x113 y8aa w2c haf"><div class="t m0 xc8 h14 yb45 ff12 fs7 fcb sc0 lsdc ws2ac">The p<span class="ff13 ls6 ws0">r</span>oduct att<span class="ff13 ls6 ws0">r</span><span class="ls193 ws643">ibutes a<span class="_ _e"></span><span class="ff13 ls6 ws0">r<span class="ff12">e </span></span></span></div><div class="t m0 xc8 h14 yb46 ff12 fs7 fcb sc0 lsd5 ws2d2">specified whe<span class="ff13 ls6 ws0">n</span><span class="ls122 ws644"> a P<span class="ff13 ls6 ws0">r<span class="ff12 lsef">oduct </span></span></span></div><div class="t m0 xc8 h14 yb47 ff12 fs7 fcb sc0 ls6 ws0">i<span class="ff13">n</span><span class="lsec">sta</span><span class="ff13">n</span><span class="lsda ws2aa">ce is c</span><span class="ff13">r</span><span class="lsd6">eated.</span></div></div><div class="c xca yb48 w9 h56"><div class="t m0 x43 h14 yb49 ff12 fs7 fcb sc0 lsec ws45e">A SKU u<span class="ff13 ls6 ws0">n</span><span class="ls17f ws645">iquely ide<span class="ff13 ls6 ws0">n<span class="ff12 ls10a">tifies </span></span></span></div><div class="t m0 x43 h14 yb4a ff12 fs7 fcb sc0 lsd2 ws35c">the p<span class="ff13 ls6 ws0">r</span><span class="lsdc ws2ac">oduct att<span class="ff13 ls6 ws0">r<span class="ff12 lsd6">ibutes.</span></span></span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
