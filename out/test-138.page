<div id="pf8a" class="pf w0 h0" data-page-no="8a"><div class="pc pc8a w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg8a.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">114</div><div class="t m0 x66 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 x8e h2c y1d0 ffb fs19 fcb sc0 ls185 ws0">HAPTER</div><div class="t m0 xf1 h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 6</div><div class="t m0 xe4 h2d y80 ffa fs7 fcb sc0 ls6 ws0">Separation of concerns in practice</div><div class="t m0 x44 h30 y857 ffb fsc fc2 sc0 ls6 ws0">D</div><div class="t m0 x12c h5a y858 ffb fs20 fc2 sc0 ls1bf ws0">ELETING</div><div class="t m0 x102 h30 y857 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x97 h5a y858 ffb fs20 fc2 sc0 ls11c ws0">RECORDS</div><div class="t m0 x44 h15 y859 ff4 fsb fc3 sc0 ls3d ws232">After a bookmark has ou<span class="ls71 ws25a">tlived its usefulness,</span></div><div class="t m0 x44 h15 ye61 ff4 fsb fc3 sc0 ls81 ws738">you need a way to delete it<span class="_ _e"></span> (figure 6.5). To</div><div class="t m0 x44 h15 ye62 ff4 fsb fc3 sc0 ls30 ws6b8">delete a bookmark, you can issue a </div><div class="t m5 xb3 h24 ye63 ffd fsc fc3 sc0 lsa0 ws0">DELETE</div><div class="t m0 x44 h15 ye64 ff4 fsb fc3 sc0 ls1c ws739">statement to the database, using a </div><div class="t m5 xa9 h24 ye65 ffd fsc fc3 sc0 lsa0 ws0">WHERE</div><div class="t m0 x44 h15 ye66 ff4 fsb fc3 sc0 ls31 ws25">clause to specify a bookmark by its ID.</div><div class="t m0 x32 h15 ye67 ff4 fsb fc3 sc0 ls47 ws1ce"> In SQLite, the statement to delete the</div><div class="t m0 x44 h15 ye68 ff4 fsb fc3 sc0 ls48 ws2be">bookmark with an ID of 3 looks like this:</div><div class="t m0 x44 h3b ye69 ffd fs18 fc3 sc0 lsb2 ws0">DELETE<span class="_"> </span>FROM<span class="_"> </span>bookmarks</div><div class="t m0 x44 h3b ye6a ffd fs18 fc1 sc0 lsb2 ws0">WHERE<span class="_"> </span>ID<span class="_"> </span>=<span class="_"> </span>3;</div><div class="t m0 x44 h15 ye6b ff4 fsb fc3 sc0 ls2c ws73a">As in the </div><div class="t m5 xd8 h24 ye6c ffd fsc fc3 sc0 lsa0 ws0">create_table</div><div class="t m0 x3 h15 ye6b ff4 fsb fc3 sc0 ls4e wsae"> and </div><div class="t m5 xe4 h24 ye6c ffd fsc fc3 sc0 lsa0 ws0">add</div><div class="t m0 xfe h15 ye6b ff4 fsb fc3 sc0 ls36 ws73b"> methods,</div><div class="t m0 x44 h15 ye6d ff4 fsb fc3 sc0 ls34 ws59e">you can represent the criteria as a dictio-</div><div class="t m0 x44 h15 ye6e ff4 fsb fc3 sc0 ls1c ws739">nary that maps column names to the values you want to match. Write a </div><div class="t m5 xfc h24 ye6f ffd fsc fc3 sc0 lsa0 ws0">delete</div><div class="t m0 x44 h15 ye70 ff4 fsb fc3 sc0 ls31 ws25">method that</div><div class="t m0 xbc h3d ye71 ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x87 h15 ye72 ff4 fsb fc3 sc0 ls2d ws3eb">Accepts two arguments: the table name to<span class="ls25 ws60d"> delete records from, and a dictionary</span></div><div class="t m0 x87 h15 ye73 ff4 fsb fc3 sc0 ls51 ws218">mapping column names to the value to <span class="ls1f ws73c">match on. The c<span class="_ _0"></span>riteria should be a</span></div><div class="t m0 x87 h15 ye74 ff4 fsb fc3 sc0 ls3d ws2c">required argument, because <span class="_ _e"></span>you don’t <span class="ls44 ws53">want to delete all<span class="_ _0"></span> your records.</span></div><div class="t m0 xbc h3d ye75 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x87 h15 ye76 ff4 fsb fc3 sc0 ls6c ws2c7">Constructs a <span class="_ _0"></span>string of place<span class="_ _0"></span>holders for t<span class="_ _0"></span>he </div><div class="t m5 x51 h24 ye77 ffd fsc fc3 sc0 lsa0 ws0">WHERE</div><div class="t m0 x111 h15 ye76 ff4 fsb fc3 sc0 ls80 ws409"> clause.</div><div class="t m0 xbc h3d ye78 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x87 h15 y60a ff4 fsb fc3 sc0 ls6c ws6f">Constructs the full<span class="_ _0"></span> </div><div class="t m5 xe2 h24 ye79 ffd fsc fc3 sc0 lsa0 ws413">DELETE FROM</div><div class="t m0 xa5 h15 y60a ff4 fsb fc3 sc0 ls3a ws28"> query and executes it with </div><div class="t m5 x70 h24 ye79 ffd fsc fc3 sc0 lsa0 ws0">_execute</div><div class="t m0 x9e h15 y60a ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x44 h15 ye7a ff4 fsb fc3 sc0 ls1c ws10">Check your results against the following listing.</div><div class="t m0 x44 h3b ye7b ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>delete(self,<span class="_"> </span>table_name,<span class="_"> </span>criteria):</div><div class="t m0 x97 h3b ye7c ffd fs18 fc3 sc0 lsb2 ws0">placeholders<span class="_"> </span>=<span class="_"> </span>[f&apos;{column}<span class="_"> </span>=<span class="_"> </span>?&apos;<span class="_"> </span>for<span class="_"> </span>column<span class="_"> </span>in<span class="_"> </span>criteria.keys()]</div><div class="t m0 x97 h3b ye7d ffd fs18 fc3 sc0 lsb2 ws0">delete_criteria<span class="_"> </span>=<span class="_"> </span>&apos;<span class="_"> </span>AND<span class="_"> </span>&apos;.join(placeholders)</div><div class="t m0 x97 h3b ye7e ffd fs18 fc3 sc0 lsb2 ws0">self._execute(</div><div class="t m0 xc3 h3b ye7f ffd fs18 fc3 sc0 lsb2 ws0">f&apos;&apos;&apos;</div><div class="t m0 xc3 h3b y377 ffd fs18 fc3 sc0 lsb2 ws0">DELETE<span class="_"> </span>FROM<span class="_"> </span>{table_name}</div><div class="t m0 xc3 h3b ye80 ffd fs18 fc3 sc0 lsb2 ws0">WHERE<span class="_"> </span>{delete_criteria};</div><div class="t m0 xc3 h3b ye81 ffd fs18 fc3 sc0 lsb2 ws0">&apos;&apos;&apos;,</div><div class="t m0 xc3 h3b ye82 ffd fs18 fc3 sc0 lsb2 ws0">tuple(criteria.values()),</div><div class="t m0 x97 h3b ye83 ffd fs18 fc1 sc0 ls6 ws0">)</div><div class="t m0 x44 h30 ye84 ffb fsc fc2 sc0 ls6 ws0">S</div><div class="t m0 x1a h5a ye85 ffb fs20 fc2 sc0 ls1c0 ws0">ELECTING</div><div class="t m0 x20 h30 ye84 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x90 h5a ye85 ffb fs20 fc2 sc0 ls1ac ws0">AND</div><div class="t m0 xc3 h30 ye84 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 xac h5a ye85 ffb fs20 fc2 sc0 ls1c1 ws0">SORTING</div><div class="t m0 x8e h30 ye84 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 xb1 h5a ye85 ffb fs20 fc2 sc0 ls11c ws0">RECORDS</div><div class="t m0 x44 h15 y89a ff4 fsb fc3 sc0 lsbc ws73d">You can add and<span class="_ _e"></span> remove records from a</div><div class="t m0 x44 h15 ye86 ff4 fsb fc3 sc0 ls2d ws27d">table now, but how can you retrieve them?</div><div class="t m0 x44 h15 ye87 ff4 fsb fc3 sc0 ls3d ws73e">Aside from creating and deleting informa-</div><div class="t m0 x44 h15 ye88 ff4 fsb fc3 sc0 ls1c2 ws0">t<span class="_ _18"></span>i<span class="_ _1f"></span>o<span class="_ _1f"></span>n<span class="_ _1f"></span>,<span class="_ _18"></span> y<span class="_ _1f"></span>o<span class="_ _1f"></span>u<span class="_ _1f"></span>’<span class="_ _1f"></span>l<span class="_ _1f"></span>l<span class="_ _18"></span> w<span class="_ _1f"></span>a<span class="_ _1f"></span>n<span class="_ _1f"></span>t<span class="_ _18"></span> t<span class="_ _1f"></span>o<span class="_ _1f"></span> b<span class="_ _1f"></span>e<span class="_ _1f"></span> a<span class="_ _18"></span>b<span class="_ _1f"></span>l<span class="_ _1f"></span>e<span class="_ _1f"></span> t<span class="_ _1f"></span>o<span class="_ _1f"></span> r<span class="_ _18"></span>e<span class="_ _1f"></span>a<span class="_ _1f"></span>d<span class="_ _1f"></span> w<span class="_ _1f"></span>h<span class="_ _18"></span>a<span class="_ _1f"></span>t</div><div class="t m0 x44 h15 y20b ff4 fsb fc3 sc0 ls1c ws10">you’ve already stor<span class="ls1b ws40">ed (figure 6.<span class="_ _e"></span>6).</span></div><div class="t m0 x32 h15 ye89 ff4 fsb fc3 sc0 ls9e ws73f"> You can creat<span class="_ _0"></span>e a query state<span class="_ _0"></span>ment in</div><div class="t m0 x44 h15 ye8a ff4 fsb fc3 sc0 ls80 ws740">SQLite using </div><div class="t m5 xc3 h24 ye8b ffd fsc fc3 sc0 lsa0 ws0">SELECT</div><div class="t m0 xd1 h15 ye8a ff4 fsb fc3 sc0 ls6 ws0"> </div><div class="t m5 x67 h24 ye8b ffd fsc fc3 sc0 ls6 ws0">*</div><div class="t m0 xd6 h15 ye8a ff4 fsb fc3 sc0 ls6 ws0"> </div><div class="t m5 xf2 h24 ye8b ffd fsc fc3 sc0 lsa0 ws741">FROM bookmark<span class="_ _e"></span>s</div><div class="t m0 x6a h15 ye8a ff4 fsb fc3 sc0 ls1c ws742"> (the</div><div class="t m5 x44 h24 ye8c ffd fsc fc3 sc0 ls6 ws0">*</div><div class="t m0 x1a h15 ye8d ff4 fsb fc3 sc0 ls31 ws25"> means “all columns”) and some criteria:</div><div class="t m0 x44 h3b ye8e ffd fs18 fc3 sc0 ls69 ws0">SELECT<span class="_"> </span>*<span class="_"> </span>FROM<span class="_"> </span>bookmarks</div><div class="t m0 x44 h3b ye8f ffd fs18 fc1 sc0 ls69 ws0">WHERE<span class="_"> </span>ID<span class="_"> </span>=<span class="_"> </span>3;</div><div class="t m0 x37 h20 ye90 ffb fs7 fc4 sc0 ls6 ws0">Deleting records in SQLite<span class="_ _9c"></span>Listing<span class="_"> </span>6.4</div><div class="c x11a ye91 w65 hd0"><div class="t m0 xfb h14 ye92 ff12 fs7 fcb sc0 ls113 ws459">The c<span class="ff13 ls6 ws0">r<span class="ff12 ls100">ite</span>r<span class="ff12 ls123">ia </span></span></div><div class="t m0 xfb h14 ye93 ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">r</span><span class="lsdd">gu</span><span class="ff13">m</span>e<span class="ff13">n</span><span class="ls100 ws316">t is</span><span class="ff13">n</span><span class="ls145">’t </span></div><div class="t m0 xfb h14 ye94 ff12 fs7 fcb sc0 ls125 ws0">optio<span class="ff13 ls6">n</span><span class="ls172 ws643">al he</span><span class="ff13 ls6">r</span><span class="lsff ws38b">e; all </span></div><div class="t m0 xfb h14 ye95 ff13 fs7 fcb sc0 ls6 ws0">r<span class="ff12">eco</span>r<span class="ff12 lsec ws4f0">ds would be </span></div><div class="t m0 xfb h14 ye96 ff12 fs7 fcb sc0 lsee ws2cf">deleted without </div><div class="t m0 xfb h14 ye97 ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">n</span><span class="lsd3 ws743">y c</span><span class="ff13">r</span><span class="ls170">ite</span><span class="ff13">r</span><span class="ls123">ia.</span></div></div><div class="c x85 ye98 w66 h79"><div class="t m0 x12e h14 ye99 ff12 fs7 fcb sc0 lsee ws2cf">Uses the values a<span class="ff13 ls6 ws0">r<span class="ff12 lse1">gu</span>m<span class="ff12">e</span>n</span><span class="lsd2 ws35c">t of _execute </span></div><div class="t m0 x12e h14 ye9a ff12 fs7 fcb sc0 lsff ws38b">as the values to <span class="ff13 ls6 ws0">m</span><span class="ls124 ws3cb">atch agai<span class="ff13 ls6 ws0">n<span class="ff12 ls10e">st</span></span></span></div></div><div class="c x80 ye9b wa hd1"><div class="t m0 xf4 h2b ye9c ffb fs18 fcb sc0 ls69 ws744">Figure 6.5<span class="_ _29"> </span>Delete is the count<span class="_ _0"></span>erpart of create, </div><div class="t m0 xf4 h2b ye9d ffb fs18 fcb sc0 ls17 ws43c">so most systems cover this operation as well.</div></div><div class="c x5f ye9e w59 hcd"><div class="t m0 xfd h36 ye9f ff11 fs1c fc12 sc0 ls6 ws0">Create: Add a new bookmark.</div><div class="t m0 xfd h36 yea0 ff11 fs1c fc12 sc0 ls6 ws0">Read: Get the information of an existing</div><div class="t m0 xfd h36 yea1 ff11 fs1c fc12 sc0 ls6 ws0">bookmark, a list of all the bookmarks, or</div><div class="t m0 xfd h36 yea2 ff11 fs1c fc12 sc0 ls6 ws0">specific bookmarks that meet some criteria.</div><div class="t m0 xfd h36 yea3 ff11 fs1c fc12 sc0 ls6 ws0">Update: Edit the information in a</div><div class="t m0 xfd h36 yea4 ff11 fs1c fc12 sc0 ls6 ws0">bookmark, like the title or description. </div><div class="t m0 xfd h36 yea5 ff11 fs1c fc12 sc0 ls6 ws0">Delete: Remove a bookmark.</div></div><div class="c x80 y3f wa hd2"><div class="t m0 xf4 h2b yea6 ffb fs18 fcb sc0 ls29 ws37b">Figure 6.6<span class="_ _29"> </span>Reading existing data is usually </div><div class="t m0 xf4 h2b yea7 ffb fs18 fcb sc0 ls17 ws43c">a necessary part of a CRUD application.</div></div><div class="c x5f yea8 w59 hd3"><div class="t m0 xfd h36 yea9 ff11 fs1c fc12 sc0 ls6 ws0">Create: Add a new bookmark.</div><div class="t m0 xfd h36 yeaa ff11 fs1c fc12 sc0 ls6 ws0">Read: Get the information of an existing</div><div class="t m0 xfd h36 yeab ff11 fs1c fc12 sc0 ls6 ws0">bookmark, a list of all the bookmarks, or</div><div class="t m0 xfd h36 yeac ff11 fs1c fc12 sc0 ls6 ws0">specific bookmarks that meet some criteria.</div><div class="t m0 xfd h36 yead ff11 fs1c fc12 sc0 ls6 ws0">Update: Edit the information in a</div><div class="t m0 xfd h36 yeae ff11 fs1c fc12 sc0 ls6 ws0">bookmark, like the title or description. </div><div class="t m0 xfd h36 yeaf ff11 fs1c fc12 sc0 ls6 ws0">Delete: Remove a bookmark.</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
