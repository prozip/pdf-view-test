<div id="pfbd" class="pf w0 h0" data-page-no="bd"><div class="pc pcbd w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgbd.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">165<span class="_ _e2"></span><span class="ffa">How big should my class/function/module be?</span></div><div class="t m0 xe6 h3b y395 ffd fs18 fc3 sc0 lsb2 ws0">next_page_of_results,</div><div class="t m0 xe6 h3b y396 ffd fs18 fc3 sc0 lsb2 ws0">headers={&apos;Accept&apos;:<span class="_"> </span>&apos;application/vnd.github.v3.star+json&apos;},</div><div class="t m0 x36 h3b y397 ffd fs18 fc3 sc0 ls6 ws0">)</div><div class="t m0 x36 h3b y40d ffd fs18 fc3 sc0 ls20c ws0">next_page_of_result<span class="_ _e"></span>s<span class="_"> </span>=<span class="_"> </span>stars_response.links.get<span class="_ _e"></span>(&apos;next&apos;,<span class="_"> </span>{}).get(&apos;url&apos;)</div><div class="t m0 x36 h3b y1488 ffd fs18 fc3 sc0 lsb2 ws0">for<span class="_"> </span>repo_info<span class="_"> </span>in<span class="_"> </span>stars_response.json():</div><div class="t m0 xe6 h3b y1489 ffd fs18 fc3 sc0 lsb2 ws0">repo<span class="_"> </span>=<span class="_"> </span>repo_info[&apos;repo&apos;]</div><div class="t m0 xe6 h3b y148a ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>data[&apos;preserve_timestamps&apos;]:</div><div class="t m0 x66 h3b y148b ffd fs18 fc3 sc0 lsb2 ws0">timestamp<span class="_"> </span>=<span class="_"> </span>datetime.strptime(</div><div class="t m0 xd3 h3b y148c ffd fs18 fc3 sc0 lsb2 ws0">repo_info[&apos;starred_at&apos;],</div><div class="t m0 xd3 h3b yba1 ffd fs18 fc3 sc0 lsb2 ws0">&apos;%Y-%m-%dT%H:%M:%SZ&apos;</div><div class="t m0 x66 h3b y72c ffd fs18 fc3 sc0 ls6 ws0">)</div><div class="t m0 xe6 h3b y148d ffd fs18 fc3 sc0 lsb2 ws0">else:</div><div class="t m0 x66 h3b y148e ffd fs18 fc3 sc0 lsb2 ws0">timestamp<span class="_"> </span>=<span class="_"> </span>None</div><div class="t m0 xe6 h3b y413 ffd fs18 fc3 sc0 lsb2 ws0">bookmarks_imported<span class="_"> </span>+=<span class="_"> </span>1</div><div class="t m0 xe6 h3b y46c ffd fs18 fc3 sc0 lsb2 ws0">AddBookmarkCommand().execute(</div><div class="t m0 x66 h3b y46d ffd fs18 fc3 sc0 lsb2 ws0">self._extract_bookmark_info(repo),</div><div class="t m0 x66 h3b y99d ffd fs18 fc3 sc0 lsb2 ws0">timestamp=timestamp,</div><div class="t m0 xe6 h3b y148f ffd fs18 fc3 sc0 ls6 ws0">)</div><div class="t m0 x87 h3b y1490 ffd fs18 fc1 sc0 lsb2 ws0">return<span class="_"> </span>f&apos;Imported<span class="_"> </span>{bookmarks_imported}<span class="_"> </span>bookmarks<span class="_"> </span>from<span class="_"> </span>starred<span class="_"> </span>repos!&apos;</div><div class="t m0 x35 h15 y731 ff4 fsb fc3 sc0 ls1f ws14">When youâ€™re done, come back and check your<span class="ls2f ws23"> work against the solu<span class="ls7a ws44c">tion<span class="_ _0"></span> in figure 9.2.</span></span></div><div class="c xee y1491 w2c h43"><div class="t m0 xc8 h14 y4aa ff12 fs7 fcb sc0 ls6 ws0">A<span class="ff13">n</span><span class="ls145">othe</span><span class="ff13">r</span><span class="ls20d"> loo<span class="_ _e"></span>p th<span class="_ _e"></span>at co<span class="_ _e"></span>de f<span class="_ _e"></span>u</span><span class="ff13">r</span><span class="ls12f">the</span><span class="ff13">r</span> </div><div class="t m0 xc8 h14 y936 ff12 fs7 fcb sc0 ls124 ws0">dow<span class="ff13 ls6">n</span><span class="lsee ws2cf"> will co</span><span class="ff13 ls6">m</span><span class="lsde ws2ad">e back to</span></div></div><div class="c xf7 y1492 w4c hb7"><div class="t m0 xf3 h14 y1493 ff12 fs7 fcb sc0 ls6 ws0">O<span class="ff13">n</span><span class="ws317">e b</span><span class="ff13">r</span>a<span class="ff13">n</span>ch</div><div class="t m0 x12b h14 y878 ff12 fs7 fcb sc0 lsee ws2cf">of executio<span class="ff13 ls6 ws0">n</span></div></div><div class="c x101 y1494 wae h128"><div class="t m0 x42 h14 y1495 ff12 fs7 fcb sc0 ls6 ws0">A<span class="ff13">n</span><span class="lsff">othe</span><span class="ff13">r</span><span class="lse1"> b</span><span class="ff13">r</span>a<span class="ff13">n</span><span class="ls10c">ch </span></div><div class="t m0 x42 h14 y564 ff12 fs7 fcb sc0 lsee ws2cf">of executio<span class="ff13 ls6 ws0">n</span></div></div><div class="c x138 y1496 w48 h58"><div class="t m0 x100 h14 y1497 ff12 fs7 fcb sc0 lsfd ws310">The poi<span class="ff13 ls6 ws0">n<span class="ff12">t</span></span></div><div class="t m0 x12b h14 y1498 ff12 fs7 fcb sc0 lsd5 ws0">that <span class="ff13 ls6">r</span><span class="ls105">etu<span class="ff13 ls103">rn</span><span class="ls6">s</span></span></div><div class="t m0 x130 h14 y1499 ff12 fs7 fcb sc0 lse0 ws762">to the fo<span class="ff13 ls6 ws0">r</span><span class="ls127 ws62e">, o<span class="ff13 ls6 ws0">r<span class="ff12">,</span></span></span></div><div class="t m0 x118 h14 y149a ff12 fs7 fcb sc0 ls124 ws3cb">if co<span class="ff13 ls6 ws0">m<span class="ff12 lsee">plete,</span></span></div><div class="t m0 x12b h14 y149b ff12 fs7 fcb sc0 ls10c ws35a">to the while</div></div><div class="c x1 y149c waf h129"><div class="t m0 x7f h36 y149d ff11 fs1c fc12 sc0 ls6 ws0">Start</div><div class="t m0 xae h36 y149e ff11 fs1c fc12 sc0 ls6 ws0">Use default timestamp</div><div class="t m0 xfa h36 y149f ff11 fs1c fc12 sc0 ls6 ws0">Repeat/end <span class="ff15">for</span></div><div class="t m0 x13e h5f y14a0 ff15 fs1c fc12 sc0 ls6 ws0">return</div><div class="t m0 x14b h36 y149e ff11 fs1c fc12 sc0 ls6 ws0">Use original timestamp</div><div class="t m0 xc1 h5f y14a1 ff15 fs1c fc12 sc0 ls6 ws0">while next_page_of_results</div><div class="t m0 x13a h5f y14a2 ff15 fs1c fc12 sc0 ls6 ws0">for repo_info in</div><div class="t m0 x42 h5f y14a3 ff15 fs1c fc12 sc0 ls6 ws0">stars_response.json()</div><div class="t m0 x11c h5f y14a4 ff15 fs1c fc12 sc0 ls6 ws0">if data[&apos;preserve_timestamps&apos;]</div><div class="t m0 xfe h37 y14a5 ff12 fs1d fc12 sc0 ls6 ws0">There are 9 nodes and <span class="ff1b ls20e">11<span class="_ _e"></span></span> edges</div><div class="t m0 xfe h37 y14a6 ff12 fs1d fc12 sc0 ls6 ws0">between them. The cyclomatic complexity<span class="_ _1c"></span>,</div><div class="t m0 xfe h12a y14a7 ff1f fs2c fc12 sc0 ls20f ws8c6">M = E - N </div><div class="t m0 x10 h37 y14a8 ff12 fs1d fc12 sc0 ls210 ws30f">+ 2, is </div><div class="t m0 x74 h12b y14a7 ff1f fs2c fc12 sc0 ls6 ws0">M<span class="ff1b ls211 ws8c7"> = </span></div><div class="t mb x10f h12c y14a9 ff1b fs31 fc12 sc0 ls212 ws0">11</div><div class="t m0 x53 h12b y14a7 ff1b fs2c fc12 sc0 ls6 ws0"> </div><div class="t m0 xcd h37 y14a8 ff12 fs1d fc12 sc0 ls213 ws4f7">- 9 + 2 = 4.    </div><div class="t m0 x14c h36 y14aa ff11 fs1c fc12 sc0 ls6 ws0">Repeat/end <span class="ff15">while</span></div><div class="t m0 x8c h37 y14ab ff12 fs1d fc12 sc0 ls6 ws0">Create a</div><div class="t m0 x8c h37 y14ac ff12 fs1d fc12 sc0 ls6 ws0">bookmark</div><div class="t m0 x8c h37 y14ad ff12 fs1d fc12 sc0 ls6 ws0">using whichever</div><div class="t m0 x8c h37 y14ae ff12 fs1d fc12 sc0 ls6 ws0">timestamp is</div><div class="t m0 x8c h37 y14af ff12 fs1d fc12 sc0 ls6 ws0">chosen.</div><div class="t m0 x37 h37 y14b0 ff12 fs1d fc12 sc0 ls6 ws0">Get the first</div><div class="t m0 x37 h37 y14b1 ff12 fs1d fc12 sc0 ls6 ws0">page of stars.</div><div class="t m0 xd6 h37 y14b2 ff12 fs1d fc12 sc0 ls6 ws0">Return after looping over</div><div class="t m0 xd6 h37 y14b3 ff12 fs1d fc12 sc0 ls6 ws0">all the pages of stars.</div></div><div class="c x1 y14b4 wb0 h12d"><div class="t m0 x0 h2b y14b5 ffb fs18 fcb sc0 ls29 ws37b">Figure 9.2<span class="_ _29"> </span>The cyclomatic complexity of a function from the Bark application</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
