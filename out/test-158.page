<div id="pf9e" class="pf w0 h0" data-page-no="9e"><div class="pc pc9e w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg9e.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">134</div><div class="t m0 xb9 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 x16 h2c y1d0 ffb fs19 fcb sc0 lsf6 ws0">HAPTER</div><div class="t m0 x68 h2b y1cf ffb fs18 fcb sc0 ls8c ws0"> 7</div><div class="t m0 x1f h2d y80 ffa fs7 fcb sc0 ls6 ws0">Extensibility and f<span class="_ _e"></span>lexibility</div><div class="t m0 x44 h3b y395 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Frame:</div><div class="t m0 xae h3b y396 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__repr__(self):</div><div class="t m0 x97 h3b y397 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>&apos;An<span class="_"> </span>aluminum<span class="_"> </span>frame&apos;</div><div class="t m0 x44 h3b y484 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>Bicycle:</div><div class="t m0 xae h3b y569 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>__init__(self):</div><div class="t m0 x97 h3b y56a ffd fs18 fc3 sc0 lsb2 ws0">self.front_tire<span class="_"> </span>=<span class="_"> </span>Tire()</div><div class="t m0 x97 h3b y486 ffd fs18 fc3 sc0 lsb2 ws0">self.back_tire<span class="_"> </span>=<span class="_"> </span>Tire()</div><div class="t m0 x97 h3b y487 ffd fs18 fc3 sc0 lsb2 ws0">self.frame<span class="_"> </span>=<span class="_"> </span>Frame()</div><div class="t m0 xae h3b y590 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>print_specs(self):</div><div class="t m0 x97 h3b yfe2 ffd fs18 fc3 sc0 lsb2 ws0">print(f&apos;Frame:<span class="_"> </span>{self.frame}&apos;)</div><div class="t m0 x97 h3b y591 ffd fs18 fc3 sc0 lsb2 ws0">print(f&apos;Front<span class="_"> </span>tire:<span class="_"> </span>{self.front_tire},<span class="_"> </span>back<span class="_"> </span>tire:<span class="_"> </span>{self.back_tire}&apos;)</div><div class="t m0 x44 h3b y594 ffd fs18 fc3 sc0 lsb2 ws0">if<span class="_"> </span>__name__<span class="_"> </span>==<span class="_"> </span>&apos;__main__&apos;:</div><div class="t m0 xae h3b y595 ffd fs18 fc3 sc0 lsb2 ws0">bike<span class="_"> </span>=<span class="_"> </span>Bicycle()</div><div class="t m0 xae h3b y596 ffd fs18 fc1 sc0 lsb2 ws0">bike.print_specs()</div><div class="t m0 x44 h15 ybec ff4 fsb fc3 sc0 ls44 ws34">Running this code will print ou<span class="ls3a ws28">t the specs of your bicycle:</span></div><div class="t m0 x44 h3b y10f3 ffd fs18 fc3 sc0 lsb2 ws0">Frame:<span class="_"> </span>An<span class="_"> </span>aluminum<span class="_"> </span>frame</div><div class="t m0 x44 h3b y10f4 ffd fs18 fc1 sc0 lsb2 ws0">Front<span class="_"> </span>tire:<span class="_"> </span>A<span class="_"> </span>rubber<span class="_"> </span>tire,<span class="_"> </span>back<span class="_"> </span>tire:<span class="_"> </span>A<span class="_"> </span>rubber<span class="_"> </span>tire</div><div class="t m0 x44 h15 yd11 ff4 fsb fc3 sc0 ls38 ws166">This will certainly get you a bicycle. The en<span class="ls3a wsa7">capsulation looks good; each part of the</span></div><div class="t m0 x44 h15 yd12 ff4 fsb fc3 sc0 ls3a ws1ba">bicycle lives in its own class. The levels <span class="ls34 ws11f">of abstraction make sense too; there’s a </span></div><div class="t m5 x2c h24 ybcc ffd fsc fc3 sc0 lsa0 ws0">Bicy-</div><div class="t m5 x44 h24 y10f5 ffd fsc fc3 sc0 lsa0 ws0">cle</div><div class="t m0 xbc h15 y25e ff4 fsb fc3 sc0 ls2d ws3eb"> at the top level, and each of its parts is<span class="ls2c ws7ef"> accessible a level down<span class="ls20 ws134"> from that. So what’s</span></span></div><div class="t m0 x44 h15 y25f ff4 fsb fc3 sc0 ls34 ws22">wrong? Can you see anything th<span class="lsc5 ws3ab">at might be difficult to<span class="_ _0"></span> do with this code structu<span class="_ _0"></span>re?</span></div><div class="t m0 xbc h3d y10f6 ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x87 h15 y403 ff4 fsb fc3 sc0 ls71 ws83">Adding new parts to a bicycle</div><div class="t m0 xbc h3d y10f7 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x87 h15 y261 ff4 fsb fc3 sc0 ls42 ws26e">Upgrading parts of a bicycle</div><div class="t m0 x44 h15 ybd1 ff4 fsb fc3 sc0 ls44 ws6e">Adding new parts to <span class="_ _0"></span>a bicycle (option 1) turn<span class="ls30 ws37d">s out not to be very diff<span class="_ _e"></span>icult. You can cre-</span></div><div class="t m0 x44 h15 y292 ff4 fsb fc3 sc0 ls31 ws3f9">ate an instance of a new <span class="ls1c ws130">part and st<span class="_ _e"></span>ore it on the </span></div><div class="t m5 x5e h24 y405 ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 xcb h15 y292 ff4 fsb fc3 sc0 ls78 ws7f0"> instance in the </div><div class="t m5 xce h24 y405 ffd fsc fc3 sc0 lsa0 ws0">__init__</div><div class="t m0 x44 h15 y988 ff4 fsb fc3 sc0 ls2f ws7f1">method, the same as the others. Up<span class="ls36 ws7f2">grading (changing) the parts of a </span></div><div class="t m5 xab h24 y10f8 ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 x44 h15 y294 ff4 fsb fc3 sc0 ls6f ws7f3">instance dynami<span class="_ _e"></span>cally (option 2) turn<span class="_ _e"></span>s out to<span class="ls1dc ws0"> b<span class="_ _3e"></span>e<span class="_ _3e"></span> h<span class="_ _3e"></span>a<span class="_ _25"></span>r<span class="_ _3e"></span>d<span class="_ _3e"></span> i<span class="_ _3e"></span>n<span class="_ _25"></span> t<span class="_ _3e"></span>h<span class="_ _3e"></span>i<span class="_ _3e"></span>s<span class="_ _25"></span> s<span class="_ _3e"></span>t<span class="_ _3e"></span>r<span class="_ _3e"></span>u<span class="_ _25"></span>c<span class="_ _3e"></span>t<span class="_ _3e"></span>u<span class="_ _3e"></span>r<span class="_ _25"></span>e<span class="_ _3e"></span> b<span class="_ _3e"></span>e<span class="_ _3e"></span>c<span class="_ _25"></span>a<span class="_ _3e"></span>u<span class="_ _3e"></span>s<span class="_ _3e"></span>e<span class="_ _25"></span> t<span class="_ _3e"></span>h<span class="_ _3e"></span>e</span></div><div class="t m0 x44 h15 ybd3 ff4 fsb fc3 sc0 ls3a ws28">classes for those parts are hardcoded into the initialization.</div><div class="t m0 x32 h15 y98b ff4 fsb fc3 sc0 ls4e ws7f4"> You could say that the </div><div class="t m5 x29 h24 y98a ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 x63 h15 y98b ff4 fsb fc3 sc0 ls6 ws0"> <span class="ff3 ls21 ws63a">de<span class="_ _0"></span>pends on<span class="ff4 lsab ws2d6"> the </span></span></div><div class="t m5 x74 h24 y98a ffd fsc fc3 sc0 lsa0 ws0">Tire</div><div class="t m0 xe8 h15 y98b ff4 fsb fc3 sc0 ls78 ws0">, </div><div class="t m5 x53 h24 y98a ffd fsc fc3 sc0 lsa0 ws0">Frame</div><div class="t m0 x4a h15 y98b ff4 fsb fc3 sc0 ls1e ws15a">, and other parts it needs.</div><div class="t m0 x44 h15 y296 ff4 fsb fc3 sc0 ls42 ws2e3">Without them, the bicycle <span class="_ _e"></span>can’t function. But if you want a </div><div class="t m5 xed h24 y10f9 ffd fsc fc3 sc0 lsa0 ws0">CarbonFiber<span class="_ _e"></span>Frame</div><div class="t m0 x109 h15 y296 ff4 fsb fc3 sc0 ls6b ws7f5">, you</div><div class="t m0 x44 h15 y297 ff4 fsb fc3 sc0 ls104 ws0">h<span class="_ _0"></span>a<span class="_ _0"></span>v<span class="_ _1d"></span>e t<span class="_ _1d"></span>o c<span class="_ _1d"></span>ra<span class="_ _1d"></span>c<span class="_ _0"></span>k<span class="_ _0"></span> o<span class="_ _0"></span>p<span class="_ _0"></span>e<span class="_ _1d"></span>n t<span class="_ _1d"></span>he<span class="_ _1d"></span> </div><div class="t m5 x16 h24 y10fa ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 x56 h15 y297 ff4 fsb fc3 sc0 ls2f ws253"> class’s code to update it. Because of this, </div><div class="t m5 x105 h24 y10fa ffd fsc fc3 sc0 lsa0 ws0">Tire</div><div class="t m0 xa4 h15 y297 ff4 fsb fc3 sc0 ls4b ws7f6"> is cur-</div><div class="t m0 x44 h15 y298 ff4 fsb fc3 sc0 ls6 ws72">rently a <span class="ff3 ls1d9 ws0">rigid</span><span class="ls25 ws1a"> dependency of </span></div><div class="t m5 x8d h24 y10fb ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 xd0 h15 y298 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x32 h15 y166 ff4 fsb fc3 sc0 ls6 ws0"> <span class="_ _f"></span><span class="ff3 ls38 ws23e">Inversion of control</span><span class="ls20 ws9b"> says that instead of creating <span class="ls71 ws61b">instances of dependencies in your</span></span></div><div class="t m0 x44 h15 y167 ff4 fsb fc3 sc0 ls71 ws1cb">class, you can pass in existing instances for <span class="ls1c ws94">the class to make<span class="_ _e"></span> use of (figure 7.5). The</span></div><div class="t m0 x44 h15 yd7 ff3 fsb fc3 sc0 ls30 ws0">control<span class="ff4 ls71 ws83"> of dependency creation is </span><span class="ls1f">inverted<span class="ff4 ls21 ws1e2"> by giving the control to whatever code is cre-</span></span></div><div class="t m0 x44 h15 y299 ff4 fsb fc3 sc0 ls3d ws61">ating a </div><div class="t m5 x4 h24 y10fc ffd fsc fc3 sc0 lsa0 ws0">Bicycle</div><div class="t m0 x38 h15 y299 ff4 fsb fc3 sc0 ls38 ws26">. This is powerful.</div><div class="c xf1 y10fd w9 hf0"><div class="t m0 x12e h14 y10e1 ff12 fs7 fcb sc0 ls125 ws7f7">Bicycle c<span class="ff13 ls6 ws0">r</span><span class="lsd5 ws7f8">eates the </span></div><div class="t m0 x12e h14 y65d ff12 fs7 fcb sc0 lsec ws0">pa<span class="ff13 ls6">r</span><span class="lsda ws311">ts it </span><span class="ff13 ls6">n</span><span class="ls10a">eeds.</span></div></div><div class="c xd9 yc7b w9 h56"><div class="t m0 x12e h14 y68d ff12 fs7 fcb sc0 lsd2 ws0">A <span class="ff13 ls6">m</span><span class="ls88 ws2af">ethod to p</span><span class="ff13 ls6">r<span class="ff12">i</span>n</span><span class="ls12f ws78e">t all </span></div><div class="t m0 x12e h14 y68e ff12 fs7 fcb sc0 lsda ws311">of the bicycle’s pa<span class="ff13 ls6 ws0">r<span class="ff12 lsd2">ts</span></span></div></div><div class="c xf1 y10fe w9 h56"><div class="t m0 x12e h14 yb49 ff12 fs7 fcb sc0 ls6 ws0">C<span class="ff13">r</span><span class="lsff ws38b">eates the bicycle </span></div><div class="t m0 x12e h14 y480 ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">n</span><span class="lsec ws45e">d p</span><span class="ff13">r</span>i<span class="ff13">n</span><span class="lsd2 ws35c">ts its specs</span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
