<div id="pfc5" class="pf w0 h0" data-page-no="c5"><div class="pc pcc5 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgc5.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">173<span class="_ _f5"></span><span class="ffa">Decomposing classes</span></div><div class="t m0 x83 h49 y33a ffb fs17 fc2 sc0 lsf7 ws0">NOTE</div><div class="t m0 xaf h15 y40 ff4 fsb fc3 sc0 ls3a ws12e">Because properties are methods, re<span class="ls38 ws9e">peatedly accessing them means that</span></div><div class="t m0 x83 h15 y33b ff4 fsb fc3 sc0 ls3a ws18c">the methods are called each time. This is often okay, but it can have perfor-</div><div class="t m0 x83 h15 y33c ff4 fsb fc3 sc0 ls3d ws2c">mance impacts for properties th<span class="_ _e"></span><span class="ls1e ws16">at are expensive to calculate.</span></div><div class="t m0 x35 h15 yb6f ff4 fsb fc3 sc0 ls2e ws44">What should you do when there’s enou<span class="ls2f ws26a">gh functionality to abstract a whole <span class="_ _0"></span><span class="ff3 ls31 ws0">class<span class="ff4 ls21 ws1e2"> worth</span></span></span></div><div class="t m0 x35 h15 yae0 ff4 fsb fc3 sc0 ls3d ws61">of methods?</div><div class="t m0 x19 h26 y1572 ffc fs15 fc2 sc0 ls16b ws551">9<span class="_ _0"></span>.<span class="_ _0"></span>3<span class="_ _0"></span>.<span class="_ _0"></span>2<span class="_ _11"> </span>Extracting classes an<span class="_ _e"></span>d forwarding calls</div><div class="t m0 x35 h15 y39a ff4 fsb fc3 sc0 ls42 ws345">When you extracted </div><div class="t m5 x16 h24 y1557 ffd fsc fc3 sc0 lsa0 ws0">get_format_<span class="_ _e"></span>function</div><div class="t m0 x30 h15 y39a ff4 fsb fc3 sc0 ls3d ws7bd"> from </div><div class="t m5 x14 h24 y1557 ffd fsc fc3 sc0 lsa0 ws0">random_food</div><div class="t m0 x33 h15 y39a ff4 fsb fc3 sc0 ls5f ws8ea"> in section 9.2.<span class="_ _0"></span>2, you</div><div class="t m0 x35 h15 yb2f ff4 fsb fc3 sc0 ls1e ws0">still <span class="ff3 ls6">called</span><span class="ls25 ws657"> the extracted function fr<span class="_ _0"></span>om its original location. When dealing with class<span class="_ _0"></span>es,</span></div><div class="t m0 x35 h15 y89 ff4 fsb fc3 sc0 ls36 ws76">something similar will need to happen if you want to maintain <span class="ff3 ls42 ws3af">backward compatibility</span><span class="ls6 ws0">.</span></div><div class="t m0 x35 h15 yeb5 ff4 fsb fc3 sc0 ls38 ws3e6">Backward compatibility is the practice of ev<span class="ls3a ws254">olving your software without breaking the</span></div><div class="t m0 x35 h15 y1001 ff4 fsb fc3 sc0 ls3a ws1f7">implementation consumers previously relie<span class="ls38 ws3fd">d on. If you <span class="_ _e"></span>change the arguments of a</span></div><div class="t m0 x35 h15 yad6 ff4 fsb fc3 sc0 ls66 ws77e">function, the name<span class="_ _0"></span> of a class, and so on, consumers will need to upd<span class="_ _0"></span>ate their code if</div><div class="t m0 x35 h15 yeb9 ff4 fsb fc3 sc0 ls38 ws256">they want it to continue working. To avoi<span class="ls2d ws3eb">d these problems, you <span class="_ _e"></span>could take a hint from</span></div><div class="t m0 x35 h15 y962 ff4 fsb fc3 sc0 ls47 ws54">the post office’s mail<span class="_ _e"></span><span class="ls2d ws1d"> forwa<span class="_ _0"></span>rding system.</span></div><div class="t m0 x83 h15 y3fa ff4 fsb fc3 sc0 ls42 wsc4"> When you move to a new address, y<span class="_ _0"></span>ou can <span class="lsc5 ws8eb">tell the post offi<span class="_ _0"></span>ce to forward your mai<span class="_ _0"></span>l</span></div><div class="t m0 x35 h15 y1002 ff4 fsb fc3 sc0 ls6 ws549">(figure 9.4). People w<span class="_ _e"></span>ho send you mail at your old address don’t need to know your</div><div class="t m0 x35 h15 y151 ff4 fsb fc3 sc0 ls5e ws6a0">new address immediately bec<span class="_ _e"></span>ause the post office<span class="ls1e ws15a"> will intercept the mail and direct it to</span></div><div class="t m0 x35 h15 y152 ff4 fsb fc3 sc0 ls31 ws335">you automatically. Each time <span class="ls6b ws8ec">you receive a piece of mail addressed to your old resi-</span></div><div class="t m0 x35 h15 y1253 ff4 fsb fc3 sc0 ls42 ws8c">dence, you can notify the send<span class="ls20 wsd8">er of your new address so t<span class="_ _e"></span>hey can update their records.</span></div><div class="t m0 x35 h15 y1254 ff4 fsb fc3 sc0 ls36 ws2e7">Once you’re confident you aren’t receiving <span class="ls2f ws109">mail made out to the old address any lon-</span></div><div class="t m0 x35 h15 y1573 ff4 fsb fc3 sc0 ls1f ws14">ger, you can stop the post office forwarding.</div><div class="t m0 x83 h15 y373 ff4 fsb fc3 sc0 ls9d ws0"> W<span class="_ _1c"></span>h<span class="_ _1c"></span>e<span class="_ _1c"></span>n<span class="_ _1d"></span> y<span class="_ _1c"></span>o<span class="_ _1c"></span>u<span class="_ _1c"></span> e<span class="_ _1c"></span>x<span class="_ _1c"></span>t<span class="_ _1d"></span>r<span class="_ _1c"></span>a<span class="_ _1c"></span>c<span class="_ _1c"></span>t<span class="_ _1c"></span> o<span class="_ _1d"></span>n<span class="_ _1c"></span>e<span class="_ _1c"></span> c<span class="_ _1c"></span>l<span class="_ _1c"></span>a<span class="_ _1d"></span>s<span class="_ _1c"></span>s<span class="_ _1c"></span> f<span class="_ _1c"></span>r<span class="_ _1c"></span>o<span class="_ _1c"></span>m<span class="_ _1d"></span> a<span class="_ _1c"></span>n<span class="_ _1c"></span>o<span class="_ _1c"></span>t<span class="_ _1c"></span>h<span class="_ _1d"></span>e<span class="_ _1c"></span>r<span class="_ _1c"></span>,<span class="_ _1c"></span> y<span class="_ _1c"></span>o<span class="_ _1d"></span>u<span class="_ _1c"></span>’<span class="_ _1c"></span>l<span class="_ _1c"></span>l<span class="_ _1c"></span> w<span class="_ _1c"></span>a<span class="_ _1d"></span>n<span class="_ _1c"></span>t<span class="_ _1c"></span> t<span class="_ _1c"></span>o<span class="_ _1c"></span> c<span class="_ _1d"></span>o<span class="_ _1c"></span>n<span class="_ _1c"></span>t<span class="_ _1c"></span>i<span class="_ _1c"></span>n<span class="_ _1d"></span>u<span class="_ _1c"></span>e<span class="_ _1c"></span> p<span class="_ _1c"></span>r<span class="_ _1c"></span>o<span class="_ _1c"></span>v<span class="_ _1d"></span>i<span class="_ _1c"></span>d<span class="_ _1c"></span>i<span class="_ _1c"></span>n<span class="_ _1c"></span>g<span class="_ _1d"></span> t<span class="_ _1c"></span>h<span class="_ _1c"></span>e</div><div class="t m0 x35 h15 y1255 ff4 fsb fc3 sc0 ls2d wsbc">previously existing functionality for <span class="_ _0"></span>a while<span class="ls20 wsac">, despite changing things under the hood,</span></div><div class="t m0 x35 h15 ybf0 ff4 fsb fc3 sc0 ls38 ws23e">so that consumers don’t need to immedi<span class="ls36 ws23d">ately worry about upgrading their software.</span></div><div class="t m0 x35 h15 y1574 ff4 fsb fc3 sc0 ls36 ws93">As with your mail, you can continue accepting calls in one class and pass them along</div><div class="t m0 x35 h15 y1575 ff4 fsb fc3 sc0 ls1e ws16">to another class under the <span class="ls62 ws62">hood. This is known as <span class="ff3 ls1fe ws0">forwarding<span class="ff4 ls6">.</span></span></span></div><div class="c x35 y1576 wb8 h137"><div class="t m0 xef h36 y1577 ff11 fs1c fc12 sc0 ls6 ws0">123 South Street<span class="_ _f8"></span>123 South Street</div><div class="t m0 x93 h36 y1578 ff11 fs1c fc12 sc0 ls13b ws522">Mail normally goes through the post office</div><div class="t m0 x59 h36 y1579 ff11 fs1c fc12 sc0 ls13b ws522">straight to the address on the envelope.</div><div class="t m0 x90 h36 y157a ff11 fs1c fc12 sc0 ls6 ws0">456 North Street<span class="_ _41"></span>456 North Street</div><div class="t m0 x93 h36 y157b ff11 fs1c fc12 sc0 ls6 ws80c">Once your contacts have updated their</div><div class="t m0 x59 h36 y157c ff11 fs1c fc12 sc0 ls13b ws522">records, you can stop the forwarding.</div><div class="t m0 x90 h36 y157d ff11 fs1c fc12 sc0 ls6 ws0">456 North Street<span class="_ _52"></span>123 South Street<span class="_ _f9"> </span>456 North Street</div><div class="t m0 x97 h36 y157e ff11 fs1c fc12 sc0 ls6 ws0">“My new place is at</div><div class="t m0 x20 h36 y157f ff11 fs1c fc12 sc0 ls6 ws0">456 North Street!”</div><div class="t m0 x31 h36 y1580 ff11 fs1c fc12 sc0 ls6 ws80c">When you move, the post</div><div class="t m0 x85 h36 y1581 ff11 fs1c fc12 sc0 ls6 ws80c">office can automatically forward</div><div class="t m0 x31 h36 y1582 ff11 fs1c fc12 sc0 ls13b ws522">mail from the old address</div><div class="t m0 x27 h36 y1583 ff11 fs1c fc12 sc0 ls13b ws522">to your new address.</div></div><div class="t m0 x35 h2b y1584 ffb fs18 fc11 sc0 ls6 ws0">Figure 9.4</div><div class="t m3 x0 h3a y1584 ff8 fs18 fc11 sc0 ls6 ws0"> </div><div class="t m0 x15 h2b y1584 ffb fs18 fc11 sc0 ls6 ws0">Mail can be forwarded by the post offi<span class="_ _e"></span>ce when you move to a new location.</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
