<div id="pf8f" class="pf w0 h0" data-page-no="8f"><div class="pc pc8f w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg8f.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">119<span class="_ _aa"></span><span class="ffa">An initial code structure, by concern</span></div><div class="t m0 x83 h15 y40 ff4 fsb fc3 sc0 ls5f ws763"> Write a </div><div class="t m5 x37 h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">DeleteBookmar<span class="_ _e"></span>kCommand</div><div class="t m0 x22 h15 y40 ff4 fsb fc3 sc0 ls38 ws764"> command that accepts this information in its</div><div class="t m5 x35 h24 y532 ffd fsc fc3 sc0 lsa0 ws0">execute</div><div class="t m0 xd8 h15 y41 ff4 fsb fc3 sc0 ls71 ws2f6"> method and passes it to the </div><div class="t m5 x64 h24 y532 ffd fsc fc3 sc0 lsa0 ws0">DatabaseManage<span class="_ _e"></span>r.delete</div><div class="t m0 x5c h15 y41 ff4 fsb fc3 sc0 ls34 ws42d"> method. Remember</div><div class="t m0 x35 h15 y533 ff4 fsb fc3 sc0 ls48 ws0">that </div><div class="t m5 x82 h24 y66f ffd fsc fc3 sc0 lsa0 ws0">delete</div><div class="t m0 xac h15 y533 ff4 fsb fc3 sc0 ls1f ws765"> accepts a dictionary mapping column<span class="ls50 ws9a"> name<span class="_ _0"></span>s to values to match against;</span></div><div class="t m0 x35 h15 y43 ff4 fsb fc3 sc0 ls31 wsf1">here, you’ll want to match the given value in the </div><div class="t m5 xcd h24 y71c ffd fsc fc3 sc0 lsa0 ws0">id</div><div class="t m0 x139 h15 y43 ff4 fsb fc3 sc0 ls72 ws766"> column.<span class="_ _e"></span> Once the reco<span class="_ _e"></span>rd is</div><div class="t m0 x35 h15 y44 ff4 fsb fc3 sc0 ls31 ws25">deleted, return a success message <span class="ls3a ws28">for use in the presentation <span class="_ _e"></span>layer.</span></div><div class="t m0 x83 h15 y45 ff4 fsb fc3 sc0 ls2e ws4d"> Come back and check your work<span class="ls71 wsd4"> against the following listing.</span></div><div class="t m0 x35 h3b yf62 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>DeleteBookmarkCommand </div><div class="t m0 x35 h3b yf63 ffd fs18 fc3 sc0 ls6 ws0">:</div><div class="t m0 x87 h3b yf64 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>execute(self,<span class="_"> </span>data):</div><div class="t m0 x36 h3b yf65 ffd fs18 fc3 sc0 lsb2 ws0">db.delete(&apos;bookmarks&apos;,<span class="_"> </span>{&apos;id&apos;:<span class="_"> </span>data})</div><div class="t m0 x36 h3b yf66 ffd fs18 fc1 sc0 lsb2 ws0">return<span class="_"> </span>&apos;Bookmark<span class="_"> </span>deleted!&apos;</div><div class="t m0 x35 h30 yf67 ffb fsc fc2 sc0 ls6 ws0">Q</div><div class="t m0 xbc h5a yf68 ffb fs20 fc2 sc0 ls11c ws0">UITTING</div><div class="t m0 x90 h30 yf67 ffb fsc fc2 sc0 ls1ca ws0"> B</div><div class="t m0 x15 h5a yf68 ffb fs20 fc2 sc0 ls1ac ws0">ARK</div><div class="t m0 x35 h15 yf69 ff4 fsb fc3 sc0 ls71 ws25a">There’s one piece of polish left: a command f<span class="_ _e"></span>o<span class="ls1b ws767">r exiting Bark. A user could use the usual</span></div><div class="t m0 x35 h15 yf6a ff4 fsb fc3 sc0 ls42 ws32">Ctrl-C method of stopping the Python program<span class="_ _e"></span>,<span class="ls4e ws1e3"> but an option to exit is a litt<span class="_ _e"></span>le nicer.</span></div><div class="t m0 x83 h15 yf6b ff4 fsb fc3 sc0 ls3b ws425"> Python provides the </div><div class="t m5 x45 h24 yf6c ffd fsc fc3 sc0 lsa0 ws0">sys.exit</div><div class="t m0 x10b h15 yf6b ff4 fsb fc3 sc0 ls3d ws710"> function for stopping program execution. Write a</div><div class="t m5 x35 h24 yf6d ffd fsc fc3 sc0 lsa0 ws0">QuitCommand</div><div class="t m0 xe6 h15 yf6e ff4 fsb fc3 sc0 ls21 ws768"> whose </div><div class="t m5 x92 h24 yf6d ffd fsc fc3 sc0 lsa0 ws0">execute</div><div class="t m0 x93 h15 yf6e ff4 fsb fc3 sc0 ls20 ws59d"> method exits the program<span class="_ _e"></span> <span class="ls2d ws6df">using this approach, then</span></div><div class="t m0 x35 h15 yf6f ff4 fsb fc3 sc0 lsbc ws1ff">come back and c<span class="_ _e"></span>heck your work<span class="ls42 ws26e"> against the following listing.</span></div><div class="t m0 x35 h3b yf70 ffd fs18 fc3 sc0 lsb2 ws0">import<span class="_"> </span>sys</div><div class="t m0 x35 h3b yf71 ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x35 h3b yf72 ffd fs18 fc3 sc0 lsb2 ws0">class<span class="_"> </span>QuitCommand </div><div class="t m0 x35 h3b yf73 ffd fs18 fc3 sc0 ls6 ws0">:</div><div class="t m0 x87 h3b yf74 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>execute(self):</div><div class="t m0 x36 h3b yf75 ffd fs18 fc1 sc0 lsb2 ws0">sys.exit<span class="fc3">()</span></div><div class="t m0 x35 h15 yf76 ff4 fsb fc3 sc0 ls4e ws769">Now you can wipe the sweat from your brow . . . not</div><div class="t m0 x35 h15 yf77 ff4 fsb fc3 sc0 ls2f ws338">because you’re done, but because you’ll be developing the</div><div class="t m0 x35 h15 yf78 ff4 fsb fc3 sc0 ls3a ws28">presentation layer next. </div><div class="t m0 x19 h26 yf79 ffc fs15 fc2 sc0 ls1cb ws76a">6<span class="_ _0"></span>.<span class="_ _0"></span>3<span class="_ _0"></span>.<span class="_ _0"></span>3<span class="_ _11"> </span>The presentation layer</div><div class="t m0 x35 h15 yf7a ff4 fsb fc3 sc0 ls1c ws23a">Bark uses a command-line interface (CLI). Its prese<span class="_ _e"></span>ntation</div><div class="t m0 x35 h15 yf7b ff4 fsb fc3 sc0 ls4e ws56c">layer (the part the user sees, as shown in figur<span class="_ _e"></span>e 6.8) is text</div><div class="t m0 x35 h15 yf7c ff4 fsb fc3 sc0 ls34 ws76b">in a terminal. Depending on<span class="ls51 ws76c"> the application, a CLI</span></div><div class="t m0 x35 h15 yf7d ff4 fsb fc3 sc0 ls2f ws3e4">can<span class="_ _b1"> </span>run until the completion of<span class="ls62 ws76d"> a specific task, or it can</span></div><div class="t m0 x35 h15 yf7e ff4 fsb fc3 sc0 ls3a ws76e">keep running until the user explicitly exits. Because you</div><div class="t m0 x35 h15 yf7f ff4 fsb fc3 sc0 ls7d ws0">wrote </div><div class="t m5 x48 h24 yf80 ffd fsc fc3 sc0 lsa0 ws0">QuitCommand</div><div class="t m0 x1e h15 yf81 ff4 fsb fc3 sc0 ls3a ws76f">, you might guess that you’ll be doing</div><div class="t m0 x35 h15 yf82 ff4 fsb fc3 sc0 ls3b ws29">the latter.</div><div class="t m0 x17 h20 yf83 ffb fs7 fc4 sc0 ls6 ws0">A command to delete bookmarks<span class="_ _b2"></span>Listing<span class="_"> </span>6.9</div><div class="t m0 xa7 h20 yf84 ffb fs7 fc4 sc0 ls6 ws0">A command to exit the program<span class="_ _b2"></span>Listing<span class="_"> </span>6.10</div><div class="c x6d yf85 w70 hda"><div class="t m0 x12e h14 yf53 ff12 fs7 fcb sc0 lsde ws770">delete accepts a dictio<span class="ff13 ls6 ws0">n<span class="ff12">a</span>r<span class="ff12 lsd3">y </span></span></div><div class="t m0 x12e h14 yf54 ff12 fs7 fcb sc0 lsfd ws31a">of colu<span class="ff13 ls119 ws0">mn<span class="ff12 ls6"> <span class="ff13">n</span>a<span class="ff13">m</span><span class="ls10d">e, </span><span class="ff13">m</span><span class="lsde">atch </span></span></span></div><div class="t m0 x12e h14 yf86 ff12 fs7 fcb sc0 lsd6 ws3da">value pai<span class="ff13 ls6 ws0">r<span class="ff12 ls10e">s. </span></span></div></div><div class="c xf2 yf87 w71 hdd"><div class="t m0 x42 h14 yf88 ff12 fs7 fcb sc0 ls88 ws314">This should </div><div class="t m0 x42 h14 yf89 ff12 fs7 fcb sc0 ls6 ws0">i<span class="ff13 ls10e">mm</span><span class="lsee">ediately </span></div><div class="t m0 x42 h14 y568 ff12 fs7 fcb sc0 lse4 ws318">exit Ba<span class="ff13 ls6 ws0">r<span class="ff12 ls100">k.</span></span></div></div><div class="c x6f yf8a w5b hde"><div class="t m0 xf4 h36 yf8b ff11 fs1c fc12 sc0 ls6 ws0">Presentation layer</div><div class="t m0 xf3 h36 yf8c ff11 fs1c fc12 sc0 ls6 ws0">Business logic layer</div><div class="t m0 xf9 h36 yf8d ff11 fs1c fc12 sc0 ls6 ws0">Persistence layer</div></div><div class="c x103 yf8e w72 hdf"><div class="t m0 xb7 h2b yf8f ffb fs18 fcb sc0 ls17 ws771">Figure 6.8<span class="_ _29"> </span>The presentation </div><div class="t m0 xb7 h2b yf90 ffb fs18 fcb sc0 ls6a ws5e9">layer shows users what </div><div class="t m0 xb7 h2b yf91 ffb fs18 fcb sc0 ls12e ws43c">actions can be taken and a </div><div class="t m0 xb7 h2b yf92 ffb fs18 fcb sc0 ls18 ws43b">way to trigger them.</div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
