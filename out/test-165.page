<div id="pfa5" class="pf w0 h0" data-page-no="a5"><div class="pc pca5 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bga5.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">141<span class="_ _c2"></span><span class="ffa">An exercise in extension</span></div><div class="t m0 x35 h3b y2c2 ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x35 h3b y2c4 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>get_github_import_options():</div><div class="t m0 x87 h3b y2c5 ffd fs18 fc3 sc0 lsb2 ws0">return<span class="_"> </span>{</div><div class="t m0 x36 h3b y2c6 ffd fs18 fc3 sc0 lsb2 ws0">&apos;github_username&apos;:<span class="_"> </span>get_user_input(&apos;GitHub<span class="_"> </span>username&apos;),</div><div class="t m0 x36 h3b y2c7 ffd fs18 fc3 sc0 lsb2 ws0">&apos;preserve_timestamps&apos;:</div><div class="t m0 xe6 h3b y2c8 ffd fs18 fc3 sc0 lsb2 ws0">get_user_input(</div><div class="t m0 x66 h3b y2c9 ffd fs18 fc3 sc0 lsb2 ws0">&apos;Preserve<span class="_"> </span>timestamps<span class="_"> </span>[Y/n]&apos;,</div><div class="t m0 x66 h3b y2ca ffd fs18 fc3 sc0 lsb2 ws0">required=False</div><div class="t m0 xe6 h3b y2cb ffd fs18 fc3 sc0 lsb2 ws0">)<span class="_"> </span>in<span class="_"> </span>{&apos;Y&apos;,<span class="_"> </span>&apos;y&apos;,<span class="_"> </span>None},</div><div class="t m0 x87 h3b y2cc ffd fs18 fc3 sc0 ls6 ws0">}</div><div class="t m0 x35 h3b y1193 ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>loop():</div><div class="t m0 x87 h3b y1194 ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x87 h3b y1196 ffd fs18 fc3 sc0 lsb2 ws0">options<span class="_"> </span>=<span class="_"> </span>OrderedDict({</div><div class="t m0 x36 h3b y11cd ffd fs18 fc3 sc0 lsb2 ws0">...</div><div class="t m0 x36 h3b y944 ffd fs18 fc3 sc0 lsb2 ws0">&apos;G&apos;:<span class="_"> </span>Option(</div><div class="t m0 xe6 h3b y1197 ffd fs18 fc3 sc0 lsb2 ws0">&apos;Import<span class="_"> </span>GitHub<span class="_"> </span>stars&apos;,</div><div class="t m0 xe6 h3b y11ce ffd fs18 fc3 sc0 lsb2 ws0">commands.ImportGitHubStarsCommand(),</div><div class="t m0 xe6 h3b y11cf ffd fs18 fc3 sc0 lsb2 ws0">prep_call=get_github_import_options</div><div class="t m0 x36 h3b y11d0 ffd fs18 fc3 sc0 lsb2 ws0">),</div><div class="t m0 x87 h3b y119c ffd fs18 fc1 sc0 lsb2 ws0">})</div><div class="t m0 x97 h14 y11d1 ff12 fs7 fcb sc0 ls6 ws0"> </div><div class="t m0 x35 h15 yd1d ff4 fsb fc3 sc0 ls38 wsb9">You should be seeing how adding behavior <span class="ls62 ws81b">to an extensible system is a low-fricti<span class="_ _e"></span>on</span></div><div class="t m0 x35 h15 y1059 ff4 fsb fc3 sc0 ls38 wsf5">activity. It’s a joy to be ab<span class="ls3b ws3b6">le to focus almost entirely on accomplishing the desired</span></div><div class="t m0 x35 h15 y11d2 ff4 fsb fc3 sc0 ls3a wsa7">behavior, composing pieces of the existing infrastructure to hook up the rest of the</div><div class="t m0 x35 h15 y11d3 ff4 fsb fc3 sc0 ls48 ws364">plumbing. There’s a rare moment as a developer when you might<span class="_ _e"></span> feel like the con-</div><div class="t m0 x35 h15 y11d4 ff4 fsb fc3 sc0 ls71 ws81c">ductor of an orchestra, slowly layering the strings, woodwinds, <span class="_ _e"></span>and percussion</div><div class="t m0 x17 h20 y2ea ffb fs7 fc4 sc0 ls6 ws0">A GitHub stars import option<span class="_ _b8"></span>Listing<span class="_"> </span>7.9</div><div class="c x2a y11d5 wa hf0"><div class="t m0 x12e h14 y47f ff12 fs7 fcb sc0 ls170 ws749">A fu<span class="ff13 ls6 ws0">n<span class="ff12 ls118">ctio</span>n</span><span class="lsd5 ws2a6"> to get the GitHub </span></div><div class="t m0 x12e h14 y480 ff12 fs7 fcb sc0 lsff ws0">use<span class="ff13 ls103">rn</span><span class="ls6">a<span class="ff13">m</span><span class="lsd2 ws35c">e to i</span><span class="ff13">m</span><span class="lsec">po</span><span class="ff13">r</span><span class="lsd5 ws2d2">t sta</span><span class="ff13">r</span><span class="ls10e ws4f1">s f</span><span class="ff13">r</span>o<span class="ff13">m</span></span></div></div><div class="c x3f y11d6 w98 h101"><div class="t m0 x42 h14 y11d7 ff12 fs7 fcb sc0 lsd2 ws0">Whethe<span class="ff13 ls6">r</span><span class="lse1"> o<span class="ff13 ls6">r<span class="ff12"> </span>n</span><span class="ls1e2 ws81d">ot to </span><span class="ff13 ls6">r</span><span class="ls100">etai<span class="ff13 ls6">n</span><span class="lsee ws2cf"> the ti</span><span class="ff13 ls6">m<span class="ff12">e </span></span></span></span></div><div class="t m0 x42 h14 y11d8 ff12 fs7 fcb sc0 ls105 ws0">whe<span class="ff13 ls6">n</span><span class="ls13c ws45b"> the sta</span><span class="ff13 ls6">r</span><span class="ls13c ws46f"> was o</span><span class="ff13 ls6">r</span><span class="ls123">igi<span class="ff13 ls6">n</span><span class="lsec ws4f0">ally c</span><span class="ff13 ls6">r</span><span class="ls117">eated</span></span></div></div><div class="c xa5 y11d9 w3f h46"><div class="t m0 xea h14 y2ed ff12 fs7 fcb sc0 ls13c ws75c">Accepts “Y”, “y”, o<span class="ff13 ls6 ws0">r<span class="_ _0"></span><span class="ff12 ls88 ws81e"> just p<span class="ff13 ls6 ws0">r<span class="ff12 lsee">essi</span>n<span class="ff12 lse1">g </span></span></span></span></div><div class="t m0 xea h14 y2ee ff12 fs7 fcb sc0 ls6 ws0">E<span class="ff13">n</span><span class="lsd2">te</span><span class="ff13">r</span><span class="lsdc ws3df"> as the use</span><span class="ff13">r</span><span class="ls10a ws470"> sayi</span><span class="ff13">n</span><span class="lsd4 ws4ee">g “yes”</span></div></div><div class="c x2a y11da w99 h102"><div class="t m0 x12e h14 y11db ff12 fs7 fcb sc0 ls6 ws81f">Adds the GitHub i<span class="ff13 ws0">m<span class="ff12 lsec">po</span>r</span>t optio<span class="ff13 ws0">n<span class="ff12"> </span></span></div><div class="t m0 x12e h14 y11dc ff12 fs7 fcb sc0 ls13c ws46f">to the <span class="ff13 ls6 ws0">m<span class="ff12">e</span>n</span><span class="ls106 ws326">u with the <span class="ff13 ls6 ws0">r<span class="ff12 ls10f">ight </span></span></span></div><div class="t m0 x12e h14 y11dd ff12 fs7 fcb sc0 ls6 ws0">co<span class="ff13 ls10e">mm</span>a<span class="ff13">n</span><span class="ls88 ws314">d class a</span><span class="ff13">n</span><span class="lsd3 ws743">d fu</span><span class="ff13">n</span><span class="lse4">ctio</span><span class="ff13">n</span></div></div><div class="c x35 y11de w2 h103"><div class="t m0 xb7 h2f y11df ffb fs15 fc2 sc0 ls169 ws54a">More practice</div><div class="t m0 xb7 h30 y11e0 fff fsc fc3 sc0 lsb ws820">If you’d like some mo<span class="lsc ws821">re experience extending Bark, try <span class="ls1e3 ws822">implementing the ability to edit</span></span></div><div class="t m0 xb7 h30 y11e1 fff fsc fc3 sc0 lsb8 ws823">an existing bookmark.</div><div class="t m0 xb7 h30 y11e2 fff fsc fc3 sc0 ls188 ws824">You’ll need to add<span class="_ _e"></span> a new method to </div><div class="t m5 x91 h24 y11e2 ffd fsc fc3 sc0 lsa0 ws0">DatabaseMana<span class="_ _e"></span>ger</div><div class="t m0 x59 h30 y11e2 fff fsc fc3 sc0 ls1e4 ws825"> for updating records. Updating</div><div class="t m0 xb7 h30 y11e3 fff fsc fc3 sc0 ls189 ws6ef">a record requires the user to specify which <span class="_ _e"></span><span class="lsc ws826">record to update (sim<span class="ls92 ws827">ilar to delete) as well</span></span></div><div class="t m0 xb7 h30 y11e4 fff fsc fc3 sc0 ls90 ws828">as the column name<span class="_ _e"></span> and the new value to use. You can u<span class="_ _e"></span>se what you’ve already writ-</div><div class="t m0 xb7 h30 y11e5 fff fsc fc3 sc0 ls1a9 ws829">ten in </div><div class="t m5 x11c h24 y11e5 ffd fsc fc3 sc0 lsa0 ws0">add</div><div class="t m0 xd2 h30 y11e5 fff fsc fc3 sc0 ls1ca ws0">, </div><div class="t m5 x12e h24 y11e5 ffd fsc fc3 sc0 lsa0 ws0">select</div><div class="t m0 xe5 h30 y11e5 fff fsc fc3 sc0 ls1e5 ws82a">, and </div><div class="t m5 x83 h24 y11e5 ffd fsc fc3 sc0 lsa0 ws0">delete</div><div class="t m0 xaf h30 y11e5 fff fsc fc3 sc0 ls94 ws82b"> as a guide.</div><div class="t m0 xb7 h30 y11e6 fff fsc fc3 sc0 ls94 ws82c">The presentatio<span class="_ _e"></span>n layer must prompt the user for the ID of the bookmark to update<span class="_ _e"></span>,</div><div class="t m0 xb7 h30 y11e7 fff fsc fc3 sc0 ls97 ws82d">the column to <span class="ls6 ws82e">update, and the <span class="ls19b ws82f">new value to use. This<span class="ls1e6 ws830"> will hook up to a new </span></span></span></div><div class="t m5 x6e h24 y11e7 ffd fsc fc3 sc0 lsa0 ws0">Edit-</div><div class="t m5 xb7 h24 y11e8 ffd fsc fc3 sc0 lsa0 ws0">BookmarkComma<span class="_ _e"></span>nd</div><div class="t m0 x13e h30 y11e8 fff fsc fc3 sc0 lsf ws831"> in the business logic layer.</div><div class="t m0 xb7 h30 y11e9 fff fsc fc3 sc0 ls188 ws832">This is all stuff you’re<span class="_ _e"></span> a pro at now, so give it a shot! My version is in the source code</div><div class="t m0 xb7 h30 y11ea fff fsc fc3 sc0 ls166 ws833">for this chapter (se<span class="_ _e"></span>e <span class="fcc lsd0 ws0">https://github.com/daneah/practices-of<span class="_ _e"></span>-the-python-pro<span class="fc3 ls168">).</span></span></div></div><a class="l" href="https://github.com/daneah/practices-of-the-python-pro"><div class="d m2" style="border-style:none;position:absolute;left:201.060000px;bottom:160.538000px;width:228.540000px;height:10.500000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
