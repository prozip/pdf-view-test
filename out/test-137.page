<div id="pf89" class="pf w0 h0" data-page-no="89"><div class="pc pc89 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bg89.png"/><div class="t m0 xa0 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">113<span class="_ _aa"></span><span class="ffa">An initial code structure, by concern</span></div><div class="t m0 x35 h15 y40 ff4 fsb fc3 sc0 ls30 wse3">To construct this statement, you’ll need to write an </div><div class="t m5 x53 h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">add</div><div class="t m0 xe9 h15 y40 ff4 fsb fc3 sc0 ls25 ws1e4"> method in </div><div class="t m5 x95 h24 y3eb ffd fsc fc3 sc0 lsa0 ws0">DatabaseManage<span class="_ _e"></span>r</div><div class="t m0 x35 h15 y41 ff4 fsb fc3 sc0 ls71 ws0">that</div><div class="t m0 x8a h3d yb6c ffb fs1e fca sc0 ls6 ws0">1</div><div class="t m0 x48 h15 y141 ff4 fsb fc3 sc0 ls34 ws203">Accepts two arguments: the name of the <span class="ls2c ws616">table, and a dictionary that maps co<span class="_ _0"></span>l-</span></div><div class="t m0 x48 h15 y142 ff4 fsb fc3 sc0 ls34 ws9f">umn names to column values</div><div class="t m0 x8a h3d ye41 ffb fs1e fca sc0 ls6 ws0">2</div><div class="t m0 x48 h15 yae0 ff4 fsb fc3 sc0 ls2e ws4d">Constructs a placeholder string (a </div><div class="t m5 xf h24 yae1 ffd fsc fc3 sc0 ls6 ws0">?</div><div class="t m0 x12 h15 yae0 ff4 fsb fc3 sc0 ls81 ws148"> for each colu<span class="_ _e"></span>mn specified)</div><div class="t m0 x8a h3d yb71 ffb fs1e fca sc0 ls6 ws0">3</div><div class="t m0 x48 h15 yae3 ff4 fsb fc3 sc0 ls38 ws26">Constructs the string of the column names</div><div class="t m0 x8a h3d ye42 ffb fs1e fca sc0 ls6 ws0">4</div><div class="t m0 x48 h15 ya3b ff4 fsb fc3 sc0 ls1c ws4c4">Gets the column values as a tuple (<span class="_ _e"></span>A dictionary’s </div><div class="t m5 xe1 h24 ybe7 ffd fsc fc3 sc0 lsa0 ws0">.values()</div><div class="t m0 x99 h15 ya3b ff4 fsb fc3 sc0 ls6 ws731"> returns a </div><div class="t m5 x11f h24 ybe7 ffd fsc fc3 sc0 lsa0 ws0">dict_</div><div class="t m5 x48 h24 ye43 ffd fsc fc3 sc0 lsa0 ws0">values</div><div class="t m0 x38 h15 yb74 ff4 fsb fc3 sc0 ls7d ws11c"> object, which happens not to work with sqlite3’s </div><div class="t m5 x2f h24 ye43 ffd fsc fc3 sc0 lsa0 ws0">execute</div><div class="t m0 x7 h15 yb74 ff4 fsb fc3 sc0 ls79 wsf6"> method.)</div><div class="t m0 x8a h3d ye44 ffb fs1e fca sc0 ls6 ws0">5</div><div class="t m0 x48 h15 y148 ff4 fsb fc3 sc0 ls5e ws14d">Executes the statement with </div><div class="t m5 x85 h24 y7b9 ffd fsc fc3 sc0 lsa0 ws0">_execute</div><div class="t m0 x98 h15 y148 ff4 fsb fc3 sc0 ls3d ws71f">, passing the SQL statement with place-</div><div class="t m0 x48 h15 y149 ff4 fsb fc3 sc0 ls31 ws25">holders and the column values as separate arguments</div><div class="t m0 x35 h15 y4b ff4 fsb fc3 sc0 ls44 ws49a">Write the </div><div class="t m5 x21 h24 ye45 ffd fsc fc3 sc0 lsa0 ws0">add</div><div class="t m0 x1d h15 y5ab ff4 fsb fc3 sc0 ls36 ws87"> method now, and check back with the following listing to see how it</div><div class="t m0 x35 h15 y14b ff4 fsb fc3 sc0 ls47 ws0">compares.</div><div class="t m0 x35 h3b y53c ffd fs18 fc3 sc0 lsb2 ws0">def<span class="_"> </span>add(self,<span class="_"> </span>table_name,<span class="_"> </span>data):</div><div class="t m0 x36 h3b y53d ffd fs18 fc3 sc0 lsb2 ws0">placeholders<span class="_"> </span>=<span class="_"> </span>&apos;,<span class="_"> </span>&apos;.join(&apos;?&apos;<span class="_"> </span>*<span class="_"> </span>len(data))</div><div class="t m0 x36 h3b y53f ffd fs18 fc3 sc0 lsb2 ws0">column_names<span class="_"> </span>=<span class="_"> </span>&apos;,<span class="_"> </span>&apos;.join(data.keys())</div><div class="t m0 x36 h3b y675 ffd fs18 fc3 sc0 lsb2 ws0">column_values<span class="_"> </span>=<span class="_"> </span>tuple(data.values())</div><div class="t m0 x36 h3b y541 ffd fs18 fc3 sc0 lsb2 ws0">self._execute(</div><div class="t m0 xe6 h3b y542 ffd fs18 fc3 sc0 lsb2 ws0">f&apos;&apos;&apos;</div><div class="t m0 xe6 h3b y677 ffd fs18 fc3 sc0 lsb2 ws0">INSERT<span class="_"> </span>INTO<span class="_"> </span>{table_name}</div><div class="t m0 xe6 h3b y678 ffd fs18 fc3 sc0 lsb2 ws0">({column_names})</div><div class="t m0 xe6 h3b y545 ffd fs18 fc3 sc0 lsb2 ws0">VALUES<span class="_"> </span>({placeholders});</div><div class="t m0 xe6 h3b y546 ffd fs18 fc3 sc0 lsb2 ws0">&apos;&apos;&apos;,</div><div class="t m0 xe6 h3b y547 ffd fs18 fc3 sc0 lsb2 ws0">column_values,</div><div class="t m0 x36 h3b y548 ffd fs18 fc1 sc0 ls6 ws0">)</div><div class="t m0 x35 h30 ye46 ffb fsc fc2 sc0 ls6 ws0">U</div><div class="t m0 xbc h5a ye47 ffb fs20 fc2 sc0 ls1bc ws0">SING</div><div class="t m0 x4 h30 ye46 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x102 h5a ye47 ffb fs20 fc2 sc0 ls2a ws0">CLAUSES</div><div class="t m0 x38 h30 ye46 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x1d h5a ye47 ffb fs20 fc2 sc0 ls162 ws0">TO</div><div class="t m0 xa7 h30 ye46 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x7e h5a ye47 ffb fs20 fc2 sc0 ls1bd ws0">LIMIT</div><div class="t m0 xba h30 ye46 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 xd3 h5a ye47 ffb fs20 fc2 sc0 ls1be ws0">ACTION</div><div class="t m0 x69 h30 ye46 ffb fsc fc2 sc0 ls6 ws0"> </div><div class="t m0 x8f h5a ye47 ffb fs20 fc2 sc0 ls17 ws0">SCOPE</div><div class="t m0 x35 h15 ye48 ff4 fsb fc3 sc0 ls2f ws111">To insert records into a database, all you <span class="ls20 ws1bc">need is the info to be inserted, but some</span></div><div class="t m0 x35 h15 ye49 ff4 fsb fc3 sc0 ls30 ws156">database statements are used in ta<span class="lsaa ws0">n<span class="_ _1d"></span>d<span class="_ _1d"></span>e<span class="_ _0"></span>m<span class="_ _1d"></span> w<span class="_ _1d"></span>i<span class="_ _1d"></span>t<span class="_ _1d"></span>h<span class="_ _1d"></span> o<span class="_ _0"></span>n<span class="_ _1d"></span>e<span class="_ _1d"></span> o<span class="_ _1d"></span>r<span class="_ _1d"></span> m<span class="_ _1d"></span>o<span class="_ _1d"></span>r<span class="_ _0"></span>e<span class="_ _1d"></span> a<span class="_ _1d"></span>d<span class="_ _1d"></span>d<span class="_ _1d"></span>i<span class="_ _1d"></span>t<span class="_ _0"></span>i<span class="_ _1d"></span>o<span class="_ _1d"></span>n<span class="_ _1d"></span>a<span class="_ _1d"></span>l<span class="_ _1d"></span> <span class="ff3 ls25">clauses</span><span class="lsb1 ws6b2">. Clauses</span></span></div><div class="t m0 x35 h15 ye4a ff4 fsb fc3 sc0 ls36 wsab">affect which records the statement will operate on. Using a </div><div class="t m5 x71 h24 ye4b ffd fsc fc3 sc0 lsa0 ws0">DELETE</div><div class="t m0 x78 h15 ye4a ff4 fsb fc3 sc0 ls30 wsf9"> statement without</div><div class="t m0 x35 h15 ye4c ff4 fsb fc3 sc0 ls2e ws260">a clause, for example, could end up deleti<span class="_ _0"></span>ng<span class="ls20 ws294"> all the records in the table. You don’t</span></div><div class="t m0 x35 h15 ye4d ff4 fsb fc3 sc0 ls3d ws2c">want that.</div><div class="t m0 x83 h15 ye4e ff4 fsb fc3 sc0 ls6 ws0"> </div><div class="t m5 x1b h24 ye4f ffd fsc fc3 sc0 lsa0 ws0">WHERE</div><div class="t m0 x15 h15 ye4e ff4 fsb fc3 sc0 ls51 ws732"> clauses can be appended to severa<span class="ls31 ws733">l kinds of statements to limit the</span></div><div class="t m0 x35 h15 ye50 ff4 fsb fc3 sc0 ls38 ws3e6">statement’s effect to reco<span class="ls2d ws211">rds matching that criteria. You can combine multiple </span></div><div class="t m5 x11f h24 ye51 ffd fsc fc3 sc0 lsa0 ws0">WHERE</div><div class="t m0 x35 h15 ye52 ff4 fsb fc3 sc0 ls3e ws20d">criteria using </div><div class="t m5 x1d h24 ye53 ffd fsc fc3 sc0 lsa0 ws0">AND</div><div class="t m0 x66 h15 ye52 ff4 fsb fc3 sc0 ls5b ws734"> or </div><div class="t m5 x16 h24 ye53 ffd fsc fc3 sc0 lsa0 ws0">OR</div><div class="t m0 xa8 h15 ye52 ff4 fsb fc3 sc0 ls20 ws294">. In Bark, for example, each <span class="_ _e"></span><span class="ls8d ws735">bookmark record</span><span class="ws221"> has an ID, so</span></div><div class="t m0 x35 h15 ye54 ff4 fsb fc3 sc0 ls2d ws4f5">you can limit a statement to acting on a part<span class="ls6d ws736">icular rec<span class="_ _e"></span>ord by its <span class="ls51 ws13e">ID with a clause like</span></span></div><div class="t m5 x35 h24 ye55 ffd fsc fc3 sc0 lsa0 ws413">WHERE id = 3</div><div class="t m0 x1d h15 ye56 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x83 h15 ye57 ff4 fsb fc3 sc0 ls2e ws6e1"> This kind of limiting is useful both for <span class="ls2f ws109">queries (to search for <span class="ls36 ws2e7">specific rec<span class="_ _0"></span>ords) and</span></span></div><div class="t m0 x35 h15 ye58 ff4 fsb fc3 sc0 ls31 ws17b">for regular statements. Clauses w<span class="ls81 ws737">ill be useful when you need t<span class="_ _e"></span>o delete specific re<span class="_ _e"></span>cords. </span></div><div class="t m0 x17 h20 ye59 ffb fs7 fc4 sc0 ls6 ws0">Adding a record to a SQLite table<span class="_ _ad"></span>Listing<span class="_"> </span>6.3</div><div class="c x6d ye5a w63 h79"><div class="t m0 x12e h14 ye5b ff12 fs7 fcb sc0 lsfd ws310">The keys of the data a<span class="ff13 ls6 ws0">r<span class="ff12">e </span></span></div><div class="t m0 x12e h14 y75c ff12 fs7 fcb sc0 lsd2 ws0">the <span class="ff13 ls6">n<span class="ff12">a</span>m</span><span class="lsdc ws2ac">es of the colu</span><span class="ff13 ls10e">mn<span class="ff12">s.</span></span></div></div><div class="c xf0 ye5c w64 hcf"><div class="t m0 x128 h14 ye5d ff12 fs7 fcb sc0 ls111 ws0">.values() <span class="ff13 ls6">r</span><span class="ls117">etu<span class="_ _e"></span><span class="ff13 ls123">rn</span><span class="ls6 ws3a5">s a dict_values </span></span></div><div class="t m0 x128 h14 ye5e ff12 fs7 fcb sc0 lse0 ws389">object, but execute <span class="ff13 ls6 ws0">n</span><span class="lsd5 ws2a6">eeds a list </span></div><div class="t m0 x128 h14 ye5f ff12 fs7 fcb sc0 ls6 ws0">o<span class="ff13">r</span><span class="lsd9 ws2ce"> tuple.</span></div></div><div class="c x133 ye60 wa h56"><div class="t m0 x12e h14 yb49 ff12 fs7 fcb sc0 lse0 ws389">Passes the optio<span class="ff13 ls6 ws0">n</span><span class="lsd9 ws2ce">al values </span></div><div class="t m0 x12e h14 yb4a ff12 fs7 fcb sc0 ls6 ws0">a<span class="ff13">r</span><span class="lsdd">gu</span><span class="ff13">m</span>e<span class="ff13">n</span><span class="lsde ws3cf">t to _execute </span></div></div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
