<div id="pfd8" class="pf w0 h0" data-page-no="d8"><div class="pc pcd8 w0 h0"><img class="bi x0 y0 w1 h1" alt="" src="bgd8.png"/><div class="t m0 x42 h14 y80 ff7 fs7 fcb sc0 ls6 ws0">192</div><div class="t m0 x92 h2b y1cf ffb fs18 fcb sc0 ls6 ws0">C</div><div class="t m0 xd3 h2c y1d0 ffb fs19 fcb sc0 ls158 ws0">HAPTER</div><div class="t m0 xe4 h2b y1cf ffb fs18 fcb sc0 ls1bb ws730"> 10</div><div class="t m0 x2a h2d y80 ffa fs7 fcb sc0 ls6 ws0">Achieving loose coupling</div><div class="t m0 x44 h15 ybe9 ff4 fsb fc3 sc0 ls2e ws613">shines. Just as you <span class="_ _0"></span>reduced each of your <span class="_ _0"></span>commands to an </div><div class="t m5 x58 h24 y1785 ffd fsc fc3 sc0 lsa0 ws0">execute</div><div class="t m0 x99 h15 ybe9 ff4 fsb fc3 sc0 ls71 ws958"> interface that</div><div class="t m0 x44 h15 ybea ff4 fsb fc3 sc0 ls34 ws2d3">returns a status and result to decouple th<span class="ls42 ws62b">em from the presentation layer, you can</span></div><div class="t m0 x44 h15 ybeb ff4 fsb fc3 sc0 ls1e wsb4">reduce your persistence layer to a more ge<span class="ls3d ws13d">neral set of CRUD operations to decouple</span></div><div class="t m0 x44 h15 ybe ff4 fsb fc3 sc0 ls2d ws11e">it from the commands. Then, any new persistence layer you want to build can use the</div><div class="t m0 x44 h15 ybec ff4 fsb fc3 sc0 ls34 ws9f">same abstraction. </div><div class="t m0 x42 h26 y1786 ffc fs15 fc2 sc0 ls21b ws959">10.4.3<span class="_ _fc"> </span>T<span class="_ _e"></span>ry<span class="_ _e"></span> i<span class="_ _e"></span>t<span class="_ _e"></span> o<span class="_ _e"></span>ut</div><div class="t m0 x44 h15 yfae ff4 fsb fc3 sc0 ls4e ws7f4">You’ve got the tools and knowledge you need to de<span class="_ _e"></span>couple your commands from </div><div class="t m5 x2c h24 yfaf ffd fsc fc3 sc0 lsa0 ws0">Data-</div><div class="t m5 x44 h24 y1787 ffd fsc fc3 sc0 lsa0 ws0">baseManager</div><div class="t m0 x1c h15 y5b1 ff4 fsb fc3 sc0 ls6 ws0">.</div><div class="t m0 x32 h15 yfb0 ff4 fsb fc3 sc0 ls3a wsa7"> Using an abstract base class, </div><div class="t m5 x11 h24 y1788 ffd fsc fc3 sc0 lsa0 ws0">PersistenceLa<span class="_ _e"></span>yer</div><div class="t m0 x25 h15 yfb0 ff4 fsb fc3 sc0 ls20 ws9b">, to define the interface, creat<span class="_ _e"></span>e a</div><div class="t m5 x44 h24 y1789 ffd fsc fc3 sc0 lsa0 ws0">BookmarkDatab<span class="_ _e"></span>ase</div><div class="t m0 x7e h15 y156 ff4 fsb fc3 sc0 ls34 ws7a"> persistence layer that will si<span class="ls30 ws8e7">t between your commands and the</span></div><div class="t m5 x44 h24 yfb2 ffd fsc fc3 sc0 lsa0 ws0">DatabaseManag<span class="_ _e"></span>er</div><div class="t m0 x28 h15 y157 ff4 fsb fc3 sc0 ls71 ws83"> class, as shown in figure 10.9.</div><div class="c x44 y178a wdc h159"><div class="t m0 xc1 h15a y178b ff11 fs39 fc12 sc0 ls6 ws0">Database</div><div class="t m0 x12b h36 y178c ff11 fs1c fc12 sc0 ls6 ws0">Data represented as record objects</div><div class="t m0 x12b h36 y178d ff11 fs1c fc12 sc0 ls6 ws0">CRUD operations with SQL</div><div class="t m0 x12b h36 y178e ff11 fs1c fc12 sc0 ls6 ws0">(INSERT, SELECT, UPDATE,</div><div class="t m0 x12b h36 y178f ff11 fs1c fc12 sc0 ls6 ws0">DELETE) </div><div class="t m0 x12b h36 y1790 ff11 fs1c fc12 sc0 ls6 ws0">Conﬁguration needed for the</div><div class="t m0 x12b h36 y1791 ff11 fs1c fc12 sc0 ls6 ws0">database’s ﬁles and tables</div><div class="t m0 xd8 h36 y178c ff11 fs1c fc12 sc0 ls6 ws0">Data represented as record objects</div><div class="t m0 xd8 h36 y178d ff11 fs1c fc12 sc0 ls6 ws0">CRUD operations with HTTP </div><div class="t m0 xd8 h36 y178e ff11 fs1c fc12 sc0 ls6 ws0">(POST, GET, PUT, DELETE)</div><div class="t m0 xd8 h36 y1790 ff11 fs1c fc12 sc0 ls6 ws0">Conﬁguration needed for the</div><div class="t m0 xd8 h36 y1791 ff11 fs1c fc12 sc0 ls6 ws0">API’s domain and URLs</div><div class="t m0 xb1 h15a y178b ff11 fs39 fc12 sc0 ls6 ws0">API</div></div><div class="c x44 y1792 w2 hce"><div class="t m0 xd h2b y1793 ffb fs18 fcb sc0 ls175 ws572">Figure 10.8<span class="_ _29"> </span>A database </div><div class="t m0 xd h2b y1794 ffb fs18 fcb sc0 ls1bb ws730">and an API share several </div><div class="t m0 xd h2b y1795 ffb fs18 fcb sc0 ls12e ws0">commonalities.</div></div><div class="c x44 y1796 wdd h15b"><div class="t m0 x149 h5f y1797 ff15 fs1c fc12 sc0 ls6 ws0">Command</div><div class="t m0 x102 h5f y1798 ff15 fs1c fc12 sc0 ls6 ws0">PersistenceLayer</div><div class="t m0 x102 h5f y1799 ff15 fs1c fc12 sc0 ls6 ws0">BookmarkDatabase<span class="_ _113"> </span>DatabaseManager</div><div class="t m6 xdf h40 y179a ff12 fs1f fc12 sc0 ls6 ws0">Commands use the interface of a persistence</div><div class="t m6 xdf h40 y179b ff12 fs1f fc12 sc0 ls6 ws0">layer to store bookmark data.</div><div class="t m6 x0 h40 y179c ff12 fs1f fc12 sc0 ls6 ws0">A </div><div class="t m6 xc7 h115 y179d ff1e fs2c fc12 sc0 ls6 ws0">BookmarkDatabase</div><div class="t m6 x0 h40 y179e ff12 fs1f fc12 sc0 ls6 ws0">is a specific implementation</div><div class="t m6 x0 h40 y179f ff12 fs1f fc12 sc0 ls6 ws0">of a </div><div class="t m6 x13c h115 y17a0 ff1e fs2c fc12 sc0 ls6 ws0">PersistenceLayer</div><div class="t m6 xb5 h40 y179f ff12 fs1f fc12 sc0 ls6 ws0">.</div><div class="t m6 x56 h40 y17a1 ff12 fs1f fc12 sc0 ls6 ws0">The bookmark database depends</div><div class="t m6 x56 h40 y17a2 ff12 fs1f fc12 sc0 ls6 ws0">on a general set of CRUD behaviors</div><div class="t m6 x56 h40 y17a3 ff12 fs1f fc12 sc0 ls6 ws0">for a database, provided by</div><div class="t m6 x56 h115 y17a4 ff1e fs2c fc12 sc0 ls6 ws0">DatabaseManager</div><div class="t m6 x4c h40 y17a5 ff12 fs1f fc12 sc0 ls6 ws0">.</div></div><div class="t m0 x44 h2b y3e4 ffb fs18 fc11 sc0 ls6 ws0">Figure 10.9</div><div class="t m3 x0 h3a y3e4 ff8 fs18 fc11 sc0 ls6 ws0"> </div><div class="t m0 x79 h2b y3e4 ffb fs18 fc11 sc0 ls6 ws0">Decoupling commands from da<span class="_ _e"></span>tabase specifics with an interface and specific</div><div class="t m3 x0 h3a y3e4 ff8 fs18 fc11 sc0 ls6 ws0"> </div><div class="t m0 x44 h2b y17a6 ffb fs18 fc11 sc0 ls6 ws0">implementation</div><div class="t m0 x44 h15 y17a7 ff4 fsb fcd sc0 ls6 ws0">Create <span class="_ _f"></span>these <span class="_ _f"></span>clas<span class="_ _e"></span>ses <span class="_ _f"></span>in <span class="_ _f"></span>a <span class="_ _f"></span>new <span class="_ _f"></span>persistence<span class="_ _e"></span> <span class="_ _f"></span>module; <span class="_ _f"></span>you’ll <span class="_ _f"></span>refactor <span class="_ _f"></span>y<span class="_ _e"></span>our <span class="_ _f"></span>commands <span class="_ _f"></span>to</div><div class="t m3 x0 h22 y17a7 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x44 h15 y135b ff4 fsb fcd sc0 ls6 ws0">use </div><div class="t m3 x0 h22 y135b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xae h15 y135b ff4 fsb fcd sc0 ls6 ws0">this </div><div class="t m3 x0 h22 y135b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x20 h15 y135b ff4 fsb fcd sc0 ls6 ws0">instead </div><div class="t m3 x0 h22 y135b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x28 h15 y135b ff4 fsb fcd sc0 ls6 ws0">of</div><div class="t m3 x0 h22 y135b ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m4 x67 h24 ya09 ffd fsc fcd sc0 ls6 ws0">Datab<span class="_ _0"></span>aseMana<span class="_ _0"></span>ger</div><div class="t m3 x0 h25 ya09 ff8 fsc fcd sc0 ls6 ws0"> </div><div class="t m0 x84 h15 ya09 ff4 fsb fcd sc0 ls6 ws0">directly. </div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x74 h15 ya09 ff4 fsb fcd sc0 ls6 ws0">Instead </div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x4f h15 ya09 ff4 fsb fcd sc0 ls6 ws0">of </div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x4a h15 ya09 ff4 fsb fcd sc0 ls6 ws0">database- </div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x99 h15 ya09 ff4 fsb fcd sc0 ls6 ws0">or </div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 xdc h15 ya09 ff4 fsb fcd sc0 ls6 ws0">API-specific</div><div class="t m3 x0 h22 ya09 ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x44 h15 ya0a ff4 fsb fcd sc0 ls6 ws0">method <span class="_ _f"></span>names, <span class="_ _f"></span>th<span class="_ _e"></span>e <span class="_ _f"></span>interface</div><div class="t m3 x0 h22 ya0a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x46 h15 ya0a ff4 fsb fcd sc0 ls6 ws0">should <span class="_ _f"></span>provide <span class="_ _f"></span>m<span class="_ _e"></span>ethods <span class="_ _f"></span>that</div><div class="t m3 x0 h22 ya0a ff8 fsb fcd sc0 ls6 ws0"> </div><div class="t m0 x103 h15 ya0a ff4 fsb fcd sc0 ls6 ws0">would <span class="_ _f"></span>apply <span class="_ _f"></span>t<span class="_ _e"></span>o <span class="_ _f"></span>most <span class="_ _f"></span>any</div><div class="t m0 x44 h15 ya0b ff4 fsb fcd sc0 ls6 ws0">persistence layer:</div></div><div class="pi" data-data='{"ctm":[1.000000,0.000000,0.000000,1.000000,0.000000,0.000000]}'></div></div>
